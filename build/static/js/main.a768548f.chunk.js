(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{152:function(e,t,a){e.exports=a.p+"static/media/airtellogo.09dde59b.png"},193:function(e,t,a){},194:function(e,t,a){},298:function(e,t,a){e.exports=a(441)},303:function(e,t,a){},309:function(e,t,a){},329:function(e,t){},331:function(e,t){},365:function(e,t){},366:function(e,t){},441:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(23),i=a.n(l),s=(a(303),a(102)),o=a(93),c=a(263),m=a(52),u={packs:[],pack:[],updatedPack:null},d=Object(o.c)({packs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET PACK LOADED":return Object(m.a)({},e,{packs:t.payload});case"EDIT PACK INFO":return Object(m.a)({},e,{updatedPack:t.payload});case"GET_PACK_INFO_BY_ID":return Object(m.a)({},e,{pack:t.payload});default:return e}}}),p=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,g=Object(o.e)(d,p(Object(o.a)(c.a))),h=(a(309),a(115)),y=a(35),E=a(1),f=a(9),b=a(8),v=a(13),S=a(12),D=a(5),O=a(14),w=a(11),x=a.n(w),C=new(function(){function e(){Object(f.a)(this,e)}return Object(b.a)(e,[{key:"getLoggedInUserInfo",value:function(){localStorage.getItem("UserInfo")}},{key:"getHeader",value:function(){return{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}}}]),e}()),k="https://retailer.airtel.lk/SLRetailer/";"retailer.airtel.lk"==window.location.hostname&&(k="https://retailer.airtel.lk/SLRetailer/"),"retailer.srilanka.airtel.itm"==window.location.hostname&&(k="http://retailer.srilanka.airtel.itm:5443/SLRetailer/"),"125.16.74.160"==window.location.hostname&&(k="http://125.16.74.160:30611/SLRetailer/"),"125.17.6.6"==window.location.hostname&&(k="http://125.17.6.6/retailer/SLRetailer/"),"tstretailer.airtel.lk"==window.location.hostname&&(k="https://tstretailer.airtel.lk/SLRetailer/"),"localhost"!=window.location.hostname&&"127.0.0.1"!=window.location.hostname||(k="http://125.16.74.160:30611/SLRetailer/");var j=k+"reports/",I=k+"recharges/",T=k+"simswap/",R=k+"retailer/",F=k+"reports/",P=k+"auth/portaLogin",B=k+"user/logout",N=k+"avde/prepaidAcquisitions",A=k+"avde/prepaidResubmits",L=k+"avde/pendingCount",M=k+"recharges/getPrepaidPacksForPortal",_=k+"recharges/getPrepaidPacksById",z=k+"recharges/uploadPrepaidPack",U=k+"recharges/uploadRechargeImage",W=k+"banner/getAllBannersForPortal",H=k+"banner/upload",Z=k+"banner/update",q=k+"recharges/uploadRechargeImage",V=k+"banner/getById",Y=k+"avde/acqDataForDataEntry",G=k+"cms/data",K=k+"avde/acqDataForVerification",J=k+"avde/saveVerificationDetails",$=k+"avde/acqDataForDataEntry",X=k+"avde/saveDataEntryDetails",Q=k+"preactivation/validate",ee=k+"preactivation/portal",te=k+"resubmit/data",ae=k+"resubmit/portal",ne=k+"cms/unlockSelection",re=k+"agent/add",le=k+"agent/delete",ie=k+"agent/retrieve",se=k+"bestoffers/upload",oe=k+"bestoffers/download",ce=k+"roles/all",me=k+"roles/",ue=k+"acquisition/msisdnAcquisitionHistory",de=new(function(){function e(){Object(f.a)(this,e)}return Object(b.a)(e,[{key:"login",value:function(e,t){return console.log(e),x.a.post(P,e,"")}},{key:"checkapi",value:function(e,t){return console.log(t),x.a.post(e,t,{Origin:"125.17.6.6",Host:"125.17.6.6"})}},{key:"logout",value:function(){return x.a.get(B,C.getHeader())}}]),e}()),pe=a(483),ge=a(486),he=a(83),ye=a(152),Ee=a.n(ye),fe={flexGrow:1},be=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(pe.a,{position:"static"},r.a.createElement(ge.a,null,r.a.createElement("img",{style:{width:"100px"},src:Ee.a}),r.a.createElement("div",{style:{width:"300px"}},r.a.createElement(he.a,{variant:"h6",style:fe},"\xa0\xa0  SL MITRA Retailer Portal")))))},ve=a(124),Se=new(function(){function e(){Object(f.a)(this,e)}return Object(b.a)(e,[{key:"showError",value:function(e){ve.b.error(e,this.options())}},{key:"showSuccess",value:function(e){ve.b.success(e,this.options())}},{key:"showWarning",value:function(e){ve.b.warn(e,this.options())}},{key:"options",value:function(){return{position:"top-right",autoClose:2e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0}}}]),e}());function De(e,t){var a={};return 200===e.status&&(console.log(e,"RESPONSE@@@@@@@@@@@"),200!==(a=e.data).status&&201!==a.status)?400===a.status||401===a.status||403===a.status?(localStorage.clear(),Promise.reject(window.location.replace("#/login"))):(Se.showError(a.message),Promise.reject(a.message)):a}var Oe=a(495),we=a(515),xe=a(265),Ce=a.n(xe),ke=a(494),je=a(489),Ie=a(514),Te=a(487),Re=a(266),Fe=a.n(Re),Pe=a(516),Be=a(97),Ne=a(488);var Ae=Object(Be.a)(function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:"#df0915"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}});function Le(e){var t=Ae(),a=function(t){e.loginProps.onChange(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{component:"main",maxWidth:"xs"},r.a.createElement(je.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(Pe.a,{className:t.avatar},r.a.createElement(Fe.a,null)),r.a.createElement(he.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:t.form,noValidate:!0},r.a.createElement(Ie.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Olm Id",name:"userName",autoComplete:"email",autoFocus:!0,onChange:a,value:e.loginProps.userName}),r.a.createElement(Ie.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:a,value:e.loginProps.password}),r.a.createElement(ke.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:e.loginProps.login},"Sign In")))))}var Me=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).onChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value.trim()))},a.login=function(e){if(a.setState({isError:""}),e.preventDefault(),a.state.userName&&a.state.password){a.setState({isDasable:!0});var t=Math.floor(1e16*Math.random());15==t.toString().length&&(t=t.toString()+"9");var n=(69*t-99).toString();n=n.substring(0,15);var r=Ce.a.AES.encrypt(a.state.password,n).toString(),l={userName:a.state.userName,password:r+t};de.login(l).then(function(e){a.setState({isError:e.data.message});var t=De(e);console.log("resolveResponse",t.result&&t.result.roleCode),a.setState({isDasable:!1}),t.result&&(window.localStorage.setItem("userDetails",JSON.stringify(t.result)),window.localStorage.setItem("token",t.result.token)),console.log(a.props.history),t.result&&"BOA"==t.result.roleCode?a.props.history.push("/verify"):(t.result&&"DE"==t.result.roleCode&&a.props.history.push("/dataentry"),t.result&&"ADMIN"==t.result.roleCode&&a.props.history.push("/welcome"),(t.result&&"DIST"==t.result.roleCode||t.result&&"FSE"==t.result.roleCode)&&a.props.history.push("/distributor"))})}else a.setState({isError:"Olms Id and password is required."})},a.state={userName:"",password:"",isDasable:!1,isError:!1},a.login=a.login.bind(Object(D.a)(a)),a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(be,null),r.a.createElement(Le,{loginProps:{onChange:this.onChange,login:this.login,userName:this.state.userName,password:this.state.password}}),r.a.createElement(Oe.a,{container:!0,justify:"space-around"},r.a.createElement(Oe.a,{justify:"center",container:!0,xs:12,sm:10},this.state.isDasable?r.a.createElement(we.a,{variant:"subtitle1",style:_e.waitMessage}," Please wait..."):"",this.state.isError?r.a.createElement(we.a,{variant:"subtitle1",style:_e.errorMessage}," ",this.state.isError," "):"")))}},{key:"componentDidMount",value:function(){if(window.localStorage.getItem("token")){var e=localStorage.getItem("lastUrl");this.props.history.push("/"+e)}}}]),t}(r.a.Component),_e={formStyle:{display:"flex",flexFlow:"row wrap"},label:{display:"flex",justifyContent:"center"},errorMessage:{color:"red",marginTop:"11px"},waitMessage:{color:"gray",marginTop:"11px"}},ze=Me,Ue=new(function(){function e(){Object(f.a)(this,e)}return Object(b.a)(e,[{key:"getStaticData",value:function(e){return x.a.get(G+"?role="+e,C.getHeader())}},{key:"getListOfRoles",value:function(){return x.a.get(ce,C.getHeader())}},{key:"getRoleDetails",value:function(e){return x.a.get(me+e,C.getHeader())}},{key:"downlaodAllOfferData",value:function(){return x.a.get(oe,C.getHeader())}},{key:"uploadRetailer",value:function(e){return x.a.post(re,e,C.getHeader())}},{key:"uploadOffer",value:function(e){return x.a.post(se,e,C.getHeader())}},{key:"deleteRetailer",value:function(e){return x.a.post(le,e,C.getHeader())}},{key:"searchRetailer",value:function(e){return x.a.get(ie+"?laId="+e,C.getHeader())}},{key:"reportDirectDownload",value:function(e,t){return"disconnectionReport"==t||"reconnectionReport"==t?x.a.get(j+t+"?date="+e.startDate+"&id="+localStorage.getItem("token"),C.getHeader()):x.a.get(j+t+"?retrieveType="+e.retrieveType+"&startDate="+e.startDate+"&endDate="+e.endDate+"&id="+localStorage.getItem("token"),C.getHeader())}},{key:"sentReportToEmail",value:function(e,t){var a=x.a.create();a.defaults.timeout=6e5;var n=j+t;return"reloadAndBillPayCount"===t&&(n=I+t),"simSwapCount"===t&&(n=T+t),"mpinResetCount"!==t&&"idleRetailers"!==t&&"monthlyActiveRetailers"!==t&&"dailyActiveRetailers"!==t||(n=R+t),"acquisitionCountReport"!==t&&"retailerOnboardedReport"!==t||(n=F+t),a.post(n,e,C.getHeader())}},{key:"uploadPackImage",value:function(e){return x.a.post(U,e,C.getHeader())}},{key:"addPack",value:function(e){return x.a.post(z,e,C.getHeader())}},{key:"addBanner",value:function(e){return x.a.post(H,e,C.getHeader())}},{key:"updateBanner",value:function(e){return x.a.post(Z,e,C.getHeader())}},{key:"getOneBanner",value:function(e){return x.a.get(V+"?Id="+e,C.getHeader())}},{key:"listPack",value:function(e){return x.a.get(M,C.getHeader())}},{key:"getAllBanner",value:function(e){return x.a.post(W,e,C.getHeader())}},{key:"searchMSISDN",value:function(e){return x.a.get(ue+"?msisdn="+e,C.getHeader())}}]),e}()),We=a(503),He=a(490),Ze=new(function(){function e(){Object(f.a)(this,e)}return Object(b.a)(e,[{key:"listDocs",value:function(e){return x.a.post(N,e,C.getHeader())}},{key:"listDocsResubmit",value:function(e){return x.a.post(A,e,C.getHeader())}},{key:"getListOfRoles",value:function(){return x.a.get(ce,C.getHeader())}},{key:"getOneVerify",value:function(e){return x.a.get(K+"?txnId="+e,C.getHeader())}},{key:"getOneDataEntry",value:function(e){return x.a.get($+"?txnId="+e,C.getHeader())}},{key:"saveDataEntry",value:function(e){return x.a.post(X,e,C.getHeader())}},{key:"unlockTransectionsSkip",value:function(e){return x.a.post(ne,e,C.getHeader())}},{key:"getStaticData",value:function(e){return x.a.get(G+"?role="+e,C.getHeader())}},{key:"getTotalToBeProcessed",value:function(){return x.a.get(L,C.getHeader())}},{key:"approveDocs",value:function(e){return x.a.post(J,e,C.getHeader())}},{key:"searchMobileNo",value:function(e){return x.a.get(Y+"?role=DE&mobileNumber="+e,C.getHeader())}},{key:"searchDistributer",value:function(e){return x.a.get(Q+"?mobileNumber="+e.mobileNumber,C.getHeader())}},{key:"uploadDistrubuter",value:function(e){return x.a.post(ee,e,C.getHeader())}},{key:"searchDistributerResubmit",value:function(e){return x.a.get(te+"?mobileNumber="+e.mobileNumber,C.getHeader())}},{key:"uploadDistrubuterResubmit",value:function(e){return x.a.post(ae,e,C.getHeader())}}]),e}()),qe=a(71),Ve=a(4),Ye=a(57),Ge=a(519),Ke=a(493),Je=a(499),$e=a(282),Xe=a(275),Qe=a.n(Xe),et=a(276),tt=a.n(et),at=a(277),nt=a.n(at),rt=a(443),lt=a(496),it=a(497),st=a(273),ot=a.n(st),ct=a(196),mt=a.n(ct),ut=a(270),dt=a.n(ut),pt=a(272),gt=a.n(pt),ht=a(274),yt=a.n(ht),Et=a(91),ft=a.n(Et),bt=a(197),vt=a.n(bt),St=a(271),Dt=a.n(St),Ot=a(198),wt=a.n(Ot),xt=a(268),Ct=a.n(xt),kt=a(269),jt=a.n(kt),It=r.a.createElement("div",null,r.a.createElement(rt.a,{button:!0,component:"a",href:"#/welcome"},r.a.createElement(lt.a,null,r.a.createElement(Ct.a,null)),r.a.createElement(it.a,{primary:"Welcome"})),r.a.createElement(rt.a,{button:!0,component:"a",href:"#/msisdn-status"},r.a.createElement(lt.a,null,r.a.createElement(jt.a,null)),r.a.createElement(it.a,{primary:"MSISDN History"})),r.a.createElement(rt.a,{button:!0,component:"a",href:"#/packs"},r.a.createElement(lt.a,null,r.a.createElement(dt.a,null)),r.a.createElement(it.a,{primary:"Pack Activation"})),r.a.createElement(rt.a,{button:!0,component:"a",href:"#/offerupload"},r.a.createElement(lt.a,null,r.a.createElement(Dt.a,null)),r.a.createElement(it.a,{primary:"Offer Upload"})),r.a.createElement(rt.a,{button:!0,component:"a",href:"#/banners"},r.a.createElement(lt.a,null,r.a.createElement(gt.a,null)),r.a.createElement(it.a,{primary:"Upload Banner"})),r.a.createElement(rt.a,{button:!0,component:"a",href:"#/backoffice"},r.a.createElement(lt.a,null,r.a.createElement(ot.a,null)),r.a.createElement(it.a,{primary:"BO Agent"})),r.a.createElement(rt.a,{button:!0,component:"a",href:"#/report"},r.a.createElement(lt.a,null,r.a.createElement(mt.a,null)),r.a.createElement(it.a,{primary:"Reports"}))),Tt=r.a.createElement("div",null,r.a.createElement(rt.a,{component:"a",href:"#/verify",button:!0},r.a.createElement(lt.a,null,r.a.createElement(vt.a,null)),r.a.createElement(it.a,{primary:"Acquisition Verification"})),r.a.createElement(rt.a,{component:"a",href:"#/resubmit-verify",button:!0},r.a.createElement(lt.a,null,r.a.createElement(wt.a,null)),r.a.createElement(it.a,{primary:"Resubmit Verification"}))),Rt=r.a.createElement("div",null,r.a.createElement(rt.a,{component:"a",href:"#/dataentry",button:!0},r.a.createElement(lt.a,null,r.a.createElement(vt.a,null)),r.a.createElement(it.a,{primary:"Acquisition Data Entry"})),r.a.createElement(rt.a,{component:"a",href:"#/resubmit-dataentry",button:!0},r.a.createElement(lt.a,null,r.a.createElement(wt.a,null)),r.a.createElement(it.a,{primary:"Resubmit Data Entry"}))),Ft=r.a.createElement("div",null,r.a.createElement(rt.a,{component:"a",href:"#/distributor",button:!0},r.a.createElement(lt.a,null,r.a.createElement(ft.a,null)),r.a.createElement(it.a,{primary:"Upload Document"})),r.a.createElement(rt.a,{component:"a",href:"#/dist-resubmit",button:!0},r.a.createElement(lt.a,null,r.a.createElement(ft.a,null)),r.a.createElement(it.a,{primary:"Resubmit Document"})),r.a.createElement(rt.a,{button:!0,component:"a",href:"#/report"},r.a.createElement(lt.a,null,r.a.createElement(mt.a,null)),r.a.createElement(it.a,{primary:"Reports"})));var Pt=r.a.createElement("div",null,r.a.createElement(h.b,{style:{textDecoration:"none"},onClick:function(){de.logout().then(function(e){localStorage.clear(),window.location.replace("#/login")})}},r.a.createElement(rt.a,{button:!0},r.a.createElement(lt.a,null,r.a.createElement(yt.a,null)),r.a.createElement(it.a,{primary:"Logout"})))),Bt=Object(Be.a)(function(e){return{root:{display:"flex"},endMenu:{display:"flex",flexDirection:"row reverse"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(m.a)({display:"flex",alignItems:"center",padding:"0 8px"},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}});function Nt(e){var t=r.a.useState({acquisitionCount:"",resubmitCount:""}),a=Object(qe.a)(t,2),n=(a[0],a[1],Bt()),l=Object(Ye.a)(),i=r.a.useState(!1),s=Object(qe.a)(i,2),o=s[0],c=s[1];var m=localStorage.getItem("userDetails"),u=(m=m&&JSON.parse(m))&&m.roleCode,d="",p="";return"DE"!=u&&"BOA"!=u||(d="Acquisition records to be processed: ",p="Resubmit records to be processed:  "),r.a.createElement("div",{className:n.root},r.a.createElement(je.a,null),r.a.createElement(pe.a,{position:"fixed",className:Object(Ve.a)(n.appBar,Object(E.a)({},n.appBarShift,o))},r.a.createElement(ge.a,null,r.a.createElement($e.a,{"aria-label":"open drawer",onClick:function(){c(!0)},edge:"start",className:Object(Ve.a)(n.menuButton,o&&n.hide)},r.a.createElement(Qe.a,null)),r.a.createElement(Oe.a,{justify:"space-between",container:!0},r.a.createElement(Oe.a,{item:!0},r.a.createElement(he.a,{variant:"h6",noWrap:!0},"SL MITRA Retailer Portal")),r.a.createElement(Oe.a,{item:!0},r.a.createElement(Oe.a,{container:!0,direction:"row"},r.a.createElement(Oe.a,{item:!0},r.a.createElement(he.a,{style:{color:"white"}},d," ",localStorage.getItem("acquisitionCount")||"")),r.a.createElement(Oe.a,{item:!0},"\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"),r.a.createElement(Oe.a,{item:!0},r.a.createElement(he.a,{style:{color:"white"},noWrap:!0},p," ",localStorage.getItem("resubmitCount")||"")),r.a.createElement(Oe.a,{item:!0},"\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"),r.a.createElement(Oe.a,{item:!0},r.a.createElement(he.a,{variant:"p",style:{color:"white"},noWrap:!0},m&&m.loginName?m.loginName.toUpperCase():null))))))),r.a.createElement(Ge.a,{className:n.drawer,variant:"persistent",anchor:"left",open:o,classes:{paper:n.drawerPaper}},r.a.createElement("div",{className:n.drawerHeader},r.a.createElement("img",{style:{marginRight:"73px",width:"100px"},src:Ee.a}),r.a.createElement($e.a,{onClick:function(){c(!1)}},"ltr"===l.direction?r.a.createElement(tt.a,{style:{color:"gray"}}):r.a.createElement(nt.a,{style:{color:"gray"}}))),r.a.createElement(Je.a,null),"ADMIN"==u?r.a.createElement(Ke.a,null,It):null,"BOA"==u?r.a.createElement(Ke.a,null,Tt):null,"DE"==u?r.a.createElement(Ke.a,null,Rt):null,"DIST"==u?r.a.createElement(Ke.a,null,Ft):null,r.a.createElement(Je.a,null),r.a.createElement(Ke.a,null,Pt)),r.a.createElement("main",{className:Object(Ve.a)(n.content,Object(E.a)({},n.contentShift,o))},r.a.createElement("div",{className:n.drawerHeader})))}var At=a(492),Lt=a(510),Mt=a(442),_t=a(502),zt=a(122),Ut=a(78),Wt=a.n(Ut),Ht=a(36),Zt=a(500);function qt(e){var t="",a=new Date;a.setHours(0,0,0,0);var n=new Date;n.setHours(23,59,59,59);var l=r.a.useState(a),i=Object(qe.a)(l,2),s=i[0],o=i[1],c=r.a.useState(n),m=Object(qe.a)(c,2),u=m[0],d=m[1],p=e.callbackFromParent&&e.callbackFromParent.showSingleDate,g=e.callbackFromParent&&e.callbackFromParent.d1DateRangeFlag;s||(s=(new Date).getTime());var h=new Date(s);h.setMonth(h.getMonth()+6);t=h.setDate(h.getDate()-1);var y=new Date,E=y.setMonth(y.getMonth()-18);s<E&&(s=E),s>u&&(u=(new Date).getTime());var f=new Date;return p&&(t=f.setDate(f.getDate()-1)),g&&(t=f.setDate(f.getDate()-1)),p&&s.getDate()==(new Date).getDate()&&(s=f),g&&s.getDate()==(new Date).getDate()&&(s=f),g&&u.getDate()==(new Date).getDate()&&(u=f),Wt()(".MuiInputBase-inputAdornedEnd").prop("readonly",!0),r.a.createElement(Ht.a,{utils:zt.a},r.a.createElement(Oe.a,{container:!0,justify:"space-around"},r.a.createElement(Zt.a,{disabled:e.callbackFromParent&&e.callbackFromParent.generateReportLoader,margin:"normal",disableFuture:"true",allowKeyboardControl:"true",minDate:E,minDateMessage:"Only 18 months back report can be fatch.",maxDate:t,maxDateMessage:"Current date report won't be available",id:"date-picker-dialog",label:p?"Select Verification Date":"Start Date",format:"dd/MM/yyyy",value:s||t,onChange:function(t){o(t),e.callbackFromParent.myCallback(t,"START_DATE")},KeyboardButtonProps:{"aria-label":"change date"}}),p?"":r.a.createElement(Zt.a,{disableFuture:"true",disabled:e.callbackFromParent&&e.callbackFromParent.generateReportLoader,maxDateMessage:"Max allowed date range is 6 months.",minDate:s,maxDate:t,margin:"normal",id:"date-picker-dialog",label:"End Date",format:"dd/MM/yyyy",value:u||t,onChange:function(t){d(t),e.callbackFromParent.myCallback(t,"END_DATE")},KeyboardButtonProps:{"aria-label":"change date"}})))}var Vt=a(95),Yt=a(121),Gt={PaperProps:{style:{maxHeight:224,width:250}}},Kt=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).zoneChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value)),e.target.value.includes("Select All")&&(a.setState({selectedZone:a.state.listofzones}),a.setState({selectAllzone:"Remove All"})),e.target.value.includes("Remove All")&&(a.setState({selectedZone:[]}),a.setState({selectAllzone:"Select All"}))},a.onChange=function(e){var t;a.setState((t={},Object(E.a)(t,e.target.name,e.target.value),Object(E.a)(t,"retrieveTypeAll",!1),Object(E.a)(t,"retrieveType","BY_SUBMIT_DATE"),Object(E.a)(t,"startDate",""),Object(E.a)(t,"endDate",""),t)),"zoneWiseDetailedReport"==e.target.value?a.setState({showZoneSelection:!0}):a.setState({showZoneSelection:!1}),"disconnectionReport"==e.target.value||"reconnectionReport"==e.target.value||"dailyActiveRetailers"==e.target.value?a.setState({showSingleDate:!0,retrieveType:""}):a.setState({showSingleDate:!1}),"simSwapCount"==e.target.value||"mpinResetCount"==e.target.value||"reloadAndBillPayCount"==e.target.value||"idleRetailers"==e.target.value||"acquisitionCountReport"==e.target.value?a.setState({d1DateRangeFlag:!0,retrieveType:""}):a.setState({d1DateRangeFlag:!1}),"agentStatusReport"==e.target.value&&a.setState({retrieveTypeAll:!0}),"agentWisePerformanceLog"==e.target.value||"agentAuditReport"==e.target.value||"ipacsReadyReport"==e.target.value?a.setState({retrieveTypeDataEntry:!0}):a.setState({retrieveTypeDataEntry:!1}),a.setState({responseFlag:!1,dataEntryData:!1,generateReportLoader:!1,responseFlagMsg:"",resetCalander:!0})},a.onChangeRetriveBy=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value)),a.setState({responseFlag:!1,dataEntryData:!1,generateReportLoader:!1,responseFlagMsg:""})},a.myCallback=function(e,t){if("START_DATE"===t){console.log("date",e),a.setState({startDate:new Date(e).getTime(),generateReportLoader:!1,responseFlag:!1,responseFlagMsg:"",dataEntryData:""});var n=new Date(e);n.setMonth(n.getMonth()+6),n.setHours(23,59,59,59),n.setDate(n.getDate()-1);var r=a.state.endDate;a.state.endDate||(r=new Date).setHours(23,59,59,59),console.log("start: "+e+" | start+6month "+n,"  | end date: "+new Date(r),r>n.getTime()),r>n.getTime()?a.setState({disabledGenButton:!0}):a.setState({disabledGenButton:!1})}else"END_DATE"===t&&(a.setState({endDate:new Date(e).getTime(),generateReportLoader:!1,responseFlag:!1,responseFlagMsg:"",dataEntryData:""}),a.setState({disabledGenButton:!1}))},a.state={products:"",reporttype:"",startDate:"",endDate:"",month:"",year:"",days:"",day:"",numofDays:[],listofYear:[],responseFlag:!1,responseFlagMsg:"",listofzones:[],selectedZone:[],zone:"",selectAllzone:"Select All",reportName:"Download Report",generateReportLoader:!1,generateReportMsg:"",roleCode:"",retrieveType:"BY_SUBMIT_DATE",showSingleDate:!1,retrieveTypeAll:!1,resetCalander:!1,filenameToGo:"",retrieveTypeDataEntry:!1,d1DateRangeFlag:!1},a.getReportDetails=a.getReportDetails.bind(Object(D.a)(a)),a.convertBool=a.convertBool.bind(Object(D.a)(a)),a.onChange=a.onChange.bind(Object(D.a)(a)),a.onChangeRetriveBy=a.onChangeRetriveBy.bind(Object(D.a)(a)),a.myCallback=a.myCallback.bind(Object(D.a)(a)),a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"dateFormat",value:function(e){return Yt.unix(e/1e3).format("DD/MM/YYYY")}},{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("userDetails");t=t&&JSON.parse(t),this.setState({roleCode:t.roleCode});var a=t&&t.roleCode;"ADMIN"==a&&Ze.getStaticData(a).then(function(t){var a=De(t);e.setState({listofzones:a.result&&a.result.zones})});for(var n=2018;n<=(new Date).getFullYear();n++)this.state.listofYear.push(n);for(n=1;n<=60;n++)this.state.numofDays.push(n)}},{key:"getReportDetails",value:function(){var e,t=this;(this.setState({verficationname:"",filenameToGo:this.state.reporttype}),this.state.startDate)?((e=new Date(this.state.startDate)).setHours(0,0,0,0),this.setState({startDate:e.getTime()})):((e=new Date).setHours(0,0,0,0),"disconnectionReport"!=this.state.reporttype&&"reconnectionReport"!=this.state.reporttype&&"dailyActiveRetailers"!=this.state.reporttype&&"simSwapCount"!=this.state.reporttype&&"mpinResetCount"!=this.state.reporttype&&"reloadAndBillPayCount"!=this.state.reporttype&&"idleRetailers"!=this.state.reporttype&&"acquisitionCountReport"!=this.state.reporttype||e.setDate(e.getDate()-1),this.state.startDate=e.getTime(),this.setState({startDate:e.getTime()},function(){console.log("startDate : setting",t.state.startDate)}));this.state.endDate?((n=new Date(this.state.endDate)).setHours(23,59,59,59),this.state.endDate=n.getTime()):((n=new Date).setHours(23,59,59,59),"simSwapCount"!=this.state.reporttype&&"mpinResetCount"!=this.state.reporttype&&"reloadAndBillPayCount"!=this.state.reporttype&&"idleRetailers"!=this.state.reporttype&&"acquisitionCountReport"!=this.state.reporttype||n.setDate(n.getDate()-1),this.state.endDate=n.getTime(),this.setState({endDate:n.getTime()},function(){console.log("endDate : setting",t.state.endDate)}));if(this.state.reporttype){if(console.log("year",this.state.year,"month",this.state.month),"monthlyActiveRetailers"==this.state.reporttype){var a=new Date("1 "+this.state.month+" "+this.state.year);a.setHours(0,0,0,0);var n,r=new Date(a.getDate()+" "+this.state.month+" "+this.state.year);(n=new Date(a.getFullYear(),a.getMonth()+1,0)).setHours(23,59,59,59),this.state.startDate=r.getTime(),this.setState({startDate:r.getTime()},function(){}),this.state.endDate=n.getTime(),this.setState({endDate:n.getTime()},function(){})}var l={retrieveType:this.state.retrieveType,startDate:this.state.startDate,endDate:this.state.endDate,zones:this.state.selectedZone.length?this.state.selectedZone:null};console.log("param data",l),"reloadAndBillPayCount"!=this.state.reporttype&&"simSwapCount"!=this.state.reporttype&&"mpinResetCount"!=this.state.reporttype&&"monthlyActiveRetailers"!=this.state.reporttype&&"idleRetailers"!=this.state.reporttype&&"acquisitionCountReport"!=this.state.reporttype||(l={startDate:this.state.startDate,endDate:this.state.endDate}),"disconnectionReport"!=this.state.reporttype&&"reconnectionReport"!=this.state.reporttype&&"dailyActiveRetailers"!=this.state.reporttype||(l={date:this.state.startDate}),"retailerOnboardedReport"==this.state.reporttype&&(l={range:this.state.day||0}),this.setState({responseFlag:!1,responseFlagMsg:"",dataEntryData:!1,reportName:"Download Report",generateReportLoader:!0,generateReportMsg:"Generating report please wait..."}),Ue.sentReportToEmail(l,this.state.reporttype).then(function(e){var a=De(e);"agentStatusReport"==t.state.reporttype&&a.result?(a.result&&a.result.verifications&&t.setState({products:a.result.verifications,responseFlag:!0,reportName:"Verification Report"}),a.result&&a.result.dataEntry&&t.setState({dataEntryData:a.result.dataEntry}),t.setState({generateReportMsg:"Ready to Download",verficationname:"VerificationReport_of_"}),t.setState({generateReportLoader:!1})):a.result&&a.result.data&&a.result.data.length?(t.setState({generateReportMsg:"Ready to Download"}),t.setState({products:a.result.data,responseFlag:!0}),"detailedPendingReport"==t.state.reporttype&&t.setState({filenameToGo:"distributorDetailReport"}),t.setState({generateReportLoader:!1})):(t.setState({generateReportMsg:"",generateReportLoader:!1}),t.setState({responseFlagMsg:"No Records Found"}))})}else Se.showError("First select report type")}},{key:"convertBool",value:function(e){return e?"Yes":"No"}},{key:"render",value:function(){var e,t,a,n,l,i={myCallback:this.myCallback,startDate:"",endDate:"",showSingleDate:this.state.showSingleDate,resetCalander:this.state.resetCalander,generateReportLoader:this.state.generateReportLoader,d1DateRangeFlag:this.state.d1DateRangeFlag},s=[];s.push(r.a.createElement(_t.a,{value:"agentStatusReport"},"Agent Status Report")),s.push(r.a.createElement(_t.a,{value:"backOfficeReceptionReport"},"Back Office Reception Report")),s.push(r.a.createElement(_t.a,{value:"backOfficeReceptionReportWithDetails"},"Back Office Reception Report with Details")),s.push(r.a.createElement(_t.a,{value:"agentWisePerformanceLog"},"Agent Wise Performance Report")),s.push(r.a.createElement(_t.a,{value:"agentAuditReport"},"Agent Audit Report")),s.push(r.a.createElement(_t.a,{value:"ipacsReadyReport"},"IPACS Ready Report")),s.push(r.a.createElement(_t.a,{value:"noneComplainceReport"},"None Compliance Report")),s.push(r.a.createElement(_t.a,{value:"omniTransferReport"},"OMNI Transfer Report")),s.push(r.a.createElement(_t.a,{value:"zoneWiseDetailedReport"},"Zone Wise Detailed Report ")),s.push(r.a.createElement(_t.a,{value:"simSwapReport"},"SIM Swap Report")),s.push(r.a.createElement(_t.a,{value:"disconnectionReport"},"D-1 Disconnect Report")),s.push(r.a.createElement(_t.a,{value:"reconnectionReport"},"D-1 Re-connection Report")),s.push(r.a.createElement(_t.a,{value:"simSwapCount"},"D-1 Sim Swap Count Report")),s.push(r.a.createElement(_t.a,{value:"mpinResetCount"},"D-1 Mpin Reset Count Report")),s.push(r.a.createElement(_t.a,{value:"reloadAndBillPayCount"},"D-1 Reload & Bill Pay Count Report")),s.push(r.a.createElement(_t.a,{value:"idleRetailers"},"D-1 Idle Retailers Report")),s.push(r.a.createElement(_t.a,{value:"monthlyActiveRetailers"},"D-1 Monthly Active Retailers Report")),s.push(r.a.createElement(_t.a,{value:"dailyActiveRetailers"},"D-1 Daily Active Retailers Report")),s.push(r.a.createElement(_t.a,{value:"acquisitionCountReport"},"D-1 SUK vs CYN Count Report")),s.push(r.a.createElement(_t.a,{value:"retailerOnboardedReport"},"D-1 Retailer Onboarded Report"));var o=[];o.push(r.a.createElement(_t.a,{key:"BY_VERIFICATION_DATE",value:"BY_VERIFICATION_DATE"},"By Verification Date")),o.push(r.a.createElement(_t.a,{key:"BY_DATA_ENTRY_DATE",value:"BY_DATA_ENTRY_DATE"},"By Data Entry Date"));var c=this.state.retrieveType?this.state.retrieveType.toLowerCase()+"_":"",m=this.state.verficationname+this.state.filenameToGo+"_"+c+this.dateFormat(this.state.startDate)+"_to_"+this.dateFormat(this.state.endDate)+".csv";return"disconnectionReport"!=this.state.reporttype&&"reconnectionReport"!=this.state.reporttype||(m=this.state.reporttype+"_by_verification_date_"+this.dateFormat(this.state.startDate)+".csv"),"dailyActiveRetailers"==this.state.reporttype&&(m=this.state.reporttype+"_report_of_"+this.dateFormat(this.state.startDate)+".csv"),"retailerOnboardedReport"==this.state.reporttype&&(m=this.state.reporttype+"_report_for_"+this.state.day+"_days.csv"),r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement("div",{style:{padding:"20px"}},r.a.createElement("br",null),r.a.createElement(Mt.a,{style:{padding:"40px"}},r.a.createElement(he.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},"Report Download"),r.a.createElement(Oe.a,(e={syt:!0,container:!0,spacing:2},Object(E.a)(e,"container",!0),Object(E.a)(e,"direction","row"),Object(E.a)(e,"justify","right"),Object(E.a)(e,"alignItems","center"),e),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(At.a,{style:Jt.multiselect},r.a.createElement(we.a,{htmlFor:"Active",required:!0},"Select type of report"),r.a.createElement(Lt.a,{name:"reporttype",disabled:this.state.generateReportLoader,value:this.state.reporttype,onChange:this.onChange},r.a.createElement(_t.a,{value:"distributorLastUploadedData"},"Distributor Uploaded Data Status"),r.a.createElement(_t.a,{value:"detailedPendingReport"},"Distributor Detail Report"),r.a.createElement(_t.a,{value:"rejectReport"}," Distributor Reject Data Report"),r.a.createElement(_t.a,{value:"summaryReportForDistributor"},"Distributor Summary Report"),r.a.createElement(_t.a,{value:"ftaDeviationReport"},"FTA Deviation Report"),"ADMIN"===this.state.roleCode?s:""))),"ADMIN"==this.state.roleCode&&this.state.showZoneSelection?r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(At.a,{style:Jt.selectStyle},r.a.createElement(we.a,{id:"demo-mutiple-name-label"},"Select Zone"),r.a.createElement(Lt.a,{disabled:this.state.generateReportLoader,labelId:"demo-mutiple-name-label",id:"demo-mutiple-name",multiple:!0,name:"selectedZone",value:this.state.selectedZone,onChange:this.zoneChange,input:r.a.createElement(He.a,null),MenuProps:Gt},r.a.createElement(_t.a,{key:this.state.selectAllzone,value:this.state.selectAllzone},r.a.createElement("b",null," ",this.state.selectAllzone,"   ")),this.state.listofzones?this.state.listofzones.map(function(e){return r.a.createElement(_t.a,{key:e,value:e},e)}):""))):"","disconnectionReport"!=this.state.reporttype&&"reconnectionReport"!=this.state.reporttype&&"simSwapCount"!=this.state.reporttype&&"mpinResetCount"!=this.state.reporttype&&"reloadAndBillPayCount"!=this.state.reporttype&&"idleRetailers"!=this.state.reporttype&&"monthlyActiveRetailers"!=this.state.reporttype&&"dailyActiveRetailers"!=this.state.reporttype&&"acquisitionCountReport"!=this.state.reporttype&&"retailerOnboardedReport"!=this.state.reporttype?r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(At.a,{style:Jt.selectStyle},r.a.createElement(we.a,{id:"demo-mutiple-name-label"},"Retrieve Type"),r.a.createElement(Lt.a,{disabled:this.state.generateReportLoader,name:"retrieveType",value:this.state.retrieveType,onChange:this.onChangeRetriveBy},"simSwapReport"!=this.state.reporttype?r.a.createElement(_t.a,{key:"BY_FTA_DATE",value:"BY_FTA_DATE"},"By FTA Date"):"",r.a.createElement(_t.a,{key:"BY_SUBMIT_DATE",value:"BY_SUBMIT_DATE"},"By Submit Date"),this.state.retrieveTypeDataEntry?r.a.createElement(_t.a,{key:"BY_DATA_ENTRY_DATE",value:"BY_DATA_ENTRY_DATE"},"By Data Entry Date"):"",this.state.retrieveTypeAll?o:""))):"","retailerOnboardedReport"==this.state.reporttype?r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(At.a,{style:Jt.selectStyle},r.a.createElement(we.a,{id:"demo-mutiple-name-label"},"Select No. of Days"),r.a.createElement(Lt.a,{disabled:this.state.generateReportLoader,labelId:"demo-mutiple-name-label",id:"demo-mutiple-name",name:"day",value:this.state.day,onChange:this.onChange,input:r.a.createElement(He.a,null),MenuProps:Gt},this.state.numofDays?this.state.numofDays.map(function(e){return r.a.createElement(_t.a,{key:e,value:e},e)}):""))):"","monthlyActiveRetailers"!=this.state.reporttype&&"retailerOnboardedReport"!=this.state.reporttype?r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(qt,{callbackFromParent:i})):"","monthlyActiveRetailers"==this.state.reporttype?r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(At.a,{style:Jt.selectStyle},r.a.createElement(we.a,{id:"demo-mutiple-name-label"},"Select Year"),r.a.createElement(Lt.a,{disabled:this.state.generateReportLoader,labelId:"demo-mutiple-name-label",id:"demo-mutiple-name",name:"year",value:this.state.year,onChange:this.onChange,input:r.a.createElement(He.a,null),MenuProps:Gt},this.state.listofYear?this.state.listofYear.map(function(e){return r.a.createElement(_t.a,{key:e,value:e},e)}):""))):"","monthlyActiveRetailers"==this.state.reporttype?r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(At.a,{style:Jt.selectStyle},r.a.createElement(we.a,{id:"demo-mutiple-name-label"},"Select Month"),r.a.createElement(Lt.a,{disabled:this.state.generateReportLoader,labelId:"demo-mutiple-name-label",id:"demo-mutiple-name",name:"month",value:this.state.month,onChange:this.onChange,input:r.a.createElement(He.a,null),MenuProps:Gt},r.a.createElement(_t.a,{key:"1",value:"jan"},"January"),r.a.createElement(_t.a,{key:"2",value:"feb"},"February"),r.a.createElement(_t.a,{key:"3",value:"mar"},"March"),r.a.createElement(_t.a,{key:"4",value:"apr"},"April"),r.a.createElement(_t.a,{key:"5",value:"may"},"May"),r.a.createElement(_t.a,{key:"6",value:"jun"},"June "),r.a.createElement(_t.a,{key:"7",value:"jul"},"July"),r.a.createElement(_t.a,{key:"8",value:"aug"},"August"),r.a.createElement(_t.a,{key:"9",value:"sept"},"September"),r.a.createElement(_t.a,{key:"10",value:"oct"},"October"),r.a.createElement(_t.a,{key:"11",value:"nov"},"November"),r.a.createElement(_t.a,{key:"12",value:"dec"},"December")))):""),r.a.createElement("br",null),r.a.createElement(Oe.a,(n={syt:!0,container:!0,spacing:2},Object(E.a)(n,"container",!0),Object(E.a)(n,"direction","row"),Object(E.a)(n,"justify","right"),Object(E.a)(n,"alignItems",""),n),r.a.createElement(Oe.a,(t={item:!0,xs:12,sm:3},Object(E.a)(t,"item",!0),Object(E.a)(t,"alignItems","flex-end"),t),this.state.generateReportLoader?"":r.a.createElement(ke.a,{disabled:this.state.disabledGenButton,variant:"contained",color:"Primary",style:{marginLeft:"20px"},onClick:this.getReportDetails},"Generate Report"),this.state.generateReportLoader?r.a.createElement(he.a,{component:"h5",color:"primary",gutterBottom:!0},this.state.generateReportMsg):""),r.a.createElement(Oe.a,(a={item:!0,xs:12,sm:9},Object(E.a)(a,"item",!0),Object(E.a)(a,"alignItems","flex-end"),a),this.state.responseFlag?r.a.createElement(Vt.CSVLink,{data:this.state.products,filename:m,className:"btn btn-primary",target:"_blank"},r.a.createElement(he.a,{component:"h2",variant:"h6",style:{color:"green"},gutterBottom:!0},this.state.reportName)):"",this.state.dataEntryData?r.a.createElement(Vt.CSVLink,{data:this.state.dataEntryData,filename:"DataEntryReport_of_"+this.state.reporttype+"_"+this.state.retrieveType.toLowerCase()+"_"+this.dateFormat(this.state.startDate)+"_to_"+this.dateFormat(this.state.endDate)+".csv",className:"btn btn-primary",target:"_blank"},r.a.createElement(he.a,{component:"h2",variant:"h6",style:{color:"green"},gutterBottom:!0},"Data Entry Report")):"",r.a.createElement(he.a,{component:"h5",color:"error",gutterBottom:!0},this.state.responseFlagMsg))),r.a.createElement(Oe.a,(l={syt:!0,container:!0,spacing:2},Object(E.a)(l,"container",!0),Object(E.a)(l,"direction","row"),Object(E.a)(l,"justify","right"),Object(E.a)(l,"alignItems","center"),l),r.a.createElement(Oe.a,Object(E.a)({item:!0,xs:12,sm:4},"item",!0)),r.a.createElement(Oe.a,Object(E.a)({item:!0,xs:12,sm:4},"item",!0),r.a.createElement("br",null)),r.a.createElement(Oe.a,Object(E.a)({item:!0,xs:12,sm:4},"item",!0),this.state.responseFlag?r.a.createElement(We.a,{data:this.state.products}):"")))))}}]),t}(r.a.Component),Jt={tableStyle:{display:"flex",justifyContent:"left"},multiselect:{minWidth:"100%",marginBottom:"0px"},dateSelect:{minWidth:"100%",marginBottom:"0px"},selectStyle:{marginBottom:"0px",minWidth:"100%",maxWidth:"100%"}},$t=Kt,Xt={PaperProps:{style:{maxHeight:224,width:250}}},Qt=(r.a.Component,{tableStyle:{display:"flex",justifyContent:"left"},multiselect:{minWidth:"100%",marginBottom:"0px"},dateSelect:{minWidth:"100%",marginBottom:"0px"},selectStyle:{marginBottom:"0px",minWidth:"100%",maxWidth:"100%"}}),ea=a(520);function ta(e){console.log("startDatestartDate,",e);var t=new Date;t.setHours(0,0,0,0);var a=r.a.useState(t),n=Object(qe.a)(a,2),l=n[0],i=n[1],s=r.a.useState(t),o=Object(qe.a)(s,2),c=o[0],m=o[1],u=function(t){i(t),e.callbackFromParent.myCallback(t,"START_DATE");var a=new Date(t).getTime();document.getElementById("startDateMili").value=a,a>document.getElementById("endDateMili").value&&Se.showError("Start date time can't be grater than end date.")},d=function(t){m(t),e.callbackFromParent.myCallback(t,"END_DATE");var a=new Date(t).getTime();document.getElementById("endDateMili").value=a,a<document.getElementById("startDateMili").value&&Se.showError("End Date time can't be less than start date.")};document.getElementById("startDateMili")&&document.getElementById("startDateMili").value;e.callbackFromParent&&e.callbackFromParent.startDate&&(l=new Date(e.callbackFromParent.startDate).getTime());document.getElementById("endDateMili")&&document.getElementById("endDateMili").value;return e.callbackFromParent&&e.callbackFromParent.endDate&&(c=new Date(e.callbackFromParent.endDate).getTime()),console.log("propes",e),r.a.createElement(Ht.a,{utils:zt.a},r.a.createElement(Oe.a,{container:!0,justify:"space-around"},r.a.createElement(Zt.a,{disablePast:"true",margin:"normal",required:!0,id:"date-picker-dialog",label:e.callbackFromParent.firstLavel,format:"dd-MM-yyyy",value:l,onChange:u,KeyboardButtonProps:{"aria-label":"change date"}}),r.a.createElement(ea.a,{margin:"normal",id:"time-picker",label:"Start Time",value:l,onChange:u,KeyboardButtonProps:{"aria-label":"change time"}}),r.a.createElement(Zt.a,{disablePast:"true",margin:"normal",required:!0,id:"date-picker-dialog",label:e.callbackFromParent.secondLavel,format:"dd-MM-yyyy",value:c,onChange:d,KeyboardButtonProps:{"aria-label":"change date"}}),r.a.createElement(ea.a,{margin:"normal",id:"time-picker",label:"End Time",value:c,onChange:d,KeyboardButtonProps:{"aria-label":"change time"}})))}var aa,na,ra=a(46),la=a.n(ra),ia={PaperProps:{style:{maxHeight:224,width:250}}},sa=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).myCallback=function(e,t){"START_DATE"===t?a.setState({publishDate:new Date(e).getTime()}):"END_DATE"===t&&a.setState({expireDate:new Date(e).getTime()})},a.zoneChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value)),e.target.value.includes("Select All")&&(a.setState({selectedZone:a.state.listofzones}),a.setState({selectAllzone:"Remove All"})),e.target.value.includes("Remove All")&&(a.setState({selectedZone:[]}),a.setState({selectAllzone:"Select All"}))},a.savePack=function(e){if(e.preventDefault(),a.state.title&&a.state.bannerType&&a.state.order&&a.state.active){var t=document.getElementById("startDateMili").value,n=document.getElementById("endDateMili").value;if(t>n)Se.showError("Start date time can't be grater than end date.");else if(n<t)Se.showError("End Date time can't be less than start date.");else if(a.state.file){var r=localStorage.getItem("userDetails");r=r&&JSON.parse(r);var l=new FormData;l.append("file",a.state.file),l.append("title",a.state.title),l.append("order",parseInt(a.state.order)),l.append("active","active"===a.state.active),l.append("bannerType",a.state.bannerType),l.append("link",a.state.link),a.state.selectedZone&&a.state.selectedZone.length&&l.append("zones",a.state.selectedZone),a.state.publishDate||(a.state.publishDate=(new Date).getTime()),a.state.expireDate||(a.state.expireDate=(new Date).getTime()),l.append("publishDate",a.state.publishDate),l.append("expireDate",a.state.expireDate),l.append("categoryType",a.state.categoryType),Ue.addBanner(l).then(function(e){var t=De(e);console.log("Banner Response:",t),a.props.history.push("/banners")})}else Se.showError("Missing required image upload")}else Se.showError("Missing required fields")},a.cancel=function(e){a.props.history.push("/banners")},a.handleChange=function(e){return function(t){a.setState(Object(m.a)({},a.state,Object(E.a)({},e,t.target.checked)))}},a.validateUploadFile=function(e){var t=e.name.toString();if(/[^a-zA-Z0-9\.\-\_ ]/.test(t))return Se.showError("File name can contain only alphanumeric characters including space and dots"),!1;if("image/png"==e.type||"image/jpeg"==e.type){var a=e.size/1e3;if(a>=100&&a<=2048){var n=t.split(".").pop();return Object.defineProperty(e,"name",{writable:!0,value:la()(e.name)+"."+n}),e}Se.showError("File size should be grater than 100KB and less than 2MB")}else Se.showError("Only png and jpeg file allowd.");return!1},a.onChangeFileUpload=function(e){var t,n;a.validateUploadFile(e.target.files[0])?a.setState((t={},Object(E.a)(t,e.target.name,e.target.files[0]),Object(E.a)(t,"showFileSize",e.target.files[0].size/1e3+"KB"),Object(E.a)(t,"imageURL",URL.createObjectURL(e.target.files[0])),t)):(a.setState((n={},Object(E.a)(n,e.target.name,null),Object(E.a)(n,"showFileSize",""),Object(E.a)(n,"imageURL",""),n)),e.target.value=null)},a.onChangeHandler=function(e){var t=new FormData;t.append("file",e.target.files[0]);x.a.post(q,t,{headers:{"content-type":"multipart/form-data"}}).then(function(e){a.setState({imageURL:e.data.result})}).catch(function(e){console.log(e,"ERROR")})},a.onChange=function(e){return a.setState(Object(E.a)({},e.target.name,e.target.value))},a.state={title:"",order:"",active:"",bannerType:"",section:"",categoryType:"",category:"",forAndroid:"",forIos:"",forWindows:"",validityDays:"",updateTime:"",publishDate:"",expireDate:"",updateBy:"",imageURL:"",file:null,link:"",listofzones:[],selectedZone:[],zone:"",showFileSize:"",selectAllzone:"Select All"},a.savePack=a.savePack.bind(Object(D.a)(a)),a.onChange=a.onChange.bind(Object(D.a)(a)),a.myCallback=a.myCallback.bind(Object(D.a)(a)),a.zoneChange=a.zoneChange.bind(Object(D.a)(a)),a.validateUploadFile=a.validateUploadFile.bind(Object(D.a)(a)),a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.setItem("lastUrl","add-banner"),Ze.getStaticData("ADMIN").then(function(t){var a=De(t);e.setState({listofzones:a.result&&a.result.zones})})}},{key:"render",value:function(){var e,t,a,n={myCallback:this.myCallback,startDate:"",endDate:"",firstLavel:"Publish Date",secondLavel:"End Date"};return console.log(this.state,"STATE_MATTERS"),r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement(Ne.a,{maxWidth:"sm"},r.a.createElement("br",null),r.a.createElement(Mt.a,{style:{padding:"10px"}},r.a.createElement(he.a,{variant:"h5",style:oa.textStyle}," Banner Details"),r.a.createElement("form",{style:oa.formContainer},r.a.createElement(Ie.a,{label:"Banner Title",required:!0,value:this.state.title,fullWidth:!0,name:"title",onChange:this.onChange}),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:oa.multiselect},r.a.createElement(we.a,{htmlFor:"Connection Type",required:!0},"Type of Banner"),r.a.createElement(Lt.a,{name:"bannerType",value:this.state.bannerType,onChange:this.onChange},r.a.createElement(_t.a,{value:"prepaid"},"Prepaid"),r.a.createElement(_t.a,{value:"postpaid"},"Postpaid")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:oa.multiselect},r.a.createElement(we.a,{required:!0},"Order"),r.a.createElement(Lt.a,{name:"order",value:this.state.order,onChange:this.onChange},r.a.createElement(_t.a,{value:"1"},"1"),r.a.createElement(_t.a,{value:"2"},"2"),r.a.createElement(_t.a,{value:"3"},"3"),r.a.createElement(_t.a,{value:"4"},"4"),r.a.createElement(_t.a,{value:"5"},"5"),r.a.createElement(_t.a,{value:"6"},"6"),r.a.createElement(_t.a,{value:"7"},"7"),r.a.createElement(_t.a,{value:"8"},"8"),r.a.createElement(_t.a,{value:"9"},"9"),r.a.createElement(_t.a,{value:"10"},"10"),r.a.createElement(_t.a,{value:"11"},"11"),r.a.createElement(_t.a,{value:"12"},"12"),r.a.createElement(_t.a,{value:"13"},"13"),r.a.createElement(_t.a,{value:"14"},"14"),r.a.createElement(_t.a,{value:"15"},"15")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:oa.multiselect},r.a.createElement(we.a,{htmlFor:"Connection Type",required:!0},"Category Type"),r.a.createElement(Lt.a,{name:"categoryType",value:this.state.categoryType,onChange:this.onChange},r.a.createElement(_t.a,{value:"Recharge"},"Recharge"),r.a.createElement(_t.a,{value:"Other"}," Other ")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:oa.multiselect},r.a.createElement(we.a,{htmlFor:"Active",required:!0},"Status"),r.a.createElement(Lt.a,{name:"active",value:this.state.active,onChange:this.onChange},r.a.createElement(_t.a,{value:"active"},"Active"),r.a.createElement(_t.a,{value:"in_active"},"In Active")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Banner Link",name:"link",value:this.state.link,fullWidth:!0,onChange:this.onChange})),r.a.createElement(Oe.a,{item:!0,xs:10,sm:6},r.a.createElement(At.a,{style:oa.selectStyle},r.a.createElement(we.a,{id:"demo-mutiple-name-label"},"Select Zone"),r.a.createElement(Lt.a,{labelId:"demo-mutiple-name-label",id:"demo-mutiple-name",multiple:!0,name:"selectedZone",value:this.state.selectedZone,onChange:this.zoneChange,input:r.a.createElement(He.a,null),MenuProps:ia},r.a.createElement(_t.a,{key:this.state.selectAllzone,value:this.state.selectAllzone},r.a.createElement("b",null," ",this.state.selectAllzone,"   ")),this.state.listofzones?this.state.listofzones.map(function(e){return r.a.createElement(_t.a,{key:e,value:e},e)}):""))),r.a.createElement(ta,{callbackFromParent:n}),r.a.createElement("input",{type:"hidden",id:"startDateMili"}),r.a.createElement("input",{type:"hidden",id:"endDateMili"}),r.a.createElement(Oe.a,(e={container:!0,spacing:1},Object(E.a)(e,"container",!0),Object(E.a)(e,"direction","row"),Object(E.a)(e,"justify","flex-end"),e),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(At.a,{style:oa.multiselect},r.a.createElement(we.a,{htmlFor:"display-type",required:!0},"Upload Banner"))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:9},r.a.createElement(At.a,{style:oa.multiselect},r.a.createElement("input",{style:{marginTop:"31px",marginLeft:"18px"},type:"file",name:"file",id:"bannerImage",onChange:this.onChangeFileUpload})))),r.a.createElement(Oe.a,(t={container:!0,spacing:24},Object(E.a)(t,"container",!0),Object(E.a)(t,"direction","row"),Object(E.a)(t,"justify","center"),t),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},"Selected File Size: ",this.state.showFileSize,r.a.createElement("br",null)),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement("img",{title:"Preview Banner",style:{width:"200px",height:"100px"},src:this.state.imageURL}))),r.a.createElement(Oe.a,(a={container:!0,spacing:24},Object(E.a)(a,"container",!0),Object(E.a)(a,"direction","row"),Object(E.a)(a,"justify","center"),a),r.a.createElement(ke.a,{variant:"contained",color:"primary",onClick:this.savePack},"Save"),r.a.createElement(ke.a,{variant:"contained",color:"secondary",style:{marginLeft:"150px"},onClick:this.cancel},"Cancel"))))))}}]),t}(r.a.Component),oa=(aa={formContainer:{display:"flex",flexFlow:"row wrap"},textStyle:{display:"flex",justifyContent:"center"},input:{display:"none"}},Object(E.a)(aa,"textStyle",{display:"flex",justifyContent:"center"}),Object(E.a)(aa,"multiselect",{minWidth:"100%",marginBottom:"10px"}),Object(E.a)(aa,"chips",{display:"flex",flexWrap:"wrap"}),Object(E.a)(aa,"chip",{margin:3}),Object(E.a)(aa,"selectStyle",{marginBottom:"0px",minWidth:255,maxWidth:255}),aa),ca=sa,ma=a(54),ua=a.n(ma),da=a(82),pa={PaperProps:{style:{maxHeight:224,width:250}}},ga=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).zoneChange=function(e){e.target.value&&a.setState(Object(E.a)({},e.target.name,e.target.value))},a.myCallback=function(e,t){"START_DATE"===t?a.setState({publishDate:new Date(e).getTime()}):"END_DATE"===t&&a.setState({expireDate:new Date(e).getTime()})},a.getInitialData=Object(da.a)(ua.a.mark(function e(){var t;return ua.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=localStorage.getItem("selectedBannerId"),a.setState({loading:!0}),Ue.getOneBanner(t).then(function(e){De(e);var t=De(e);if(200==t.status&&"ok"==t.message){var n=t.result;a.setState({title:n.title,order:n.order,active:n.active?"active":"in_active",bannerType:n.bannerType,section:n.section,categoryType:n.categoryType,category:n.category,forAndroid:n.forAndroid,forIos:n.forIos,forWindows:n.forWindows,publishDate:n.publishDate,expireDate:n.expireDate,updateTime:n.updateTime,imageURL:n.imageURL,bannerId:n.id,link:n.link,selectedZone:n.zones?n.zones.split(","):[]})}}),Ze.getStaticData("ADMIN").then(function(e){var t=De(e);a.setState({listofzones:t.result&&t.result.zones})});case 4:case"end":return e.stop()}},e)})),a.savePack=function(e){if(e.preventDefault(),a.state.title&&a.state.bannerType&&a.state.order&&a.state.active){var t=localStorage.getItem("userDetails");t=t&&JSON.parse(t);var n=new FormData;a.state.file&&n.append("file",a.state.file),n.append("title",a.state.title),n.append("order",parseInt(a.state.order)),n.append("active","active"===a.state.active),n.append("bannerType",a.state.bannerType),n.append("publishDate",a.state.publishDate),n.append("expireDate",a.state.expireDate),n.append("link",a.state.link),a.state.selectedZone&&a.state.selectedZone.length&&n.append("zones",a.state.selectedZone),n.append("categoryType",a.state.categoryType),n.append("category",a.state.category),n.append("bannerId",a.state.bannerId),Ue.updateBanner(n).then(function(e){var t=De(e);200==t.status&&"Success"==t.message?Se.showSuccess("Banner saved successfully."):Se.showError(t),a.props.history.push("/banners")})}else Se.showError("Missing required fields")},a.cancel=function(e){a.props.history.push("/banners")},a.handleChange=function(e){return function(t){a.setState(Object(m.a)({},a.state,Object(E.a)({},e,t.target.checked)))}},a.validateUploadFile=function(e){var t=e.name.toString();if(/[^a-zA-Z0-9\.\-\_ ]/.test(t))return Se.showError("File name can contain only alphanumeric characters including space and dots"),!1;if("image/png"==e.type||"image/jpeg"==e.type){var a=e.size/1e3;if(a>=100&&a<=2048){var n=t.split(".").pop();return Object.defineProperty(e,"name",{writable:!0,value:la()(e.name)+"."+n}),e}Se.showError("File size should be grater than 100KB and less than 2MB")}else Se.showError("Only png and jpeg file allowd.");return!1},a.onChangeFileUpload=function(e){var t,n;a.validateUploadFile(e.target.files[0])?a.setState((t={},Object(E.a)(t,e.target.name,e.target.files[0]),Object(E.a)(t,"showFileSize",e.target.files[0].size/1e3+"KB"),Object(E.a)(t,"imageURL",URL.createObjectURL(e.target.files[0])),t)):(a.setState((n={},Object(E.a)(n,e.target.name,null),Object(E.a)(n,"showFileSize",""),Object(E.a)(n,"imageURL",""),n)),e.target.value=null)},a.onChangeHandler=function(e){var t=new FormData;t.append("file",e.target.files[0]);x.a.post(q,t,{headers:{"content-type":"multipart/form-data"}}).then(function(e){a.setState({imageURL:e.data.result})}).catch(function(e){console.log(e,"ERROR")})},a.onChange=function(e){return a.setState(Object(E.a)({},e.target.name,e.target.value))},a.state={title:"",order:"",active:"",bannerType:"",section:"",categoryType:"",category:"",forAndroid:"",forIos:"",forWindows:"",validityDays:"",updateTime:"",updateBy:"",imageURL:"",file:null,link:"",listofzones:[],selectedZone:[],zone:"",showFileSize:""},a.savePack=a.savePack.bind(Object(D.a)(a)),a.onChange=a.onChange.bind(Object(D.a)(a)),a.myCallback=a.myCallback.bind(Object(D.a)(a)),a.zoneChange=a.zoneChange.bind(Object(D.a)(a)),a.validateUploadFile=a.validateUploadFile.bind(Object(D.a)(a)),a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.getInitialData(),localStorage.setItem("lastUrl","banner-edit")}},{key:"render",value:function(){var e,t,a,n={myCallback:this.myCallback,startDate:this.state.publishDate,endDate:this.state.expireDate,firstLavel:"Publish Date",secondLavel:"End Date"};return console.log(this.state,"STATE_MATTERS"),r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement(Ne.a,{maxWidth:"sm",style:{padding:"10px"}},r.a.createElement(Mt.a,{style:{padding:"10px"}},r.a.createElement(he.a,{variant:"h5",style:ha.textStyle}," Update Banner Details"),r.a.createElement("form",{style:ha.formContainer},r.a.createElement(Ie.a,{label:"Banner Title",required:!0,value:this.state.title,fullWidth:!0,name:"title",onChange:this.onChange}),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:ha.multiselect},r.a.createElement(we.a,{htmlFor:"Connection Type",required:!0},"Type of Baneer"),r.a.createElement(Lt.a,{name:"bannerType",value:this.state.bannerType,onChange:this.onChange},r.a.createElement(_t.a,{value:"prepaid"},"Prepaid"),r.a.createElement(_t.a,{value:"postpaid"},"Postpaid")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:ha.multiselect},r.a.createElement(we.a,{required:!0},"Order"),r.a.createElement(Lt.a,{name:"order",value:this.state.order,onChange:this.onChange},r.a.createElement(_t.a,{value:"1"},"1"),r.a.createElement(_t.a,{value:"2"},"2"),r.a.createElement(_t.a,{value:"3"},"3"),r.a.createElement(_t.a,{value:"4"},"4"),r.a.createElement(_t.a,{value:"5"},"5"),r.a.createElement(_t.a,{value:"6"},"6"),r.a.createElement(_t.a,{value:"7"},"7"),r.a.createElement(_t.a,{value:"8"},"8"),r.a.createElement(_t.a,{value:"9"},"9"),r.a.createElement(_t.a,{value:"10"},"10"),r.a.createElement(_t.a,{value:"11"},"11"),r.a.createElement(_t.a,{value:"12"},"12"),r.a.createElement(_t.a,{value:"13"},"13"),r.a.createElement(_t.a,{value:"14"},"14"),r.a.createElement(_t.a,{value:"15"},"15")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:ha.multiselect},r.a.createElement(we.a,{htmlFor:"Connection Type",required:!0},"Category Type"),r.a.createElement(Lt.a,{name:"categoryType",value:this.state.categoryType,onChange:this.onChange},r.a.createElement(_t.a,{value:"Recharge"},"Recharge"),r.a.createElement(_t.a,{value:"Other"}," Other ")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:ha.multiselect},r.a.createElement(we.a,{htmlFor:"Active",required:!0},"Status"),r.a.createElement(Lt.a,{name:"active",value:this.state.active,onChange:this.onChange},r.a.createElement(_t.a,{value:"active"},"Active"),r.a.createElement(_t.a,{value:"in_active"},"In Active")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Banner Link",name:"link",value:this.state.link,fullWidth:!0,onChange:this.onChange})),r.a.createElement(Oe.a,{item:!0,xs:10,sm:6},r.a.createElement(At.a,{style:ha.selectStyle},r.a.createElement(we.a,{id:"demo-mutiple-name-label"},"Select Zone"),r.a.createElement(Lt.a,{labelId:"demo-mutiple-name-label",id:"demo-mutiple-name",multiple:!0,name:"selectedZone",value:this.state.selectedZone,onChange:this.zoneChange,input:r.a.createElement(He.a,null),MenuProps:pa},this.state.listofzones?this.state.listofzones.map(function(e){return r.a.createElement(_t.a,{key:e,value:e},e)}):""))),r.a.createElement(ta,{callbackFromParent:n}),r.a.createElement(Ie.a,{id:"startDateMili",label:"",type:"hidden",value:n.startDate}),r.a.createElement(Ie.a,{id:"endDateMili",label:"",type:"hidden",value:n.endDate}),r.a.createElement(Oe.a,(e={container:!0,spacing:24},Object(E.a)(e,"container",!0),Object(E.a)(e,"direction","row"),Object(E.a)(e,"justify","flex-end"),e),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:ha.multiselect},r.a.createElement(we.a,{htmlFor:"display-type",required:!0},"Upload Banner"))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:ha.multiselect},r.a.createElement("input",{style:{marginTop:"31px",marginLeft:"18px"},type:"file",name:"file",onChange:this.onChangeFileUpload})))),r.a.createElement(Oe.a,(t={container:!0,spacing:24},Object(E.a)(t,"container",!0),Object(E.a)(t,"direction","row"),Object(E.a)(t,"justify","center"),t),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},"Selected File Size: ",this.state.showFileSize,r.a.createElement("br",null)),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement("img",{title:"Preview Banner",style:{width:"200px",height:"100px"},src:this.state.imageURL}))),r.a.createElement(Oe.a,(a={container:!0,spacing:24},Object(E.a)(a,"container",!0),Object(E.a)(a,"direction","row"),Object(E.a)(a,"justify","center"),a),r.a.createElement(ke.a,{variant:"contained",color:"primary",onClick:this.savePack},"Update"),r.a.createElement(ke.a,{variant:"contained",color:"secondary",style:{marginLeft:"150px"},onClick:this.cancel},"Cancel"))))))}}]),t}(r.a.Component),ha=(na={formContainer:{display:"flex",flexFlow:"row wrap"},textStyle:{display:"flex",justifyContent:"center"},input:{display:"none"}},Object(E.a)(na,"textStyle",{display:"flex",justifyContent:"center"}),Object(E.a)(na,"multiselect",{minWidth:"100%",marginBottom:"10px"}),Object(E.a)(na,"chips",{display:"flex",flexWrap:"wrap"}),Object(E.a)(na,"chip",{margin:3}),Object(E.a)(na,"selectStyle",{marginBottom:"0px",minWidth:270,maxWidth:270}),na),ya=ga,Ea=a(504),fa=a(505),ba=a(506),va=a(507),Sa=a(67),Da=a.n(Sa),Oa=(a(193),{PaperProps:{style:{maxHeight:224,width:250}}}),wa=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).onlockTransectionOnSkip=function(e){var t={transactionsIds:e};Ze.unlockTransectionsSkip(t).then(function(e){var t=De(e);"ok"!=t.message&&Se.showError("Server Error"+t.message)})},a.onChange=function(e){(""===e.target.value||/^[0-9\b]+$/.test(e.target.value)&&e.target.value.length<=10)&&a.setState({searchby:e.target.value})},a.zoneChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.state={products:[],searchedproducts:"",searchby:"",listofzones:[],selectedZone:[],zone:""},a.loadProductList=a.loadProductList.bind(Object(D.a)(a)),a.editProduct=a.editProduct.bind(Object(D.a)(a)),a.convertBool=a.convertBool.bind(Object(D.a)(a)),a.onChange=a.onChange.bind(Object(D.a)(a)),a.zoneChange=a.zoneChange.bind(Object(D.a)(a)),a.onlockTransectionOnSkip=a.onlockTransectionOnSkip.bind(Object(D.a)(a)),a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.loadProductList(""),localStorage.setItem("lastUrl","verify"),Ze.getTotalToBeProcessed().then(function(t){var a=De(t);console.log(a.result),e.setState(Object(E.a)({},"recordToBeProcessed",a.result&&a.result.count)),localStorage.setItem("acquisitionCount",a.result&&a.result.acquisitionCount),localStorage.setItem("resubmitCount",a.result&&a.result.resubmitCount)})}},{key:"searchOnDB",value:function(e){var t=localStorage.getItem("verifyListingTxn");(t=t&&t.split(",")).length>=1&&this.onlockTransectionOnSkip(t),this.loadProductList(e)}},{key:"loadProductList",value:function(e){var t=this,a=((new Date).getTime(),{mobileNumber:e||null,zones:this.state.selectedZone.length?this.state.selectedZone:null});document.getElementById("showMessage").innerHTML="Please Wait Loading...",Ze.listDocs(a).then(function(e){var a=De(e),n=a&&a.result&&a.result.activationList;t.setState({products:n}),t.setState({searchedproducts:n});var r=n&&n.map(function(e,t){return e.txnId});document.getElementById("showMessage")&&(document.getElementById("showMessage").innerHTML=null==n?"No new documents for verification":""),r?localStorage.setItem("verifyListingTxn",r):localStorage.setItem("verifyListingTxn","")}),setTimeout(function(){t.state.searchedproducts&&0==t.state.searchedproducts.length&&(document.getElementById("showMessage").innerHTML="Server taking time to response please reload again and check")},7e3),Ze.getStaticData("BOA").then(function(e){var a=De(e);t.setState({listofzones:a&&a.result&&a.result.zones})})}},{key:"someAction",value:function(){alert("action happed in other commpornt")}},{key:"editProduct",value:function(e,t){console.log("productid, row.sim",e,t),window.localStorage.setItem("selectedProductId",e),window.localStorage.setItem("selectedSim",t),window.localStorage.setItem("fromSubmit",""),this.props.history.push("/verify-edit")}},{key:"convertBool",value:function(e){return e?"Yes":"No"}},{key:"render",value:function(){var e,t=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement(Mt.a,{style:{padding:"10px",overflow:"auto"}},r.a.createElement(Oe.a,Object(E.a)({syt:!0,container:!0,spacing:3,direction:"row",alignItems:"center"},"container",!0),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},"Acquisition  \u2013  Document Verification")),r.a.createElement(Oe.a,{item:!0,xs:10,sm:3},r.a.createElement(At.a,{style:xa.selectStyle},r.a.createElement(we.a,{id:"demo-mutiple-name-label"},"Select Zone"),r.a.createElement(Lt.a,{labelId:"demo-mutiple-name-label",id:"demo-mutiple-name",multiple:!0,name:"selectedZone",value:this.state.selectedZone,onChange:this.zoneChange,input:r.a.createElement(He.a,null),MenuProps:Oa},this.state.listofzones?this.state.listofzones.map(function(e){return r.a.createElement(_t.a,{key:e,value:e},e)}):""))),r.a.createElement(Oe.a,{item:!0,xs:2,sm:2},r.a.createElement(Ie.a,(e={value:this.state.searchby,label:"Search by Mobile No.",style:{width:"100%"},name:"Search by Mobile No."},Object(E.a)(e,"name","searchby"),Object(E.a)(e,"onChange",this.onChange),e))),r.a.createElement(Oe.a,{item:!0,xs:2,sm:1,alignItems:"left"},r.a.createElement(ke.a,{type:"submit",onClick:function(){return t.searchOnDB(t.state.searchby)},variant:"contained",style:{marginLeft:"20px"}},"Search"))),r.a.createElement("div",{style:{padding:"10px",overflow:"auto",height:"550px"}},r.a.createElement(We.a,{size:"small","aria-label":"sticky table"},r.a.createElement(Ea.a,null,r.a.createElement(fa.a,{style:{width:"170px",whiteSpace:"nowrap"}},r.a.createElement(ba.a,{align:""},"View"),r.a.createElement(ba.a,{align:""},"Mobile Number"),r.a.createElement(ba.a,{align:""},"NIC"),r.a.createElement(ba.a,{align:""},"SIM"),r.a.createElement(ba.a,{align:""},"PEF Count"),r.a.createElement(ba.a,{align:""},"NIC Count"),r.a.createElement(ba.a,{align:""},"Distributor"),r.a.createElement(ba.a,{align:""},"Zone"),r.a.createElement(ba.a,{align:""},"FTA Date"),r.a.createElement(ba.a,{align:""},"Submit Date"))),r.a.createElement(va.a,{style:{whiteSpace:"nowrap"}},this.state.searchedproducts?this.state.searchedproducts.map(function(e){return r.a.createElement(fa.a,{hover:!0,key:e.txnId},r.a.createElement(ba.a,{align:"center",onClick:function(){return t.editProduct(e.txnId,e.sim)}},r.a.createElement(Da.a,{style:{cursor:"hand"}})),r.a.createElement(ba.a,{component:"th",scope:"row",className:"hidden"},e.mobileNumber),r.a.createElement(ba.a,{align:"center"},e.nic),r.a.createElement(ba.a,{align:"center"},e.sim),r.a.createElement(ba.a,{align:"center"},e.pefCount),r.a.createElement(ba.a,{align:"center"},e.nicCount),r.a.createElement(ba.a,{align:"center"},e.distributer),r.a.createElement(ba.a,{align:"center"},e.zone),r.a.createElement(ba.a,{align:"center"},e.ftaDate.substring(0,10)),r.a.createElement(ba.a,{align:"center"},e.submitDate?e.submitDate.substring(0,10):"none"))}):"")),r.a.createElement("div",{style:{color:"gray",fontSize:"15px",textAlign:"center"}}," ",r.a.createElement("br",null)," ",r.a.createElement("span",{id:"showMessage"}," ")))))}}]),t}(r.a.Component),xa={tableStyle:{display:"flex",justifyContent:"left"},tableRow:{hover:{"&:hover":{background:"green !important"}}},selectStyle:{marginBottom:"0px",minWidth:340,maxWidth:340}},Ca=wa,ka={PaperProps:{style:{maxHeight:224,width:250}}},ja=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).onlockTransectionOnSkip=function(e){var t={transactionsIds:e};Ze.unlockTransectionsSkip(t).then(function(e){var t=De(e);"ok"!=t.message&&Se.showError("Server Error"+t.message)})},a.onChange=function(e){(""===e.target.value||/^[0-9\b]+$/.test(e.target.value)&&e.target.value.length<=10)&&a.setState({searchby:e.target.value})},a.zoneChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.state={products:[],searchedproducts:"",searchby:"",listofzones:[],selectedZone:[],zone:""},a.loadProductList=a.loadProductList.bind(Object(D.a)(a)),a.addProduct=a.addProduct.bind(Object(D.a)(a)),a.editProduct=a.editProduct.bind(Object(D.a)(a)),a.convertBool=a.convertBool.bind(Object(D.a)(a)),a.onChange=a.onChange.bind(Object(D.a)(a)),a.zoneChange=a.zoneChange.bind(Object(D.a)(a)),a.onlockTransectionOnSkip=a.onlockTransectionOnSkip.bind(Object(D.a)(a)),a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.loadProductList(""),localStorage.setItem("lastUrl","verify"),Ze.getTotalToBeProcessed().then(function(e){var t=De(e);console.log(t.result),localStorage.setItem("acquisitionCount",t.result&&t.result.acquisitionCount),localStorage.setItem("resubmitCount",t.result&&t.result.resubmitCount)})}},{key:"searchOnDB",value:function(e){var t=localStorage.getItem("verifyListingTxn");(t=t&&t.split(",")).length>=1&&this.onlockTransectionOnSkip(t),this.loadProductList(e)}},{key:"loadProductList",value:function(e){var t=this,a=((new Date).getTime(),{mobileNumber:e||null,zones:this.state.selectedZone.length?this.state.selectedZone:null});document.getElementById("showMessage").innerHTML="Please Wait Loading...",Ze.listDocsResubmit(a).then(function(e){var a=De(e),n=a.result&&a.result.activationList;t.setState({products:n}),t.setState({searchedproducts:n});var r=n&&n.map(function(e,t){return e.txnId});document.getElementById("showMessage")&&(document.getElementById("showMessage").innerHTML=null==n?"No new documents for verification":""),r?localStorage.setItem("verifyListingTxn",r):localStorage.setItem("verifyListingTxn","")}),setTimeout(function(){t.state.searchedproducts&&0==t.state.searchedproducts.length&&(document.getElementById("showMessage").innerHTML="Server taking time to response please reload again and check")},7e3),Ze.getStaticData("BOA").then(function(e){var a=De(e);t.setState({listofzones:a&&a.result&&a.result.zones})})}},{key:"addProduct",value:function(){this.props.history.push("/add-product")}},{key:"someAction",value:function(){alert("action happed in other commpornt")}},{key:"editProduct",value:function(e,t){console.log("productid, row.sim",e,t),window.localStorage.setItem("selectedProductId",e),window.localStorage.setItem("selectedSim",t),window.localStorage.setItem("fromSubmit","yes"),this.props.history.push("/verify-edit")}},{key:"convertBool",value:function(e){return e?"Yes":"No"}},{key:"render",value:function(){var e,t=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement(Mt.a,{style:{padding:"10px",overflow:"auto"}},r.a.createElement(Oe.a,Object(E.a)({syt:!0,container:!0,spacing:3,direction:"row",alignItems:"center"},"container",!0),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},"Resubmit \u2013 Document Verfication")),r.a.createElement(Oe.a,{item:!0,xs:10,sm:3},r.a.createElement(At.a,{style:Ia.selectStyle},r.a.createElement(we.a,{id:"demo-mutiple-name-label"},"Select Zone"),r.a.createElement(Lt.a,{labelId:"demo-mutiple-name-label",id:"demo-mutiple-name",multiple:!0,name:"selectedZone",value:this.state.selectedZone,onChange:this.zoneChange,input:r.a.createElement(He.a,null),MenuProps:ka},this.state.listofzones?this.state.listofzones.map(function(e){return r.a.createElement(_t.a,{key:e,value:e},e)}):""))),r.a.createElement(Oe.a,{item:!0,xs:2,sm:2},r.a.createElement(Ie.a,(e={value:this.state.searchby,label:"Search by Mobile No.",style:{width:"100%"},name:"Search by Mobile No."},Object(E.a)(e,"name","searchby"),Object(E.a)(e,"onChange",this.onChange),e))),r.a.createElement(Oe.a,{item:!0,xs:2,sm:1,alignItems:"left"},r.a.createElement(ke.a,{type:"submit",onClick:function(){return t.searchOnDB(t.state.searchby)},variant:"contained",style:{marginLeft:"20px"}},"Search"))),r.a.createElement("div",{style:{padding:"10px",overflow:"auto",height:"550px"}},r.a.createElement(We.a,{size:"small","aria-label":"sticky table"},r.a.createElement(Ea.a,null,r.a.createElement(fa.a,{style:{width:"170px",whiteSpace:"nowrap"}},r.a.createElement(ba.a,{align:""},"View"),r.a.createElement(ba.a,{align:""},"Mobile Number"),r.a.createElement(ba.a,{align:""},"NIC"),r.a.createElement(ba.a,{align:""},"SIM"),r.a.createElement(ba.a,{align:""},"PEF Count"),r.a.createElement(ba.a,{align:""},"NIC Count"),r.a.createElement(ba.a,{align:""},"Distributor"),r.a.createElement(ba.a,{align:""},"Zone"),r.a.createElement(ba.a,{align:""},"FTA Date"),r.a.createElement(ba.a,{align:""},"Submit Date"),r.a.createElement(ba.a,{align:""},"Resubmit Date"))),r.a.createElement(va.a,{style:{whiteSpace:"nowrap"}},this.state.searchedproducts?this.state.searchedproducts.map(function(e){return r.a.createElement(fa.a,{hover:!0,key:e.txnId},r.a.createElement(ba.a,{align:"center",onClick:function(){return t.editProduct(e.txnId,e.sim)}},r.a.createElement(Da.a,{style:{cursor:"hand"}})),r.a.createElement(ba.a,{component:"th",scope:"row",className:"hidden"},e.mobileNumber),r.a.createElement(ba.a,{align:"center"},e.nic),r.a.createElement(ba.a,{align:"center"},e.sim),r.a.createElement(ba.a,{align:"center"},e.pefCount),r.a.createElement(ba.a,{align:"center"},e.nicCount),r.a.createElement(ba.a,{align:"center"},e.distributer),r.a.createElement(ba.a,{align:"center"},e.zone),r.a.createElement(ba.a,{align:"center"},e.ftaDate.substring(0,10)),r.a.createElement(ba.a,{align:"center"},e.submitDate?e.submitDate.substring(0,10):"none"),r.a.createElement(ba.a,{align:"center"},e.resubmitDate?e.resubmitDate.substring(0,10):"none"))}):"")),r.a.createElement("div",{style:{color:"gray",fontSize:"15px",textAlign:"center"}}," ",r.a.createElement("br",null)," ",r.a.createElement("span",{id:"showMessage"}," ")))))}}]),t}(r.a.Component),Ia={tableStyle:{display:"flex",justifyContent:"left"},tableRow:{hover:{"&:hover":{background:"green !important"}}},selectStyle:{marginBottom:"0px",minWidth:340,maxWidth:340}},Ta=ja,Ra=a(278),Fa=a(139),Pa=a.n(Fa),Ba={defaultIndex:0,duration:1e3,transitionDuration:100,infinite:!1,indicators:!0,arrows:!0,scale:.5,autoplay:!1,onChange:function(e,t){console.log("fade transition from ".concat(e," to ").concat(t))}};var Na=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).openImageGalary=function(e){console.log("index",e),a.setState({isOpen:!0,photoIndex:e}),Wt()(".MuiToolbar-root").hide()},a.state={photoIndex:0,isOpen:!1,scale:0},a.openImageGalary=a.openImageGalary.bind(Object(D.a)(a)),a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){console.log("imageDetailsSlide",this.props.imageDetails)}},{key:"render",value:function(){var e=this.state,t=(e.photoIndex,e.isOpen,this.props.imageDetails.imageDetails);console.log("imageDetailsslide",this.props.imageDetails);var a=[],n=[];return t&&t.map(function(e,l){a.push(t[l].img),n.push(r.a.createElement(Oe.a,{item:!0,xs:12,sm:12},r.a.createElement("div",{className:"each-fade",style:{verticalAlign:"middle !important"}},r.a.createElement("div",{className:"image-container",style:{height:"70vh"}},r.a.createElement("div",{className:"titleOverlay",style:{textAlign:"center"}},"\xa0\xa0 ",e.title," \xa0\xa0"),r.a.createElement(Pa.a,{image:e.img,alt:e.title})))))}),r.a.createElement("div",{style:{justifyContent:"center"}},r.a.createElement("div",{className:"slide-container"},r.a.createElement(Ra.Slide,Object.assign({ref:this.props.imageDetails.slideRef},Ba),n)))}}]),t}(n.Component),Aa=a(501),La=a(101),Ma=a.n(La),_a=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).handleChange=function(e){return function(t){a.setState(Object(m.a)({},a.state,{selectedReasons:Object(m.a)({},a.state.selectedReasons,Object(E.a)({},e,t.target.checked))}))}},a.updateLocalActList=function(e){for(var t=localStorage.getItem("activationList")&&JSON.parse(localStorage.getItem("activationList")),a=-1,n=0;n<t.length;n++)if(t[n].txnId==e){a=n;break}a>-1&&t.splice(a,1),localStorage.setItem("activationList",JSON.stringify(t))},a.onlockTransectionOnSkip=function(e){var t={transactionsIds:[e]};Ze.unlockTransectionsSkip(t).then(function(e){var t=De(e);"ok"!=t.message&&Se.showError("Server Error"+t.message)})},a.skipThisVerify=function(e){a.setState({comments:""}),console.log("here");var t=localStorage.getItem("selectedProductId"),n=localStorage.getItem("verifyListingTxn");n=n&&n.split(",");for(var r="",l=0;l<n.length;l++)if(t==parseInt(n[l])){r=parseInt(n[l+1]);break}a.onlockTransectionOnSkip(t),console.log("next id",r),r?(localStorage.setItem("selectedProductId",r),a.loadOneTransection(),a.setState({approveLoader:!1}),a.setState({approveDone:!1}),a.setState({approveButton:!0}),a.setState({rejectDone:!1}),a.setState({rejectButton:!0,comments:""}),a.slideRef&&a.slideRef.current&&a.slideRef.current.goTo(0)):a.cancel()},a.approveEV=function(e){if(e.preventDefault(),console.log("approve data",a.state),Object.values(a.state.selectedReasons).find(function(e){return 1==e}))Se.showError("Remove reason selections to approve");else{a.setState({approveLoader:!0}),a.setState({approveButton:!1});var t={rejectedReasons:null,comments:a.state.comments,isPOIRejected:a.state.isPOIRejected,isCumtomerPhotoRejected:0,verificationDateTime:new Date,verificationUser:a.state.loginId,isRejected:0,transactionId:a.state.transactionId};Ze.approveDocs(t).then(function(e){var t=De(e);a.setState({approveLoader:!1}),a.setState({approveDone:!0}),console.log(t),setTimeout(function(){a.skipThisVerify()},2e3)})}},a.rejectEV=function(e){if(console.log("Reject Data",a.state),Object.values(a.state.selectedReasons).find(function(e){return 1==e})){a.setState({rejectLoader:!0}),a.setState({rejectButton:!1});for(var t=Object.keys(a.state.selectedReasons),n=[],r=0;r<t.length;r++){var l=t[r]&&t[r].split("-")[0].trim();n.push(l)}console.log("selectd onlyCode",n);var i=Object.keys(a.state.selectedReasons),s=0;for(r=0;r<i.length;r++)if(i[r].includes("POI")){s=1;break}var o={rejectedReasons:n.join(","),comments:a.state.comments,isPOIRejected:s,isCumtomerPhotoRejected:0,verificationDateTime:new Date,verificationUser:a.state.loginId,isRejected:1,transactionId:a.state.transactionId};Ze.approveDocs(o).then(function(e){De(e);a.setState({rejectLoader:!1}),a.setState({rejectDone:!0}),setTimeout(function(){a.skipThisVerify()},2e3)})}else Se.showError("Select reason(s) to reject!")},a.cancel=function(e){"yes"==localStorage.getItem("fromSubmit")?a.props.history.push("/resubmit-verify"):a.props.history.push("/verify")},a.onChange=function(e){var t=e.target.value.trim();!t.includes("@")&&!t.includes("$")&&!t.includes("&")&&a.setState(Object(E.a)({},e.target.name,e.target.value))},a.state={address1:"",address2:null,address3:null,altContactNumber:"",customerImageUrl:null,customerSignatureUrl:null,deDateTime:null,deUser:null,dob:"",firstName:"",gender:"",lastName:null,middleName:null,mobileNumber:"",pefImageUrl:null,poiBackImageUrl:null,poiFrontImageUrl:null,poiNumber:"",poiType:null,status:"",submittedBy:"",showPersonalDetails:"",title:"",rejectedReasons:"",transactionId:"",selectedReasons:{},sim:"",loader:!1,approveLoader:!1,approveDone:!1,approveButton:!0,rejectLoader:!1,rejectDone:!1,rejectButton:!0,loginId:"",emailid:"",presentAddress:"",comments:"",bothReasons:"",loading:!0},a.onChange=a.onChange.bind(Object(D.a)(a)),a.approveEV=a.approveEV.bind(Object(D.a)(a)),a.rejectEV=a.rejectEV.bind(Object(D.a)(a)),a.loadOneTransection=a.loadOneTransection.bind(Object(D.a)(a)),a.onlockTransectionOnSkip=a.onlockTransectionOnSkip.bind(Object(D.a)(a)),a.slideRef=r.a.createRef(),a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"loadOneTransection",value:function(){var e=this,t=localStorage.getItem("selectedProductId");null==t?this.cancel():Ze.getOneVerify(t).then(function(t){var a=De(t),n=a.result;console.log("selectedProduct",n);var r="";n&&n.rejectedReasons&&(r=(n.rejectedReasons&&n.rejectedReasons.split("|")).reduce(function(e,t,a,n){return e[t]=!0,e},{}));n?(e.setState({address1:n.address1,address2:n.address2,address3:n.address3,presentAddress:n.presentAddress,altContactNumber:n.altContactNumber,comments:n.comments,customerImageUrl:n.customerImageUrl,customerSignatureUrl:n.customerSignatureUrl,deDateTime:n.deDateTime,deUser:n.deUser,emailid:n.emailid,alternateNumber:n.alternateNumber,firstName:n.firstName,gender:n.gender,lastName:n.lastName,middleName:n.middleName,mobileNumber:n.mobileNumber,pefImageUrl:n.pefImageUrl,poiBackImageUrl:n.poiBackImageUrl,poiFrontImageUrl:n.poiFrontImageUrl,retailerSignatureUrl:n.retailerSignatureUrl,poiNumber:n.poiNumber,poiType:n.poiType,status:n.status,submittedBy:n.submittedBy,showPersonalDetails:n.showPersonalDetails,title:n.title,transactionId:n.transactionId,selectedReasons:r,sim:n.simNumber,submittedDate:n.submittedDate,submittedDateStr:n.submittedDateStr,resubmittedDate:n.resubmittedDate,resubmittedDateStr:n.resubmittedDateStr,ftaDate:n.ftaDate,prevRejectedImgs:n.prevData}),e.state.showPersonalDetails?e.setState({rejectedReasons:e.state.bothReasons.eactivatedRejectionReasons}):e.setState({rejectedReasons:e.state.bothReasons.preActivatedRejectionReasons})):Se.showError(JSON.stringify(a)),e.setState({loading:!1})})}},{key:"componentDidMount",value:function(){var e=this;this.loadOneTransection(),localStorage.setItem("lastUrl","verify-edit");var t=JSON.parse(localStorage.getItem("userDetails")),a=t&&t.roleCode;this.setState({loader:!0,loginId:t.loginId}),a&&Ze.getStaticData(a).then(function(t){console.log("reason:",t);var a=De(t);a.result&&e.setState({bothReasons:a.result})})}},{key:"render",value:function(){var e;console.log("this.state",this.state);var t=this.state.rejectedReasons,a=[];if(t)for(var n=0;n<t.length;n++)1==t[n].isMandatory?a.push(r.a.createElement("div",null," ",r.a.createElement("label",{style:{color:"red"}},r.a.createElement("input",{type:"checkbox",onChange:this.handleChange(t[n].exemptReason),checked:!!this.state.selectedReasons[t[n].exemptReason]})," ",t[n].exemptReason," "))):a.push(r.a.createElement("div",null," ",r.a.createElement("label",null," ",r.a.createElement("input",{type:"checkbox",onChange:this.handleChange(t[n].exemptReason),checked:!!this.state.selectedReasons[t[n].exemptReason]})," ",t[n].exemptReason," ")));var l=[];this.state.poiFrontImageUrl&&l.push({img:""+this.state.poiFrontImageUrl,title:"POI Front Image",author:"Front Image",featured:!0}),this.state.customerImageUrl&&l.push({img:""+this.state.customerImageUrl,title:"Customer Image",author:"Customer Image",featured:!0}),this.state.poiBackImageUrl&&l.push({img:""+this.state.poiBackImageUrl,title:"POI Back Image",author:"Back Image",featured:!0}),this.state.customerSignatureUrl&&l.push({img:""+this.state.customerSignatureUrl,title:"Customer Signature",author:"Customer Signature",featured:!0}),this.state.retailerSignatureUrl&&l.push({img:""+this.state.retailerSignatureUrl,title:"Retailer Signature",author:"Retailer Signature",featured:!0}),console.log("imageDetails",l);var i=[];this.state.prevRejectedImgs&&this.state.prevRejectedImgs.poiFrontImageUrl&&i.push({img:""+this.state.prevRejectedImgs.poiFrontImageUrl,title:"POI Front Image",author:"Front Image",featured:!0}),this.state.prevRejectedImgs&&this.state.prevRejectedImgs.customerImageUrl&&i.push({img:""+this.state.prevRejectedImgs.customerImageUrl,title:"Customer Image",author:"Customer Image",featured:!0}),this.state.prevRejectedImgs&&this.state.prevRejectedImgs.poiBackImageUrl&&i.push({img:""+this.state.prevRejectedImgs.poiBackImageUrl,title:"POI Back Image",author:"Back Image",featured:!0}),this.state.prevRejectedImgs&&this.state.prevRejectedImgs.customerSignatureUrl&&i.push({img:""+this.state.prevRejectedImgs.customerSignatureUrl,title:"Customer Signature",author:"Customer Signature",featured:!0}),this.state.prevRejectedImgs&&this.state.prevRejectedImgs.retailerSignatureUrl&&i.push({img:""+this.state.prevRejectedImgs.retailerSignatureUrl,title:"Retailer Signature Image",author:"Retailer Signature Image",featured:!0}),this.state.showPersonalDetails&&this.state.prevRejectedImgs&&this.state.prevRejectedImgs.pefImageUrl&&i.push({img:""+this.state.prevRejectedImgs.pefImageUrl,title:"CAF Image",author:"CAF Image",featured:!0}),console.log("prevRejectedImgs",i);var s=2,o=7,c=3;return this.state.showPersonalDetails||(s=5,o=5,c=2),this.state.loading?r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement("br",null),r.a.createElement(he.a,{variant:"h6"},"Loading...please wait.")):r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement(he.a,{variant:"h6",style:za.textStyleHeading},"View and Verify Document"),r.a.createElement(Oe.a,{direction:"row",container:!0,className:"flexGrow",spacing:1,style:{paddingLeft:"10px",paddingRight:"10px"}},r.a.createElement(Oe.a,{item:!0,xs:12,sm:s},r.a.createElement(Mt.a,{style:{overflow:"scroll",height:"78vh"}},this.state.loader?this.state.showPersonalDetails?r.a.createElement(Ua,{cafdetails:this.state}):r.a.createElement(Wa,{pefImageUrl:{pefImage:this.state.pefImageUrl,prevPefImage:this.state.prevRejectedImgs&&this.state.prevRejectedImgs.pefImageUrl}}):"")),r.a.createElement(Oe.a,{item:!0,xs:12,sm:o},r.a.createElement(Mt.a,{style:{overflow:"scroll",height:"78vh"}},"image_uploading"==this.state.status?r.a.createElement(he.a,{variant:"h6",style:{color:"gray",textAlign:"center"}},r.a.createElement("br",null),r.a.createElement("br",null)," ",r.a.createElement("br",null)," ",r.a.createElement("br",null)," ",r.a.createElement("br",null)," ",r.a.createElement("br",null)," ",r.a.createElement("br",null),"No documents are uploaded yet"):null,l.length?r.a.createElement(Na,{imageDetails:{imageDetails:l,slideRef:this.slideRef}}):null,r.a.createElement("br",null),i.length?r.a.createElement(he.a,{variant:"h6"},"Previous Rejected Documents"):null,i.length?r.a.createElement(Na,{imageDetails:{imageDetails:i,slideRef:this.slideRef}}):null)),r.a.createElement(Oe.a,{item:!0,xs:12,sm:c},r.a.createElement(Mt.a,{style:{padding:"10px"}},r.a.createElement(he.a,{variant:"h6",style:za.textStyle},"Verify or Reject"),r.a.createElement("form",{style:za.formContainer},r.a.createElement(Ie.a,{label:"Mobile No",required:!0,fullWidth:!0,name:"productName",value:this.state.mobileNumber}),r.a.createElement(Ie.a,{label:this.state.poiType,required:!0,fullWidth:!0,name:"displayName",value:this.state.poiNumber}),r.a.createElement(Ie.a,{label:"SIM",required:!0,fullWidth:!0,name:"displayName",value:this.state.sim}),r.a.createElement(Oe.a,{item:!0,xs:12,sm:12},r.a.createElement(he.a,{variant:"p"},"Select Reasons")),r.a.createElement("div",null,a),r.a.createElement(Ie.a,{multiline:!0,rows:2,label:"Comments",fullWidth:!0,margin:"none",name:"comments",value:this.state.comments,onChange:this.onChange}))))),r.a.createElement("br",null),this.state.loader?r.a.createElement("div",{style:za.footerButton},r.a.createElement(Oe.a,(e={container:!0,spacing:2},Object(E.a)(e,"container",!0),Object(E.a)(e,"direction","row"),Object(E.a)(e,"justify","center"),Object(E.a)(e,"alignItems","center"),e),this.state.approveLoader?r.a.createElement(Aa.a,null):"",this.state.approveDone?r.a.createElement(ke.a,{variant:"outlined",color:"primary",style:{marginLeft:"20px"}}," ",r.a.createElement(Ma.a,{color:"primary"})," Approved and Loading Next"):"",this.state.approveButton?"image_uploading"==this.state.status?r.a.createElement(ke.a,{disabled:!0,variant:"contained",color:"primary",style:{marginLeft:"20px"},onClick:this.approveEV},"Approve"):r.a.createElement(ke.a,{variant:"contained",color:"primary",style:{marginLeft:"20px"},onClick:this.approveEV},"Approve"):"",this.state.rejectLoader?r.a.createElement(Aa.a,null):"",this.state.rejectDone?r.a.createElement(ke.a,{variant:"outlined",color:"primary",style:{marginLeft:"20px"}}," ",r.a.createElement(Ma.a,{color:"primary"})," Rejected and Loading Next"):"",this.state.rejectButton?r.a.createElement(ke.a,{variant:"contained",color:"secondary",style:{marginLeft:"20px"},onClick:this.rejectEV},"Reject"):"",r.a.createElement(ke.a,{variant:"contained",color:"secondary",style:{marginLeft:"20px",backgroundColor:"#33691e"},onClick:this.skipThisVerify}," SKIP "),r.a.createElement(ke.a,{variant:"contained",color:"default",style:{marginLeft:"20px"},onClick:this.cancel},"Back to Listing"))):"",r.a.createElement("div",null))}}]),t}(r.a.Component),za={formContainer:{display:"flex",flexFlow:"row wrap"},textStyle:{display:"flex",justifyContent:"center"},textStyleHeading:{display:"flex",justifyContent:"center"},mainDivAdjustment:{padding:0,backgroundColor:"red"},footerButton:{position:"fixed",left:0,bottom:"20px",width:"100%",textAlign:"center"}},Ua=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"mainDivAdjustment"},r.a.createElement(Ke.a,{component:"nav","aria-label":"main mailbox folders"},r.a.createElement(he.a,{variant:"h6",style:za.textStyle}," Acquisition Details"),r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement("b",null," Title : ")," ",this.props.cafdetails.title," ",this.props.cafdetails.firstName," ",this.props.cafdetails.middleName," ",this.props.cafdetails.lastName,r.a.createElement("br",null),r.a.createElement("b",null," Gender : "),"  ",this.props.cafdetails.gender,r.a.createElement("br",null),r.a.createElement("b",null," Address : "),"   ",this.props.cafdetails.presentAddress,r.a.createElement("br",null),r.a.createElement("b",null," Alternate  No. :"),"   ",this.props.cafdetails.alternateNumber,r.a.createElement("br",null),r.a.createElement("b",null,"  Email : ")," ",this.props.cafdetails.emailid,r.a.createElement("br",null),r.a.createElement("b",null," FTA Date :"),"  ",this.props.cafdetails.ftaDate?this.props.cafdetails.ftaDate.substring(0,10):"none",r.a.createElement("br",null),r.a.createElement("b",null,"Submit Date :  ")," ",this.props.cafdetails.submittedDateStr?this.props.cafdetails.submittedDateStr.substring(0,10):"none",r.a.createElement("br",null),r.a.createElement("b",null,"Resubmit Date :  ")," ",this.props.cafdetails.resubmittedDateStr?this.props.cafdetails.resubmittedDateStr.substring(0,10):"Not yet resubmitted")))}}]),t}(r.a.Component),Wa=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e={img:this.props.pefImageUrl.pefImage,title:"CAF Image",author:"CAF Image",featured:!0},t={img:this.props.pefImageUrl.prevPefImage,title:"Previous CAF Image",author:"Previous CAF Image",featured:!0};return this.props.pefImageUrl.pefImage&&[].push({img:this.props.pefImageUrl.pefImage,title:"Customer Application Form",author:"Customer Application Form",featured:!0}),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"image-container",style:{height:"70vh"}},r.a.createElement("div",{className:"titleOverlay",style:{textAlign:"center"}},"\xa0\xa0 CAF Image \xa0\xa0"),r.a.createElement(Pa.a,{image:e.img,alt:e.title}),t.img?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{textAlign:"center",position:"relative"}},r.a.createElement("br",null),r.a.createElement("span",{className:"titleOverlayPEF"}," \xa0\xa0 Previous CAF Image \xa0\xa0 "),"   "),r.a.createElement(Pa.a,{image:t.img,alt:t.title})):""))}}]),t}(r.a.Component),Ha=_a,Za=(a(194),{PaperProps:{style:{maxHeight:224,width:250}}}),qa=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).zoneChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.onlockTransectionOnSkip=function(e){var t={transactionsIds:e};Ze.unlockTransectionsSkip(t).then(function(e){var t=De(e);"ok"!=t.message&&Se.showError("Server Error"+t.message)})},a.onChange=function(e){(""===e.target.value||/^[0-9\b]+$/.test(e.target.value)&&e.target.value.length<=10)&&a.setState({searchby:e.target.value})},a.state={products:[],searchedproducts:"",searchby:"",listingTakingTime:null,listofzones:[],selectedZone:[],zone:""},a.loadProductList=a.loadProductList.bind(Object(D.a)(a)),a.editProduct=a.editProduct.bind(Object(D.a)(a)),a.convertBool=a.convertBool.bind(Object(D.a)(a)),a.onlockTransectionOnSkip=a.onlockTransectionOnSkip.bind(Object(D.a)(a)),a.onChange=a.onChange.bind(Object(D.a)(a)),a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.loadProductList(),localStorage.setItem("lastUrl","dataentry"),Ze.getTotalToBeProcessed().then(function(t){var a=De(t);console.log(a.result),e.setState(Object(E.a)({},"recordToBeProcessed",a.result&&a.result.count)),localStorage.setItem("acquisitionCount",a.result&&a.result.acquisitionCount),localStorage.setItem("resubmitCount",a.result&&a.result.resubmitCount)})}},{key:"loadProductList",value:function(e){var t=this,a=((new Date).getTime(),{mobileNumber:e||null,zones:this.state.selectedZone.length?this.state.selectedZone:null});document.getElementById("showMessage").innerHTML="Please Wait Loading...",Ze.listDocs(a).then(function(e){var a=De(e),n=a.result&&a.result.activationList;t.setState({products:n}),t.setState({searchedproducts:n});var r=n&&n.map(function(e,t){return e.txnId});r?localStorage.setItem("dataentryListingTxn",r):localStorage.setItem("dataentryListingTxn",""),document.getElementById("showMessage").innerHTML="",document.getElementById("showMessage")&&null==n&&(document.getElementById("showMessage").innerHTML="No new documents for verification")}),setTimeout(function(){t.state.searchedproducts&&0==t.state.searchedproducts.length&&(document.getElementById("showMessage").innerHTML="Server taking time to response please reload again and check")},7e3),Ze.getStaticData("DE").then(function(e){var a=De(e);t.setState({listofzones:a&&a.result&&a.result.zones})})}},{key:"searchOnDB",value:function(e){var t=localStorage.getItem("dataentryListingTxn");(t=t&&t.split(",")).length>=1&&this.onlockTransectionOnSkip(t),this.loadProductList(e)}},{key:"editProduct",value:function(e){console.log("productid",e),window.localStorage.setItem("dataEntryId",e),window.localStorage.setItem("fromSubmit",""),this.props.history.push("/data-edit")}},{key:"convertBool",value:function(e){return e?"Yes":"No"}},{key:"render",value:function(){var e,t,a=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement(Mt.a,{style:{padding:"10px"}},r.a.createElement(Oe.a,(t={syt:!0,container:!0,spacing:3},Object(E.a)(t,"container",!0),Object(E.a)(t,"direction","row"),Object(E.a)(t,"justify","right"),Object(E.a)(t,"alignItems","center"),t),r.a.createElement(Oe.a,Object(E.a)({item:!0,xs:12},"xs",6),r.a.createElement(he.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},"Acquisition  \u2013 Data Entry")),r.a.createElement(Oe.a,{item:!0,xs:10,sm:3},r.a.createElement(At.a,{style:Va.selectStyle},r.a.createElement(we.a,{id:"demo-mutiple-name-label"},"Select Zone"),r.a.createElement(Lt.a,{labelId:"demo-mutiple-name-label",id:"demo-mutiple-name",multiple:!0,name:"selectedZone",value:this.state.selectedZone,onChange:this.zoneChange,input:r.a.createElement(He.a,null),MenuProps:Za},this.state.listofzones?this.state.listofzones.map(function(e){return r.a.createElement(_t.a,{key:e,value:e},e)}):""))),r.a.createElement(Oe.a,{item:!0,xs:10,sm:2,alignItems:"flex-end",alignContent:"flex-end",justify:"flex-end"},r.a.createElement(Ie.a,(e={value:this.state.searchby,label:"Search by Mobile No.",style:{width:"100%"},name:"Search by Mobile No."},Object(E.a)(e,"name","searchby"),Object(E.a)(e,"onChange",this.onChange),e))),r.a.createElement(Oe.a,{item:!0,xs:2,sm:1,alignItems:"flex-end",alignContent:"flex-end",justify:"flex-end"},r.a.createElement(ke.a,{type:"submit",onClick:function(){return a.searchOnDB(a.state.searchby)},variant:"contained",style:{marginLeft:"20px"}},"Search"))),r.a.createElement("div",{style:{padding:"10px",overflow:"auto",height:"550px"}},r.a.createElement(We.a,{size:"small","aria-label":"sticky table"},r.a.createElement(Ea.a,{style:{width:"170px",whiteSpace:"nowrap"}},r.a.createElement(fa.a,null,r.a.createElement(ba.a,{align:""},"View"),r.a.createElement(ba.a,{align:""},"Mobile Number"),r.a.createElement(ba.a,{align:""},"NIC"),r.a.createElement(ba.a,{align:""},"SIM"),r.a.createElement(ba.a,{align:""},"PEF Count"),r.a.createElement(ba.a,{align:""},"NIC Count"),r.a.createElement(ba.a,{align:""},"Distributor"),r.a.createElement(ba.a,{align:""},"Zone"),r.a.createElement(ba.a,{align:""},"FTA Date"),r.a.createElement(ba.a,{align:""},"Submit Date"))),r.a.createElement(va.a,{style:{width:"170px",whiteSpace:"nowrap"}},this.state.searchedproducts?this.state.searchedproducts.map(function(e){return r.a.createElement(fa.a,null,r.a.createElement(ba.a,{align:"center",onClick:function(){return a.editProduct(e.txnId)},hover:!0,key:e.txnId},r.a.createElement(Da.a,{style:{cursor:"hand"}})),r.a.createElement(ba.a,{component:"th",scope:"row",className:"hidden"},e.mobileNumber),r.a.createElement(ba.a,{align:"center"},e.nic),r.a.createElement(ba.a,{align:"center"},e.sim),r.a.createElement(ba.a,{align:"center"},e.pefCount),r.a.createElement(ba.a,{align:"center"},e.nicCount),r.a.createElement(ba.a,{align:"center"},e.distributer),r.a.createElement(ba.a,{align:"center"},e.zone),r.a.createElement(ba.a,{align:"center"},e.ftaDate.substring(0,10)),r.a.createElement(ba.a,{align:"center"},e.submitDate?e.submitDate.substring(0,10):"none"))}):"")),r.a.createElement("div",{style:{color:"gray",fontSize:"15px",textAlign:"center"}}," ",r.a.createElement("br",null)," ",r.a.createElement("span",{id:"showMessage"}," ")))))}}]),t}(r.a.Component),Va={tableStyle:{display:"flex",justifyContent:"left"},selectStyle:{marginBottom:"0px",minWidth:340,maxWidth:340}},Ya=qa,Ga={PaperProps:{style:{maxHeight:224,width:250}}},Ka=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).zoneChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.onlockTransectionOnSkip=function(e){var t={transactionsIds:e};Ze.unlockTransectionsSkip(t).then(function(e){var t=De(e);"ok"!=t.message&&Se.showError("Server Error"+t.message)})},a.onChange=function(e){(""===e.target.value||/^[0-9\b]+$/.test(e.target.value)&&e.target.value.length<=10)&&a.setState({searchby:e.target.value})},a.state={products:[],searchedproducts:null,searchby:"",listingTakingTime:null,listofzones:[],selectedZone:[],zone:""},a.loadProductList=a.loadProductList.bind(Object(D.a)(a)),a.addProduct=a.addProduct.bind(Object(D.a)(a)),a.editProduct=a.editProduct.bind(Object(D.a)(a)),a.convertBool=a.convertBool.bind(Object(D.a)(a)),a.onlockTransectionOnSkip=a.onlockTransectionOnSkip.bind(Object(D.a)(a)),a.onChange=a.onChange.bind(Object(D.a)(a)),a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.loadProductList(),localStorage.setItem("lastUrl","dataentry"),Ze.getTotalToBeProcessed().then(function(e){var t=De(e);console.log(t.result),localStorage.setItem("acquisitionCount",t.result&&t.result.acquisitionCount),localStorage.setItem("resubmitCount",t.result&&t.result.resubmitCount)})}},{key:"loadProductList",value:function(e){var t=this,a=(new Date).getTime(),n={endDate:a,mobileNumber:e||null,noOfRecords:20,role:"DE",startDate:0,txnId:0,type:"next",zones:this.state.selectedZone.length?this.state.selectedZone:null};document.getElementById("showMessage").innerHTML="Please Wait Loading...",Ze.listDocsResubmit(n).then(function(e){var a=De(e),n=a.result&&a.result.activationList;t.setState({products:n}),t.setState({searchedproducts:n});var r=n&&n.map(function(e,t){return e.txnId});r?localStorage.setItem("dataentryListingTxn",r):localStorage.setItem("dataentryListingTxn",""),document.getElementById("showMessage").innerHTML="",document.getElementById("showMessage")&&null==n&&(document.getElementById("showMessage").innerHTML="No new documents for verification")}),setTimeout(function(){t.state.searchedproducts&&0==t.state.searchedproducts.length&&(document.getElementById("showMessage").innerHTML="Server taking time to response please reload again and check")},7e3),Ze.getStaticData("DE").then(function(e){var a=De(e);t.setState({listofzones:a&&a.result&&a.result.zones})})}},{key:"addProduct",value:function(){this.props.history.push("/add-product")}},{key:"searchOnDB",value:function(e){var t=localStorage.getItem("dataentryListingTxn");(t=t&&t.split(",")).length>=1&&this.onlockTransectionOnSkip(t),this.loadProductList(e)}},{key:"editProduct",value:function(e){console.log("productid",e),window.localStorage.setItem("dataEntryId",e),window.localStorage.setItem("fromSubmit","yes"),this.props.history.push("/data-edit")}},{key:"convertBool",value:function(e){return e?"Yes":"No"}},{key:"render",value:function(){var e,t,a=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement(Mt.a,{style:{padding:"10px"}},r.a.createElement(Oe.a,(t={syt:!0,container:!0,spacing:3},Object(E.a)(t,"container",!0),Object(E.a)(t,"direction","row"),Object(E.a)(t,"justify","right"),Object(E.a)(t,"alignItems","center"),t),r.a.createElement(Oe.a,Object(E.a)({item:!0,xs:12},"xs",6),r.a.createElement(he.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},"Resubmit \u2013 Data Entry")),r.a.createElement(Oe.a,{item:!0,xs:10,sm:3},r.a.createElement(At.a,{style:Ja.selectStyle},r.a.createElement(we.a,{id:"demo-mutiple-name-label"},"Select Zone"),r.a.createElement(Lt.a,{labelId:"demo-mutiple-name-label",id:"demo-mutiple-name",multiple:!0,name:"selectedZone",value:this.state.selectedZone,onChange:this.zoneChange,input:r.a.createElement(He.a,null),MenuProps:Ga},this.state.listofzones?this.state.listofzones.map(function(e){return r.a.createElement(_t.a,{key:e,value:e},e)}):""))),r.a.createElement(Oe.a,{item:!0,xs:10,sm:2,alignItems:"flex-end",alignContent:"flex-end",justify:"flex-end"},r.a.createElement(Ie.a,(e={value:this.state.searchby,label:"Search by Mobile No.",style:{width:"100%"},name:"Search by Mobile No."},Object(E.a)(e,"name","searchby"),Object(E.a)(e,"onChange",this.onChange),e))),r.a.createElement(Oe.a,{item:!0,xs:2,sm:1,alignItems:"flex-end",alignContent:"flex-end",justify:"flex-end"},r.a.createElement(ke.a,{type:"submit",onClick:function(){return a.searchOnDB(a.state.searchby)},variant:"contained",style:{marginLeft:"20px"}},"Search"))),r.a.createElement("div",{style:{padding:"10px",overflow:"auto",height:"550px"}},r.a.createElement(We.a,{size:"small","aria-label":"sticky table"},r.a.createElement(Ea.a,{style:{width:"170px",whiteSpace:"nowrap"}},r.a.createElement(fa.a,null,r.a.createElement(ba.a,{align:""},"View"),r.a.createElement(ba.a,{align:""},"Mobile Number"),r.a.createElement(ba.a,{align:""},"NIC"),r.a.createElement(ba.a,{align:""},"SIM"),r.a.createElement(ba.a,{align:""},"PEF Count"),r.a.createElement(ba.a,{align:""},"NIC Count"),r.a.createElement(ba.a,{align:""},"Distributor"),r.a.createElement(ba.a,{align:""},"Zone"),r.a.createElement(ba.a,{align:""},"FTA Date"),r.a.createElement(ba.a,{align:""},"Submit Date"),r.a.createElement(ba.a,{align:""},"Resubmit Date"))),r.a.createElement(va.a,{style:{width:"170px",whiteSpace:"nowrap"}},this.state.searchedproducts?this.state.searchedproducts.map(function(e){return r.a.createElement(fa.a,null,r.a.createElement(ba.a,{align:"center",onClick:function(){return a.editProduct(e.txnId)},hover:!0,key:e.txnId},r.a.createElement(Da.a,{style:{cursor:"hand"}})),r.a.createElement(ba.a,{component:"th",scope:"row",className:"hidden"},e.mobileNumber),r.a.createElement(ba.a,{align:"center"},e.nic),r.a.createElement(ba.a,{align:"center"},e.sim),r.a.createElement(ba.a,{align:"center"},e.pefCount),r.a.createElement(ba.a,{align:"center"},e.nicCount),r.a.createElement(ba.a,{align:"center"},e.distributer),r.a.createElement(ba.a,{align:"center"},e.zone),r.a.createElement(ba.a,{align:"center"},e.ftaDate.substring(0,10)),r.a.createElement(ba.a,{align:"center"},e.submitDate?e.submitDate.substring(0,10):"none"),r.a.createElement(ba.a,{align:"center"},e.resubmitDate?e.resubmitDate.substring(0,10):"none"))}):"")),r.a.createElement("div",{style:{color:"gray",fontSize:"15px",textAlign:"center"}}," ",r.a.createElement("br",null)," ",r.a.createElement("span",{id:"showMessage"}," ")))))}}]),t}(r.a.Component),Ja={tableStyle:{display:"flex",justifyContent:"left"},selectStyle:{marginBottom:"0px",minWidth:340,maxWidth:340}},$a=Ka;function Xa(e){var t=r.a.useState(new Date),a=Object(qe.a)(t,2),n=a[0],l=a[1],i=r.a.useState(new Date),s=Object(qe.a)(i,2),o=(s[0],s[1],new Date);o.setFullYear(o.getFullYear()-15);var c=new Date;return n&&n.getDate()==c.getDate()&&n.getFullYear()==c.getFullYear()&&n.getMonth()==c.getMonth()&&l(null),e.callbackFromParent.startDate||(n=null),console.log("keydate",n),r.a.createElement(Ht.a,{utils:zt.a},r.a.createElement(Oe.a,{container:!0,justify:"space-around"},r.a.createElement(Zt.a,{margin:"normal",disableFuture:"true",allowKeyboardControl:"true",maxDate:o,id:"date-picker-dialog",label:"Date of Birth",format:"dd/MM/yyyy",value:n,onChange:function(t){l(t),e.callbackFromParent.myCallback(t,"START_DATE")},KeyboardButtonProps:{"aria-label":"change date"}})))}var Qa,en,tn=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).myCallback=function(e,t){if("START_DATE"===t){var n=e.toLocaleDateString("en-GB",{day:"numeric",month:"numeric",year:"numeric"}).replace(/ /g,"/");console.log("formattedDate",n),a.setState({dob:n})}},a.updateLocalActList=function(e){for(var t=localStorage.getItem("dataEntryActivationList")&&JSON.parse(localStorage.getItem("dataEntryActivationList")),a=-1,n=0;n<t.length;n++)if(t[n].txnId==e){a=n;break}a>-1&&t.splice(a,1),localStorage.setItem("dataEntryActivationList",JSON.stringify(t))},a.onlockTransectionOnSkip=function(e){var t={transactionsIds:[e]};Ze.unlockTransectionsSkip(t).then(function(e){"ok"!=De(e).message&&Se.showError("Didn't unlocked")})},a.skipThisVerify=function(e){a.setState({txnId:"",mobileNumber:"",poiNumber:"",poiType:"",title:"",gender:"",dob:"",rejectedReasons:"",approveLoader:!1,approveDone:!1,approveButton:!0,loginId:"",firstName:"",middleName:"",lastName:"",altContactNumber:"",propMobile:"",emailid:"",address1:"",address2:"",address3:"",customerImageUrl:"",presentAddress:"",pefImageUrl:"",comment:""});var t=localStorage.getItem("dataEntryId"),n=localStorage.getItem("dataentryListingTxn");n=n&&n.split(",");for(var r="",l=0;l<n.length;l++)if(t==parseInt(n[l])){r=parseInt(n[l+1]);break}a.onlockTransectionOnSkip(t),r?(localStorage.setItem("dataEntryId",r),a.loadOneTransection(),a.slideRef.current.goTo(0),a.setState({approveLoader:!1}),a.setState({approveDone:!1}),a.setState({approveButton:!0})):a.cancel()},a.handleChange=function(e){return function(t){a.setState(Object(m.a)({},a.state,Object(E.a)({},e,t.target.checked)))}},a.submitDataEntry=function(e){if(e.preventDefault(),a.state.firstName)if("invalid/date"!=a.state.dob.toLocaleLowerCase())if(a.state.comment&&a.state.comment.length>200)Se.showError("Comments allow upto 200 characters only");else{a.setState({approveLoader:!0}),a.setState({approveButton:!1});var t={transactionId:localStorage.getItem("dataEntryId"),poiNumber:a.state.poiNumber,poiType:a.state.poiType,title:a.state.title,gender:a.state.gender,dob:a.state.dob,firstName:a.state.firstName,middleName:a.state.middleName,lastName:a.state.lastName,address1:a.state.address1,address2:a.state.address2,address3:a.state.address3,altContactNumber:a.state.altContactNumber,comments:a.state.comment,deDateTime:new Date,deUser:a.state.loginId,emailid:a.state.emailid};Ze.saveDataEntry(t).then(function(e){De(e),a.setState({approveLoader:!1}),a.setState({approveDone:!0}),setTimeout(function(){a.skipThisVerify()},2e3)})}else Se.showError("Invalid Date of Birth Format");else Se.showError("Missing First Name")},a.reject=function(e){if(e.preventDefault(),Se.showSuccess("Rejected"),a.state.productName&&a.state.displayName&&a.state.servingTimeInMins&&a.state.priority&&a.state.iconUrl){var t={id:a.state.id,active:a.state.active,onlineBooking:a.state.onlineBooking,showRecent:a.state.showRecent,productName:a.state.productName,displayName:a.state.displayName,servingTimeInMins:a.state.servingTimeInMins,priority:a.state.priority,iconUrl:a.state.iconUrl,tagUrl:a.state.tagUrl,helpTextImage:a.state.helpTextImage,helpText:a.state.helpText};Ze.updateProduct(t).then(function(e){De(e),a.cancel()})}else Se.showError("Missing required fields")},a.cancel=function(e){"yes"==localStorage.getItem("fromSubmit")?a.props.history.push("/resubmit-dataentry"):a.props.history.push("/dataentry")},a.onChange=function(e){var t=e.target.value.trim();!t.includes("@")&&!t.includes("$")&&!t.includes("&")&&("firstName"==e.target.name||"middleName"==e.target.name||"lastName"==e.target.name?/^[a-zA-Z ]+$/.test(e.target.value)&&a.setState(Object(E.a)({},e.target.name,e.target.value)):a.setState(Object(E.a)({},e.target.name,e.target.value))),"altContactNumber"==e.target.name&&e.target.value.length>10&&a.setState({altContactNumber:e.target.value.substring(0,10)}),("title"==e.target.name&&"Ms"==e.target.value||"Mrs"==e.target.value)&&a.setState({gender:"F"}),"title"==e.target.name&&"Mr"==e.target.value&&a.setState({gender:"M"}),0==e.target.value.length&&a.setState({firstName:"",middleName:"",lastName:""})},a.onChangeDob=function(e){(e.target.value&&e.target.value.split("-")[0]).length>4||a.setState(Object(E.a)({},e.target.name,e.target.value))},a.state={txnId:"",mobileNumber:"",poiNumber:"",poiType:"",title:"",gender:"",dob:"",rejectedReasons:"",approveLoader:!1,approveDone:!1,approveButton:!0,loginId:"",firstName:"",middleName:"",lastName:"",altContactNumber:"",propMobile:"",emailid:"",address1:"",address2:"",address3:"",customerImageUrl:"",presentAddress:"",pefImageUrl:"",comment:"",loading:!0},a.updateLocalActList=a.updateLocalActList.bind(Object(D.a)(a)),a.onChange=a.onChange.bind(Object(D.a)(a)),a.skipThisVerify=a.skipThisVerify.bind(Object(D.a)(a)),a.loadOneTransection=a.loadOneTransection.bind(Object(D.a)(a)),a.myCallback=a.myCallback.bind(Object(D.a)(a)),a.slideRef=r.a.createRef(),a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"loadOneTransection",value:function(){var e=this,t=localStorage.getItem("dataEntryId");if(null==t)this.cancel();else{Ze.getOneDataEntry(t).then(function(t){var a=De(t).result,n="";!a||"Ms"!=a.title&&"Mrs"!=a.title||(n="F"),a&&"Mr"==a.title&&(n="M");var r="";a&&a.rejectedReasons&&(r=a.rejectedReasons),a&&e.setState({mobileNumber:a.mobileNumber,poiNumber:a.poiNumber,poiType:a.poiType,customerImageUrl:a.customerImageUrl,customerSignatureUrl:a.customerSignatureUrl,poiBackImageUrl:a.poiBackImageUrl,poiFrontImageUrl:a.poiFrontImageUrl,retailerSignatureUrl:a.retailerSignatureUrl,pefImageUrl:a.pefImageUrl,rejectedReasons:r,title:a.title,gender:n,firstName:a.firstName,altContactNumber:a.altContactNumber,emailid:a.emailid,presentAddress:a.presentAddress}),e.setState({loading:!1})});var a=JSON.parse(localStorage.getItem("userDetails"));this.setState({loginId:a.loginId}),Ze.getStaticData("DE").then(function(t){var a=De(t);e.setState({propertiesName:a.result&&a.result.screenFields&&a.result.screenFields[0].fields})})}}},{key:"componentDidMount",value:function(){this.loadOneTransection(),localStorage.setItem("lastUrl","data-edit"),document.getElementById("addressone")&&(document.getElementById("addressone").style.fontSize="12px"),document.getElementById("addresstwo")&&(document.getElementById("addresstwo").style.fontSize="12px"),document.getElementById("addressthree")&&(document.getElementById("addressthree").style.fontSize="12px"),document.getElementById("presentAddress")&&(document.getElementById("presentAddress").style.fontSize="12px"),document.getElementById("rejectedReasons")&&(document.getElementById("rejectedReasons").style.fontSize="12px")}},{key:"render",value:function(){var e,t=[];this.state.poiFrontImageUrl&&t.push({img:""+this.state.poiFrontImageUrl,title:"POI Front Image",author:"Front Image",featured:!0}),this.state.customerImageUrl&&t.push({img:""+this.state.customerImageUrl,title:"Customer Image",author:"Customer Image",featured:!0}),this.state.poiBackImageUrl&&t.push({img:""+this.state.poiBackImageUrl,title:"POI Back Image",author:"Back Image",featured:!0}),this.state.customerSignatureUrl&&t.push({img:""+this.state.customerSignatureUrl,title:"Customer Signature",author:"Customer Signature",featured:!0}),this.state.retailerSignatureUrl&&t.push({img:""+this.state.retailerSignatureUrl,title:"Retailer Signature",author:"Retailer Signature",featured:!0}),this.state.pefImageUrl&&t.push({img:this.state.pefImageUrl,title:"PEF Image",author:"PEF Image",featured:!0});var a={myCallback:this.myCallback,startDate:this.state.dob,endDate:""};return this.state.loading?r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement("br",null),r.a.createElement(he.a,{variant:"h6"},"Loading...please wait.")):r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement(he.a,{variant:"h6",style:an.textStyle},"Data Entry Details"),r.a.createElement(Oe.a,{container:!0,className:"flexGrow",spacing:1},r.a.createElement(Oe.a,{item:!0,xs:12,sm:8,style:{overflow:"scroll"}},r.a.createElement(Mt.a,{style:{paddingLeft:"5px",paddingRight:"5px",height:"80vh",width:"135vh"}},r.a.createElement(Na,{imageDetails:{imageDetails:t,slideRef:this.slideRef}}))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:4},r.a.createElement(Mt.a,{style:{paddingLeft:"20px",paddingRight:"20px",paddingBottom:"5px"}},r.a.createElement(he.a,{variant:"body1",style:an.textStyle},r.a.createElement("b",null,"Update User Details")),r.a.createElement("form",{id:"dataentryform",style:an.formContainer},r.a.createElement(Oe.a,{spacing:1,container:!0,direction:"row"},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Mobile No",fullWidth:!0,disabled:!0,name:"mobileNumber",value:this.state.mobileNumber,onChange:this.onChange})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{type:"number",label:"Alternate Contact No",value:this.state.altContactNumber,fullWidth:!0,name:"altContactNumber",onChange:this.onChange}))),r.a.createElement(Oe.a,{spacing:1,container:!0,direction:"row"},r.a.createElement(Oe.a,{item:!0,xs:12,sm:12},r.a.createElement(Ie.a,{label:"Email id",fullWidth:!0,name:"emailid",value:this.state.emailid,onChange:this.onChange}))),r.a.createElement(Oe.a,{spacing:1,container:!0,direction:"row"},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:an.selectStyle},r.a.createElement(we.a,{htmlFor:"gender"},"POI Type"),r.a.createElement(Lt.a,{value:this.state.poiType,name:"poiType",onChange:this.onChange},r.a.createElement(_t.a,{value:"NIC"},"NIC"),r.a.createElement(_t.a,{value:"DL"},"DL"),r.a.createElement(_t.a,{value:"PASSPORT"},"PASSPORT")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"POI Number",fullWidth:!0,name:"poiNumber",value:this.state.poiNumber,onChange:this.onChange}))),r.a.createElement(Oe.a,{spacing:1,container:!0,direction:"row"},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:an.selectStyle},r.a.createElement(we.a,{htmlFor:"title"},"Title"),r.a.createElement(Lt.a,{value:this.state.title,name:"title",onChange:this.onChange},r.a.createElement(_t.a,{value:"Mr"},"Mr"),r.a.createElement(_t.a,{value:"Ms"},"Ms"),r.a.createElement(_t.a,{value:"Mrs"},"Mrs")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"First Name",value:this.state.firstName,required:!0,fullWidth:!0,name:"firstName",onChange:this.onChange}))),r.a.createElement(Oe.a,{spacing:1,container:!0,direction:"row"},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Middle Name",value:this.state.middleName,fullWidth:!0,name:"middleName",onChange:this.onChange})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Last Name",value:this.state.lastName,fullWidth:!0,name:"lastName",onChange:this.onChange}))),r.a.createElement(Oe.a,{spacing:1,container:!0,direction:"row"},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Xa,{callbackFromParent:a})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:an.selectStyle},r.a.createElement(we.a,{htmlFor:"gender"},"Gender"),r.a.createElement(Lt.a,{value:this.state.gender,name:"gender",onChange:this.onChange},r.a.createElement(_t.a,{value:"M"},"Male"),r.a.createElement(_t.a,{value:"F"},"Female"))))),r.a.createElement(Oe.a,{spacing:1,container:!0,direction:"row"},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(we.a,{style:{fontSize:"12px"}},"Present Address"),r.a.createElement("div",{id:"presentAddress",style:an.MuiTextField},this.state.presentAddress," ")),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{id:"addressone",label:"Address 1",value:this.state.address1,fullWidth:!0,name:"address1",onChange:this.onChange}))),r.a.createElement(Oe.a,{spacing:1,container:!0,direction:"row"},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{id:"addresstwo",label:"Address 2",value:this.state.address2,fullWidth:!0,name:"address2",onChange:this.onChange})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{id:"addressthree",label:"Address 3",value:this.state.address3,fullWidth:!0,name:"address3",onChange:this.onChange}))),r.a.createElement(Oe.a,{spacing:1,container:!0,direction:"row"},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(we.a,{style:{fontSize:"12px"}},"Rejected Reasons"),r.a.createElement("div",{id:"rejectedReasons",style:an.MuiTextField},this.state.rejectedReasons," ")),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{multiline:!0,variyant:!0,rows:2,value:this.state.comment,label:"Comments",fullWidth:!0,margin:"none",name:"comment",onChange:this.onChange}))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(Oe.a,(e={container:!0,spacing:24,style:{paddingTop:"4px"}},Object(E.a)(e,"container",!0),Object(E.a)(e,"direction","row"),Object(E.a)(e,"justify","center"),Object(E.a)(e,"alignItems","center"),e),this.state.approveLoader?r.a.createElement(Aa.a,null):"",this.state.approveDone?r.a.createElement(ke.a,{style:{marginLeft:"20px"},variant:"outlined",color:"primary"}," ",r.a.createElement(Ma.a,{color:"primary"})," Saved & Loading Next"):"",this.state.approveButton?r.a.createElement(ke.a,{variant:"contained",color:"primary",style:{marginLeft:"20px"},onClick:this.submitDataEntry},"Submit"):"",r.a.createElement(ke.a,{variant:"contained",color:"secondary",style:{marginLeft:"20px",backgroundColor:"#33691e"},onClick:this.skipThisVerify}," SKIP "),r.a.createElement(ke.a,{variant:"contained",color:"default",style:{marginLeft:"20px"},onClick:this.cancel},"Back to Listing"))))))),r.a.createElement("div",null))}}]),t}(r.a.Component),an={formContainer:{display:"flex",flexFlow:"row wrap"},textStyle:{display:"flex",justifyContent:"center"},imgStyle:{display:"flex"},selectStyle:{minWidth:"100%",marginBottom:"10px"},MuiTextField:{overflowY:"scroll",fontSize:"12px",maxHeight:"50px"},footerButton:{position:"fixed",left:0,bottom:"20px",width:"100%",textAlign:"right"}},nn=tn,rn=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).onChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value)),"mobile"==e.target.name&&e.target.value.length>10&&a.setState({mobile:e.target.value.substring(0,10)}),"sim"==e.target.name&&e.target.value.length>20&&a.setState({sim:e.target.value.substring(0,20)})},a.validateUploadFile=function(e){var t=e.name.toString();if(/[^a-zA-Z0-9\.\-\_ ]/.test(t))return Se.showError("File name can contain only alphanumeric characters including space and dots"),!1;if("image/png"==e.type||"image/jpeg"==e.type){var a=e.size/1e3;if(a>=100&&a<=2048){var n=t.split(".").pop();return Object.defineProperty(e,"name",{writable:!0,value:la()(e.name)+"."+n}),e}Se.showError("File size should be grater than 100KB and less than 2MB")}else Se.showError("Only png and jpeg file allowd.");return!1},a.onChangeFileUpload=function(e){console.log(e.target.files[0]),a.validateUploadFile(e.target.files[0])?a.setState(Object(E.a)({},e.target.name,e.target.files[0])):e.target.value=null},a.onUploadFiles=function(){if(a.state.pef_image)if(a.state.poi_front_image){a.setState({uploadFlag:!1,uploadLoader:!0});var e=new FormData;e.append("pefImage",a.state.pef_image),e.append("poiFrontImage",a.state.poi_front_image),a.state.poi_back_image&&e.append("poiBackImage",a.state.poi_back_image),e.append("mobileNumber",a.state.mobile),e.append("simNumber",a.state.sim),e.append("deviceId",localStorage.getItem("deviceId".toString())),Ze.uploadDistrubuter(e).then(function(e){var t=De(e);a.setState({uploadResponse:t.message,uploadLoader:!1})})}else Se.showError("Please select a poi front image");else Se.showError("Please select a PEF image")},a.state={products:[],mobile:"",sim:"",txnId:"",user_image:!1,user_image_upload:!1,user_signature_loader:!1,user_signature_upload:!1,retailer_signature_loader:!1,uploadFlag:!1,poi_front_image_loader:!1,poi_front_image_upload:!1,poi_back_image_loader:!1,poi_back_image_upload:!1,pef_image_loader:!1,pef_image_upload:!1,pef_image_response:!1,poi_front_image_response:!1,poi_back_image_response:!1,numberFound:!1,uploadResponse:"",uploadLoader:!1},a.loadProductList=a.loadProductList.bind(Object(D.a)(a)),a.onChange=a.onChange.bind(Object(D.a)(a)),a.searchOnDB=a.searchOnDB.bind(Object(D.a)(a)),a.onUploadFiles=a.onUploadFiles.bind(Object(D.a)(a)),a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){}},{key:"loadProductList",value:function(){var e=this,t=(new Date).getTime(),a={zone:"West 1",startDate:t-2592e5,endDate:t,type:"NEXT",noOfRecords:20};Ze.listDocs(a).then(function(t){var a=De(t);a.result&&a.result.activationList&&e.setState({products:a.result.activationList})})}},{key:"searchOnDB",value:function(){var e=this;window.localStorage.setItem("deviceId",(new Date).getTime().toString()),document.getElementById("uploadform").reset(),this.setState({uploadResponse:"",pef_image:null,poi_front_image:null,poi_back_image:null});var t={mobileNumber:this.state.mobile,simNumber:this.state.sim};Ze.searchDistributer(t).then(function(t){var a=De(t);"ok"==a.message&&200==a.status?(e.setState({nic:a.result.nic,numberFound:!0,ftaDate:a.result.ftaDate,uploadFlag:!0}),e.setState({sim:a.result.simNumber})):e.setState({numberFound:!1})}),document.getElementById("uploadform").reset(),this.setState({user_image_upload:!1,user_signature_upload:!1,uploadFlag:!1}),this.setState({poi_front_image_upload:!1,poi_back_image_upload:!1,pef_image_upload:!1})}},{key:"handleSubmit",value:function(e){e.preventDefault(),e.target.reset()}},{key:"render",value:function(){var e,t,a,n=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement(Mt.a,{style:{padding:"40px"}},r.a.createElement(Ne.a,null,r.a.createElement("form",{onSubmit:function(){return n.searchOnDB(n.state.searchby)}},r.a.createElement(Oe.a,(t={spacing:1,container:!0},Object(E.a)(t,"container",!0),Object(E.a)(t,"direction","row"),Object(E.a)(t,"justify","right"),Object(E.a)(t,"alignItems","center"),t),r.a.createElement(Oe.a,{item:!0,xs:12,sm:7},r.a.createElement(he.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},"Distributor document upload")),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3,alignItems:"flex-end",alignContent:"flex-end",justify:"flex-end"},r.a.createElement(Ie.a,(e={type:"number",value:this.state.mobile,label:"Mobile No.",style:{width:"100%"},name:"Search by Mobile No."},Object(E.a)(e,"name","mobile"),Object(E.a)(e,"onChange",this.onChange),e))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:1,alignItems:"flex-end",alignContent:"flex-end",justify:"flex-end"},r.a.createElement(ke.a,{type:"button",onClick:function(){return n.searchOnDB()},variant:"contained",style:{marginLeft:"20px"}},"Search")))),r.a.createElement("br",null),this.state.numberFound?r.a.createElement(Mt.a,{style:{padding:"20px"}},r.a.createElement(Oe.a,{spacing:5,alignItems:"center",style:ln.textStyle,container:!0,direction:"row"},r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},"Mobile No.: ",r.a.createElement("b",null," ",this.state.mobile," ")),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},"Sim No.:  ",r.a.createElement("b",null,this.state.sim,"  ")),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},"NIC: ",r.a.createElement("b",null," ",this.state.nic)),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},"FTA Date: ",r.a.createElement("b",null," ",this.state.ftaDate)))):"",r.a.createElement("br",null),r.a.createElement("form",{id:"uploadform",onSubmit:this.handleSubmit.bind(this)},r.a.createElement(Mt.a,{style:{padding:"20px"}},r.a.createElement(Oe.a,{spacing:1,style:ln.textStyle,justify:"flex-end",container:!0,direction:"row"},r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(we.a,{htmlFor:"gender",required:!0},"PEF Image"),r.a.createElement("input",{id:"pef_image_file",disabled:!this.state.uploadFlag,type:"file",name:"pef_image",onChange:this.onChangeFileUpload})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(we.a,{htmlFor:"gender",required:!0},"POI Front Image"),r.a.createElement("input",{id:"poi_front_image_file",disabled:!this.state.uploadFlag,type:"file",name:"poi_front_image",onChange:this.onChangeFileUpload})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(we.a,{htmlFor:"gender"},"POI Back Image"),r.a.createElement("input",{id:"poi_back_image_file",disabled:!this.state.uploadFlag,type:"file",name:"poi_back_image",onChange:this.onChangeFileUpload})),r.a.createElement(Oe.a,(a={item:!0,xs:12},Object(E.a)(a,"item",!0),Object(E.a)(a,"sm",1),a),this.state.uploadFlag?r.a.createElement(ke.a,{onClick:function(){return n.onUploadFiles()},variant:"contained",color:"primary",style:{marginLeft:"20px"}},"Submit"):r.a.createElement(ke.a,{disabled:!0,variant:"contained",color:"primary",style:{marginLeft:"20px"}},"Submit")),r.a.createElement(Oe.a,{item:!0,xs:12,sm:2,style:{textAlign:"center"}},this.state.uploadLoader?r.a.createElement(Aa.a,null):"")),r.a.createElement("br",null),r.a.createElement(Oe.a,{alignItems:"center",style:ln.textStyle,container:!0,direction:"row"},r.a.createElement(Oe.a,{style:{textAlign:"center"},item:!0,xs:12,sm:12},r.a.createElement("span",{style:{fontSize:"18px"}}," ",r.a.createElement("b",null," ",this.state.uploadResponse," ")," ")))))),r.a.createElement("br",null),"  ",r.a.createElement("br",null),"  ",r.a.createElement("br",null)))}}]),t}(r.a.Component),ln={formContainer:{display:"flex",flexFlow:"row wrap"},textStyle:{display:"flex",justifyContent:"center"},imgStyle:{display:"flex"},selectStyle:{minWidth:"100%",marginBottom:"10px"},show:{display:"block"},hide:{display:"node"}},sn=rn,on=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).onChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value)),"mobile"==e.target.name&&e.target.value.length>10&&a.setState({mobile:e.target.value.substring(0,10)}),"sim"==e.target.name&&e.target.value.length>20&&a.setState({sim:e.target.value.substring(0,20)})},a.validateUploadFile=function(e){var t=e.name.toString();if(/[^a-zA-Z0-9\.\-\_ ]/.test(t))return Se.showError("File name can contain only alphanumeric characters including space and dots"),!1;if("image/png"==e.type||"image/jpeg"==e.type){var a=e.size/1e3;if(a>=100&&a<=2048){var n=t.split(".").pop();return Object.defineProperty(e,"name",{writable:!0,value:la()(e.name)+"."+n}),e}Se.showError("File size should be grater than 100KB and less than 2MB")}else Se.showError("Only png and jpeg file allowd.");return!1},a.onChangeFileUpload=function(e){console.log(e.target.files[0]),a.validateUploadFile(e.target.files[0])?a.setState(Object(E.a)({},e.target.name,e.target.files[0])):e.target.value=null},a.onUploadFiles=function(){if(a.state.pef_image)if(a.state.poi_front_image){a.setState({uploadFlag:!1,uploadLoader:!0});var e=new FormData;e.append("pefImage",a.state.pef_image),e.append("poiFrontImage",a.state.poi_front_image),a.state.poi_back_image&&e.append("poiBackImage",a.state.poi_back_image),e.append("txnId",a.state.txnId),e.append("deviceId",localStorage.getItem("deviceId".toString())),Ze.uploadDistrubuterResubmit(e).then(function(e){var t=De(e);a.setState({uploadResponse:t.message,uploadLoader:!1})})}else Se.showError("Please select a poi front image");else Se.showError("Please select a PEF image")},a.state={products:[],mobile:"",sim:"",txnId:"",poiType:"",poiNumber:"",user_image:!1,user_image_upload:!1,user_signature_loader:!1,user_signature_upload:!1,retailer_signature_loader:!1,uploadFlag:!1,poi_front_image_loader:!1,poi_front_image_upload:!1,poi_back_image_loader:!1,poi_back_image_upload:!1,pef_image_loader:!1,pef_image_upload:!1,pef_image_response:!1,poi_front_image_response:!1,poi_back_image_response:!1,numberFound:!1,uploadResponse:"",uploadLoader:!1},a.loadProductList=a.loadProductList.bind(Object(D.a)(a)),a.onChange=a.onChange.bind(Object(D.a)(a)),a.searchOnDB=a.searchOnDB.bind(Object(D.a)(a)),a.onUploadFiles=a.onUploadFiles.bind(Object(D.a)(a)),a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){}},{key:"loadProductList",value:function(){var e=this,t=(new Date).getTime(),a={zone:"West 1",startDate:t-2592e5,endDate:t,type:"NEXT",noOfRecords:20};Ze.listDocs(a).then(function(t){var a=De(t);a.result&&a.result.activationList&&e.setState({products:a.result.activationList})})}},{key:"searchOnDB",value:function(){var e=this;window.localStorage.setItem("deviceId",(new Date).getTime().toString()),document.getElementById("uploadform").reset(),this.setState({uploadResponse:"",pef_image:null,poi_front_image:null,poi_back_image:null});var t={mobileNumber:this.state.mobile};Ze.searchDistributerResubmit(t).then(function(t){var a=De(t);"ok"==a.message&&200==a.status?(e.setState({nic:a.result.nic,numberFound:!0,ftaDate:a.result.ftaDate,uploadFlag:!0}),e.setState({txnId:a.result.transactionId}),e.setState({sim:a.result.simNumber}),e.setState({poiType:a.result.poiType,poiNumber:a.result.poiNumber})):e.setState({numberFound:!1})}),document.getElementById("uploadform").reset(),this.setState({user_image_upload:!1,user_signature_upload:!1,uploadFlag:!1}),this.setState({poi_front_image_upload:!1,poi_back_image_upload:!1,pef_image_upload:!1})}},{key:"handleSubmit",value:function(e){e.preventDefault(),e.target.reset()}},{key:"render",value:function(){var e,t,a,n=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement(Mt.a,{style:{padding:"40px"}},r.a.createElement(Ne.a,null,r.a.createElement("form",{onSubmit:function(){return n.searchOnDB(n.state.searchby)}},r.a.createElement(Oe.a,(t={spacing:1,container:!0},Object(E.a)(t,"container",!0),Object(E.a)(t,"direction","row"),Object(E.a)(t,"justify","right"),Object(E.a)(t,"alignItems","center"),t),r.a.createElement(Oe.a,{item:!0,xs:12,sm:7},r.a.createElement(he.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},"Distributor Resubmit")),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3,alignItems:"flex-end",alignContent:"flex-end",justify:"flex-end"},r.a.createElement(Ie.a,(e={type:"number",value:this.state.mobile,label:"Mobile No.",style:{width:"100%"},name:"Search by Mobile No."},Object(E.a)(e,"name","mobile"),Object(E.a)(e,"onChange",this.onChange),e))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:1,alignItems:"flex-end",alignContent:"flex-end",justify:"flex-end"},r.a.createElement(ke.a,{type:"button",onClick:function(){return n.searchOnDB()},variant:"contained",style:{marginLeft:"20px"}},"Search")))),r.a.createElement("br",null),this.state.numberFound?r.a.createElement(Mt.a,{style:{padding:"20px"}},r.a.createElement(Oe.a,{spacing:5,alignItems:"center",style:cn.textStyle,container:!0,direction:"row"},r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},"Mobile No.: ",r.a.createElement("b",null," ",this.state.mobile," ")),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},"Sim No.:  ",r.a.createElement("b",null,this.state.sim,"  ")),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},this.state.poiType," : ",r.a.createElement("b",null," ",this.state.poiNumber)),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},"FTA Date: ",r.a.createElement("b",null," ",this.state.ftaDate)))):"",r.a.createElement("br",null),r.a.createElement("form",{id:"uploadform",onSubmit:this.handleSubmit.bind(this)},r.a.createElement(Mt.a,{style:{padding:"20px"}},r.a.createElement(Oe.a,{spacing:1,style:cn.textStyle,justify:"flex-end",container:!0,direction:"row"},r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(we.a,{htmlFor:"gender",required:!0},"PEF Image"),r.a.createElement("input",{id:"pef_image_file",disabled:!this.state.uploadFlag,type:"file",name:"pef_image",onChange:this.onChangeFileUpload})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(we.a,{htmlFor:"gender",required:!0},"POI Front Image"),r.a.createElement("input",{id:"poi_front_image_file",disabled:!this.state.uploadFlag,type:"file",name:"poi_front_image",onChange:this.onChangeFileUpload})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(we.a,{htmlFor:"gender"},"POI Back Image"),r.a.createElement("input",{id:"poi_back_image_file",disabled:!this.state.uploadFlag,type:"file",name:"poi_back_image",onChange:this.onChangeFileUpload})),r.a.createElement(Oe.a,(a={item:!0,xs:12},Object(E.a)(a,"item",!0),Object(E.a)(a,"sm",1),a),this.state.uploadFlag?r.a.createElement(ke.a,{onClick:function(){return n.onUploadFiles()},variant:"contained",color:"primary",style:{marginLeft:"20px"}},"Submit"):r.a.createElement(ke.a,{disabled:!0,variant:"contained",color:"primary",style:{marginLeft:"20px"}},"Submit")),r.a.createElement(Oe.a,{item:!0,xs:12,sm:2,style:{textAlign:"center"}},this.state.uploadLoader?r.a.createElement(Aa.a,null):"")),r.a.createElement("br",null),r.a.createElement(Oe.a,{alignItems:"center",style:cn.textStyle,container:!0,direction:"row"},r.a.createElement(Oe.a,{style:{textAlign:"center"},item:!0,xs:12,sm:12},r.a.createElement("span",{style:{fontSize:"18px"}}," ",r.a.createElement("b",null," ",this.state.uploadResponse," ")," ")))))),r.a.createElement("br",null),"  ",r.a.createElement("br",null),"  ",r.a.createElement("br",null)))}}]),t}(r.a.Component),cn={formContainer:{display:"flex",flexFlow:"row wrap"},textStyle:{display:"flex",justifyContent:"center"},imgStyle:{display:"flex"},selectStyle:{minWidth:"100%",marginBottom:"10px"},show:{display:"block"},hide:{display:"node"}},mn=on,un=x.a.create({baseURL:_}),dn=a(167),pn=a.n(dn),gn=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).addProduct=function(e){console.log(a.props),a.props.history.push("/pack-add")},a.addProduct=a.addProduct.bind(Object(D.a)(a)),a.editProduct=a.editProduct.bind(Object(D.a)(a)),a.convertBool=a.convertBool.bind(Object(D.a)(a)),a.state={products:[]},a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.loadPackList(),localStorage.setItem("lastUrl","packs")}},{key:"loadPackList",value:function(){var e=this;Ue.listPack({allPacks:!0,portal:!0}).then(function(t){var a=De(t);console.log(a),a&&a.result&&e.setState({products:a.result.data})})}},{key:"editProduct",value:function(e){window.localStorage.removeItem("selectedProductId"),window.localStorage.setItem("selectedProductId",e),this.props.history.push("/pack-edit")}},{key:"convertBool",value:function(e){return e?"Yes":"No"}},{key:"dateFormat",value:function(e){return Yt.utc(e).format("DD-MM-YYYY HH:mm:ss A")}},{key:"render",value:function(){var e,t=this;return console.log(this.props,"PROPS"),r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement(Mt.a,{style:{padding:"10px",overflow:"auto"}},r.a.createElement(he.a,{variant:"h5",style:{flex:0}},"Recharge Pack"),r.a.createElement(Oe.a,(e={container:!0,spacing:24},Object(E.a)(e,"container",!0),Object(E.a)(e,"direction","row"),Object(E.a)(e,"justify","flex-end"),e),r.a.createElement(ke.a,{variant:"contained",color:"secondry",onClick:function(){return t.addProduct()}},"Add Pack")),r.a.createElement(We.a,{size:"small","aria-label":"sticky table"},r.a.createElement(Ea.a,{style:{width:"",whiteSpace:"nowrap"},variant:"head"},r.a.createElement(fa.a,{variant:"head"},r.a.createElement(ba.a,{align:"center"},"Icon"),r.a.createElement(ba.a,{align:"center"},"Connection Type"),r.a.createElement(ba.a,{align:"center"},"Pack"),r.a.createElement(ba.a,{align:"center"},"Amount"),r.a.createElement(ba.a,{align:"center"},"Status"),r.a.createElement(ba.a,{align:"center"},"Validity Days"),r.a.createElement(ba.a,{align:"center"},"Validity Type"),r.a.createElement(ba.a,{align:"center"},"Description"),r.a.createElement(ba.a,{align:"center"},"Comment"),r.a.createElement(ba.a,{align:"center"},"Start Date/Time"),r.a.createElement(ba.a,{align:"center"},"End Date/Time"),r.a.createElement(ba.a,{align:"center"},"Display Type"))),r.a.createElement(va.a,{style:{width:"",whiteSpace:"nowrap"}},this.state.products?this.state.products.map(function(e){return r.a.createElement(fa.a,{key:e.productId,onClick:function(){return t.editProduct(e.productId)}},r.a.createElement(ba.a,{align:"center"}," ",r.a.createElement("img",{style:{width:"80px",height:"40px"},src:e.imageURL})," "),r.a.createElement(ba.a,{component:"th",scope:"row",className:"hidden"},e.connectionType),r.a.createElement(ba.a,{align:"center"},e.pack),r.a.createElement(ba.a,{align:"center"},e.amount),r.a.createElement(ba.a,{align:"center"},e.active?"Active":"Inactive"),r.a.createElement(ba.a,{align:"center"},e.validityDays),r.a.createElement(ba.a,{align:"center"},e.validityType),r.a.createElement(ba.a,{align:"center"},e.description),r.a.createElement(ba.a,{align:"center"},e.comment),r.a.createElement(ba.a,{align:"center"},t.dateFormat(e.startDate)),r.a.createElement(ba.a,{align:"center"},t.dateFormat(e.endDate)),r.a.createElement(ba.a,{align:"center"},e.displayType))}):r.a.createElement(pn.a,null)))))}}]),t}(r.a.Component),hn=Object(s.b)(function(e){return{packs:e.packs.packs.data}},{setPackLoaded:function(){return function(){var e=Object(da.a)(ua.a.mark(function e(t){var a,n;return ua.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={allPacks:!0,portal:!0},e.next=3,un.post("getPrepaidPacks",a);case 3:n=e.sent,t({type:"SET PACK LOADED",payload:n});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(gn),yn={PaperProps:{style:{maxHeight:224,width:250}}},En=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).myCallback=function(e,t){"START_DATE"===t?a.setState({startDate:new Date(e).getTime()}):"END_DATE"===t&&a.setState({endDate:new Date(e).getTime()})},a.zoneChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value)),e.target.value.includes("Select All")&&(a.setState({selectedZone:a.state.listofzones}),a.setState({selectAllzone:"Remove All"})),e.target.value.includes("Remove All")&&(a.setState({selectedZone:[]}),a.setState({selectAllzone:"Select All"}))},a.validateUploadFile=function(e){var t=e.name.toString();if(/[^a-zA-Z0-9\.\-\_ ]/.test(t))return Se.showError("File name can contain only alphanumeric characters including space and dots"),!1;if("image/png"==e.type||"image/jpeg"==e.type){var a=e.size/1e3;if(a>=100&&a<=2048){var n=t.split(".").pop();return Object.defineProperty(e,"name",{writable:!0,value:la()(e.name)+"."+n}),e}Se.showError("File size should be grater than 100KB and less than 2MB")}else Se.showError("Only png and jpeg file allowd.");return!1},a.onChangeFileUpload=function(e){var t,n;a.validateUploadFile(e.target.files[0])?a.setState((t={},Object(E.a)(t,e.target.name,e.target.files[0]),Object(E.a)(t,"showFileSize",e.target.files[0].size/1e3+"KB"),Object(E.a)(t,"imageURL",URL.createObjectURL(e.target.files[0])),t)):(a.setState((n={},Object(E.a)(n,e.target.name,null),Object(E.a)(n,"showFileSize",""),Object(E.a)(n,"imageURL",""),n)),e.target.value=null)},a.savePack=function(e){if(e.preventDefault(),a.state.amount&&a.state.displayOrder&&a.state.startDate&&a.state.endDate&&a.state.packType)if("detailsWithImage"!=a.state.displayType||a.state.file){a.state.startDate||(a.state.startDate=(new Date).getTime()),a.state.endDate||(a.state.endDate=(new Date).getTime());var t=new Date(a.state.startDate).getTime(),n=new Date(a.state.endDate).getTime();if(t!=n)if("detailsWithImage"!==a.state.displayType||a.state.file){var r=new FormData;"detailsWithImage"===a.state.displayType&&a.state.file&&r.append("file",a.state.file),new Date(a.state.startDate).getTime(),r.append("amount",a.state.amount),r.append("displayOrder",a.state.displayOrder),r.append("startDate",t),r.append("endDate",n),r.append("pack",a.state.packType),r.append("packType",a.state.packTypeitem),r.append("dataDay",a.state.dataDay),r.append("dataDayType",a.state.dataDayType),r.append("nightDay",a.state.nightDay),r.append("nightDayType",a.state.nightDayType),r.append("validityDays",a.state.validityDays),r.append("validityType",a.state.validityType),r.append("connectionType",a.state.connectionType),r.append("displayType",a.state.displayType),r.append("description",a.state.description),r.append("activationStatus",a.state.activationStatus),r.append("comment",a.state.comment),r.append("isFtr",a.state.isFtr),a.state.selectedZone.length&&r.append("zones",a.state.selectedZone.length?a.state.selectedZone:null),Ue.addPack(r).then(function(e){De(e),a.props.history.push("/packs")})}else Se.showError("Select the file.");else Se.showError("Start and end date time should not be same")}else Se.showError("Details With Image required to upload images");else Se.showError("Missing required fields")},a.cancel=function(e){a.props.history.push("/packs")},a.onChangeHandler=function(e){(new FormData).append("file",e.target.files[0])},a.onChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value)),"displayType"==e.target.name&&"detailsWithImage"==e.target.value&&a.setState({showFileBrowser:!0}),"displayType"==e.target.name&&"details"==e.target.value&&a.setState({showFileBrowser:!1})},a.onChangePack=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value));"Data"==e.target.value?a.setState({packtypevalue:["Anytime MB","Anytime GB","Nighttime MB","Nighttime GB"],showDescription:!1}):a.setState({showDescription:!0,packTypeitem:""})},a.state={activationStatus:"",amount:"",comment:"",connectionType:"",dataDay:"",dataDayType:"",description:"",displayOrder:"",displayType:"",endDate:new Date,imageURL:"",isFtr:"",nightDay:"",nightDayType:"",packType:"",startDate:new Date,userCategory:"",validityDays:"",validityType:"",file:null,packtypevalue:[],packTypeitem:"",showDescription:!1,listofzones:[],selectedZone:[],zone:"",showFileSize:"",selectAllzone:"Select All",showFileBrowser:!1},a.savePack=a.savePack.bind(Object(D.a)(a)),a.onChange=a.onChange.bind(Object(D.a)(a)),a.onChangePack=a.onChangePack.bind(Object(D.a)(a)),a.myCallback=a.myCallback.bind(Object(D.a)(a)),a.zoneChange=a.zoneChange.bind(Object(D.a)(a)),a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.setItem("lastUrl","packadd"),Ze.getStaticData("ADMIN").then(function(t){var a=De(t);e.setState({listofzones:a.result&&a.result.zones})})}},{key:"render",value:function(){var e,t,a,n={myCallback:this.myCallback,startDate:"",endDate:"",firstLavel:"Start Date",secondLavel:"End Date"};return console.log(this.state,"STATE_MATTERS"),r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement(Ne.a,{maxWidth:"sm"},r.a.createElement(Mt.a,{style:{padding:"20px"}},r.a.createElement(he.a,{variant:"h5",style:fn.textStyle},"Add Recharge Pack"),r.a.createElement("form",{style:fn.formContainer},r.a.createElement(Oe.a,{container:!0,spacing:2,direction:"row",justify:"flex-end"},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Amount",required:!0,type:"number",min:"1",max:"99999",fullWidth:!0,name:"amount",value:this.state.amount,onChange:this.onChange})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Pack Name",type:"",rows:2,fullWidth:!0,margin:"none",min:"1",max:"15",name:"comment",value:this.state.comment,onChange:this.onChange}))),r.a.createElement(Oe.a,{container:!0,spacing:2,direction:"row",justify:"flex-end"},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Description",fullWidth:!0,multiline:!0,variyant:!0,rows:2,margin:"normal",name:"description",value:this.state.description,onChange:this.onChange})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,style:{marginTop:"34px"}},r.a.createElement(At.a,{style:fn.selectStyle},r.a.createElement(we.a,{id:"demo-mutiple-name-label"},"Select Zone"),r.a.createElement(Lt.a,{labelId:"demo-mutiple-name-label",id:"demo-mutiple-name",multiple:!0,name:"selectedZone",value:this.state.selectedZone,onChange:this.zoneChange,input:r.a.createElement(He.a,null),MenuProps:yn},r.a.createElement(_t.a,{key:this.state.selectAllzone,value:this.state.selectAllzone},r.a.createElement("b",null," ",this.state.selectAllzone,"   ")),this.state.listofzones?this.state.listofzones.map(function(e){return r.a.createElement(_t.a,{key:e,value:e},e)}):"")))),r.a.createElement(Oe.a,{container:!0,spacing:2,direction:"row",justify:"flex-end"},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:fn.multiselect},r.a.createElement(we.a,{htmlFor:"Connection Type",required:!0},"Connection Type"),r.a.createElement(Lt.a,{name:"connectionType",value:this.state.connectionType,onChange:this.onChange},r.a.createElement(_t.a,{value:"prepaid"},"Prepaid"),r.a.createElement(_t.a,{value:"postpaid"},"Postpaid")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Display Order",required:!0,fullWidth:!0,type:"number",margin:"none",name:"displayOrder",value:this.state.displayOrder,onChange:this.onChange}))),r.a.createElement(ta,{callbackFromParent:n}),r.a.createElement("input",{type:"hidden",id:"startDateMili"}),r.a.createElement("input",{type:"hidden",id:"endDateMili"}),r.a.createElement(Oe.a,{container:!0,spacing:2,direction:"row",justify:"flex-end"},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:fn.multiselect},r.a.createElement(we.a,{required:!0,htmlFor:"Pack Type"},"Pack"),r.a.createElement(Lt.a,{name:"packType",value:this.state.packType,onChange:this.onChangePack},r.a.createElement(_t.a,{value:"Data"},"Data"),r.a.createElement(_t.a,{value:"Voice"},"Voice"),r.a.createElement(_t.a,{value:"Combo"},"Combo"),r.a.createElement(_t.a,{value:"IDD"},"IDD"),r.a.createElement(_t.a,{value:"SMS"},"SMS")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Description",min:"1",max:"99999",fullWidth:!0,name:"packTypeitem",value:this.state.packTypeitem,onChange:this.onChange}))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Description",min:"1",max:"99999",fullWidth:!0,name:"dataDay",value:this.state.dataDay,onChange:this.onChange})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Description",style:{marginLeft:"18px"},fullWidth:!0,margin:"none",name:"dataDayType",value:this.state.dataDayType,onChange:this.onChange})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Description",min:"1",max:"99999",fullWidth:!0,name:"nightDay",value:this.state.nightDay,onChange:this.onChange})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Description",style:{marginLeft:"18px"},fullWidth:!0,margin:"none",name:"nightDayType",value:this.state.nightDayType,onChange:this.onChange})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Validity Days",type:"number",min:"1",max:"99999",fullWidth:!0,name:"validityDays",value:this.state.validityDays,onChange:this.onChange})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:fn.selectStyle},r.a.createElement(we.a,{htmlFor:"Validity Type",required:!0},"Validity Type"),r.a.createElement(Lt.a,{name:"validityType",value:this.state.validityType,onChange:this.onChange},r.a.createElement(_t.a,{value:"Month"},"Month"),r.a.createElement(_t.a,{value:"Days"},"Days"),r.a.createElement(_t.a,{value:"Week"},"Week"),r.a.createElement(_t.a,{value:"Hours"},"Hours"),r.a.createElement(_t.a,{value:"Minutes"},"Minutes")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:fn.multiselect},r.a.createElement(we.a,{htmlFor:"Activation status",required:!0},"Status"),r.a.createElement(Lt.a,{name:"activationStatus",value:this.state.activationStatus,onChange:this.onChange},r.a.createElement(_t.a,{value:"true"},"Active"),r.a.createElement(_t.a,{value:"false"},"In Active")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:fn.multiselect},r.a.createElement(we.a,{htmlFor:"Activation status",required:!0},"FTR or Normal"),r.a.createElement(Lt.a,{name:"isFtr",value:this.state.isFtr,onChange:this.onChange},r.a.createElement(_t.a,{value:"true"},"FTR(First Time Recharge)"),r.a.createElement(_t.a,{value:"false"},"Normal")))),r.a.createElement(Oe.a,(e={container:!0,spacing:24},Object(E.a)(e,"container",!0),Object(E.a)(e,"direction","row"),Object(E.a)(e,"justify","flex-end"),e),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:fn.multiselect},r.a.createElement(we.a,{htmlFor:"display-type",required:!0},"Display Type"),r.a.createElement(Lt.a,{name:"displayType",value:this.state.displayType,onChange:this.onChange},r.a.createElement(_t.a,{value:"details"},"Details"),r.a.createElement(_t.a,{value:"detailsWithImage"},"Details with Image")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},this.state.showFileBrowser?r.a.createElement(At.a,{style:fn.multiselect},r.a.createElement("input",{style:{marginTop:"31px",marginLeft:"18px"},type:"file",name:"file",onChange:this.onChangeFileUpload})):"")),this.state.showFileBrowser?r.a.createElement(Oe.a,(t={container:!0,spacing:24},Object(E.a)(t,"container",!0),Object(E.a)(t,"direction","row"),Object(E.a)(t,"justify","center"),t),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},"Selected File Size: ",this.state.showFileSize,r.a.createElement("br",null)),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement("img",{title:"Preview Banner",style:{width:"200px",height:"100px"},src:this.state.imageURL}))):"",r.a.createElement(Oe.a,(a={container:!0,spacing:2},Object(E.a)(a,"container",!0),Object(E.a)(a,"direction","row"),Object(E.a)(a,"justify","center"),Object(E.a)(a,"alignItems","center"),a),r.a.createElement("br",null),"  ",r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement(ke.a,{variant:"contained",color:"primary",onClick:this.savePack},"Save"),r.a.createElement(ke.a,{variant:"contained",color:"secondary",style:{marginLeft:"150px"},onClick:this.cancel},"Cancel"))))))}}]),t}(r.a.Component),fn=(Qa={formContainer:{display:"flex",flexFlow:"row wrap"},textStyle:{display:"flex",justifyContent:"center"},input:{display:"none"}},Object(E.a)(Qa,"textStyle",{display:"flex",justifyContent:"center"}),Object(E.a)(Qa,"multiselect",{minWidth:"100%",marginBottom:"10px"}),Object(E.a)(Qa,"chips",{display:"flex",flexWrap:"wrap"}),Object(E.a)(Qa,"chip",{margin:3}),Object(E.a)(Qa,"selectStyle",{marginBottom:"0px",minWidth:255,maxWidth:255}),Qa),bn=En,vn={PaperProps:{style:{maxHeight:224,width:250}}},Sn=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).validateUploadFile=function(e){var t=e.name.toString();if(/[^a-zA-Z0-9\.\-\_ ]/.test(t))return Se.showError("File name can contain only alphanumeric characters including space and dots"),!1;if("image/png"==e.type||"image/jpeg"==e.type){var a=e.size/1e3;if(a>=100&&a<=2048){var n=t.split(".").pop();return Object.defineProperty(e,"name",{writable:!0,value:la()(e.name)+"."+n}),e}Se.showError("File size should be grater than 100KB and less than 2MB")}else Se.showError("Only png and jpeg file allowd.");return!1},a.onChangeFileUpload=function(e){var t,n;a.validateUploadFile(e.target.files[0])?a.setState((t={},Object(E.a)(t,e.target.name,e.target.files[0]),Object(E.a)(t,"showFileSize",e.target.files[0].size/1e3+"KB"),Object(E.a)(t,"imageURL",URL.createObjectURL(e.target.files[0])),t)):(a.setState((n={},Object(E.a)(n,e.target.name,null),Object(E.a)(n,"showFileSize",""),Object(E.a)(n,"imageURL",""),n)),e.target.value=null)},a.zoneChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value)),e.target.value.includes("Select All")&&(a.setState({selectedZone:a.state.listofzones}),a.setState({selectAllzone:"Remove All"})),e.target.value.includes("Remove All")&&(a.setState({selectedZone:[]}),a.setState({selectAllzone:"Select All"}))},a.getInitialData=Object(da.a)(ua.a.mark(function e(){var t,n;return ua.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("selectedProductId"),a.setState({loading:!0}),e.next=4,a.props.getPackById(t);case 4:n=e.sent,console.log("packRes:",n),n.payload&&n.payload.data&&n.payload.data.result&&a.setState(n.payload.data.result),a.setState({selectedZone:a.state.zones}),a.setState({loading:!1}),a.setState({activationStatus:a.state.active}),"detailsWithImage"==a.state.displayType&&a.setState({showFileBrowser:!0}),a.addPackTpe(a.state.pack);case 12:case"end":return e.stop()}},e)})),a.myCallback=function(e,t){"START_DATE"===t?a.setState({startDate:new Date(e).getTime()}):"END_DATE"===t&&a.setState({endDate:new Date(e).getTime()})},a.savePack=function(e){e.preventDefault(),a.state.startDate||(a.state.startDate=(new Date).getTime()),a.state.endDate||(a.state.endDate=(new Date).getTime());var t=new Date(a.state.startDate).getTime(),n=new Date(a.state.endDate).getTime();if(t!=n)if("detailsWithImage"!==a.state.displayType||a.state.file){var r=new FormData;"detailsWithImage"===a.state.displayType&&a.state.file&&r.append("file",a.state.file);var l=localStorage.getItem("selectedProductId");r.append("ProductId",l),r.append("amount",a.state.amount),r.append("displayOrder",a.state.displayOrder),r.append("startDate",t),r.append("endDate",n),r.append("pack",a.state.pack),r.append("packType",a.state.packType),r.append("dataDay",a.state.dataDay),r.append("dataDayType",a.state.dataDayType),r.append("nightDay",a.state.nightDay),r.append("nightDayType",a.state.nightDayType),r.append("validityDays",a.state.validityDays),r.append("validityType",a.state.validityType),r.append("connectionType",a.state.connectionType),r.append("displayType",a.state.displayType),r.append("description",a.state.description),r.append("activationStatus",a.state.activationStatus),r.append("comment",a.state.comment),r.append("isFtr",a.state.ftr),a.state.selectedZone.length&&r.append("zones",a.state.selectedZone.length?a.state.selectedZone:null),Ue.addPack(r).then(function(e){De(e),a.props.history.push("/packs")})}else Se.showError("Select the file.");else Se.showError("Start and end date time should not be same")},a.cancel=function(e){a.props.history.push("/packs")},a.onChangeHandler=function(e){var t=new FormData;t.append("file",e.target.files[0]);x.a.post("/SLRetailer/recharges/uploadRechargeImage",t,{headers:{"content-type":"multipart/form-data"}}).then(function(e){a.setState({imageURL:e.data.result})}).catch(function(e){console.log(e,"ERROR")})},a.addPackTpe=function(e){"Data"==e?a.setState({packtypevalue:["Anytime MB","Anytime GB","Nighttime MB","Nighttime GB"],showDescription:!1}):a.setState({showDescription:!0})},a.onChangePack=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value)),a.addPackTpe(e.target.value)},a.onChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value)),"displayType"==e.target.name&&"detailsWithImage"==e.target.value&&a.setState({showFileBrowser:!0}),"displayType"==e.target.name&&"details"==e.target.value&&a.setState({showFileBrowser:!1})},a.state={activationStatus:"",amount:"",comment:"",connectionType:"",dataDay:"",dataDayType:"",description:"",displayOrder:"",displayType:"",endDate:"",imageURL:"",ftr:"",nightDay:"",nightDayType:"",pack:"",packType:"",startDate:"",validityDays:"",validityType:"",packvalue:[],showDescription:!1,listofzones:[],selectedZone:[],zone:"",showFileSize:"",selectAllzone:"Select All",showFileBrowser:!1},a.savePack=a.savePack.bind(Object(D.a)(a)),a.onChange=a.onChange.bind(Object(D.a)(a)),a.myCallback=a.myCallback.bind(Object(D.a)(a)),a.onChangePack=a.onChangePack.bind(Object(D.a)(a)),a.addPackTpe=a.addPackTpe.bind(Object(D.a)(a)),a.zoneChange=a.zoneChange.bind(Object(D.a)(a)),a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getInitialData(),localStorage.setItem("lastUrl","editpacks"),Ze.getStaticData("ADMIN").then(function(t){var a=De(t);e.setState({listofzones:a.result&&a.result.zones})})}},{key:"render",value:function(){var e,t,a;console.log("STAte",this.state);var n={myCallback:this.myCallback,startDate:this.state.startDate,endDate:this.state.endDate,firstLavel:"Start Date",secondLavel:"End Date"};return console.log("dateparam",n),this.state.loading?r.a.createElement("div",null,"Loading"):r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement(Ne.a,{maxWidth:"sm"},r.a.createElement(Mt.a,{style:{padding:"20px"}},r.a.createElement(he.a,{variant:"h5",style:Dn.textStyle},"Edit Recharge Pack"),r.a.createElement("form",{style:Dn.formContainer},r.a.createElement(Oe.a,{container:!0,spacing:2,direction:"row",justify:"flex-end"},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Amount",required:!0,type:"number",min:"1",max:"99999",fullWidth:!0,name:"amount",value:this.state.amount,onChange:this.onChange})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Pack Name",type:"",rows:2,fullWidth:!0,margin:"none",min:"1",max:"15",name:"comment",value:this.state.comment,onChange:this.onChange}))),r.a.createElement(Oe.a,{container:!0,spacing:2,direction:"row",justify:"flex-end"},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Description",fullWidth:!0,multiline:!0,variyant:!0,rows:2,margin:"normal",name:"description",value:this.state.description,onChange:this.onChange})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,style:{marginTop:"34px"}},r.a.createElement(At.a,{style:Dn.selectStyle},r.a.createElement(we.a,{id:"demo-mutiple-name-label"},"Select Zone"),r.a.createElement(Lt.a,{labelId:"demo-mutiple-name-label",id:"demo-mutiple-name",multiple:!0,name:"selectedZone",value:this.state.selectedZone,onChange:this.zoneChange,input:r.a.createElement(He.a,null),MenuProps:vn},r.a.createElement(_t.a,{key:this.state.selectAllzone,value:this.state.selectAllzone},r.a.createElement("b",null," ",this.state.selectAllzone,"   ")),this.state.listofzones?this.state.listofzones.map(function(e){return r.a.createElement(_t.a,{key:e,value:e},e)}):"")))),r.a.createElement(Oe.a,{container:!0,spacing:2,direction:"row",justify:"flex-end"},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:Dn.multiselect},r.a.createElement(we.a,{htmlFor:"Connection Type",required:!0},"Connection Type"),r.a.createElement(Lt.a,{name:"connectionType",value:this.state.connectionType,onChange:this.onChange},r.a.createElement(_t.a,{value:"prepaid"},"Prepaid"),r.a.createElement(_t.a,{value:"postpaid"},"Postpaid")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Display Order",required:!0,fullWidth:!0,margin:"none",name:"displayOrder",value:this.state.displayOrder,onChange:this.onChange}))),r.a.createElement(ta,{callbackFromParent:n}),r.a.createElement("input",{type:"hidden",id:"startDateMili",value:n.startDate}),r.a.createElement("input",{type:"hidden",id:"endDateMili",value:n.endDate}),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:Dn.multiselect},r.a.createElement(we.a,{required:!0,htmlFor:"Pack Type"},"Pack"),r.a.createElement(Lt.a,{name:"pack",value:this.state.pack,onChange:this.onChangePack},r.a.createElement(_t.a,{value:"Data"},"Data"),r.a.createElement(_t.a,{value:"Voice"},"Voice"),r.a.createElement(_t.a,{value:"Combo"},"Combo"),r.a.createElement(_t.a,{value:"IDD"},"IDD"),r.a.createElement(_t.a,{value:"SMS"},"SMS")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Description",min:"1",max:"99999",fullWidth:!0,name:"packType",value:this.state.packType,onChange:this.onChange})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Description",min:"1",max:"99999",fullWidth:!0,name:"dataDay",value:this.state.dataDay,onChange:this.onChange})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Description",style:{marginLeft:"18px"},fullWidth:!0,margin:"none",name:"dataDayType",value:this.state.dataDayType,onChange:this.onChange})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Description",min:"1",max:"99999",fullWidth:!0,name:"nightDay",value:this.state.nightDay,onChange:this.onChange})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Description",style:{marginLeft:"18px"},fullWidth:!0,margin:"none",name:"nightDayType",value:this.state.nightDayType,onChange:this.onChange})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Ie.a,{label:"Validity Days",type:"number",min:"1",max:"99999",fullWidth:!0,name:"validityDays",value:this.state.validityDays,onChange:this.onChange})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:Dn.multiselect},r.a.createElement(we.a,{htmlFor:"Validity Type",required:!0},"Validity Type"),r.a.createElement(Lt.a,{name:"validityType",value:this.state.validityType,onChange:this.onChange},r.a.createElement(_t.a,{value:"Month"},"Month"),r.a.createElement(_t.a,{value:"Days"},"Days"),r.a.createElement(_t.a,{value:"Week"},"Week"),r.a.createElement(_t.a,{value:"Hours"},"Hours"),r.a.createElement(_t.a,{value:"Minutes"},"Minutes")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:Dn.multiselect},r.a.createElement(we.a,{htmlFor:"Activation status",required:!0},"Status"),r.a.createElement(Lt.a,{name:"activationStatus",value:this.state.activationStatus,onChange:this.onChange},r.a.createElement(_t.a,{value:"true"},"Active"),r.a.createElement(_t.a,{value:"false"},"In Active")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:Dn.multiselect},r.a.createElement(we.a,{htmlFor:"Activation status",required:!0},"FTR or Normal"),r.a.createElement(Lt.a,{name:"ftr",value:this.state.ftr,onChange:this.onChange},r.a.createElement(_t.a,{value:"true"},"FTR(First Time Recharge)"),r.a.createElement(_t.a,{value:"false"},"Normal")))),r.a.createElement(Oe.a,(e={container:!0,spacing:24},Object(E.a)(e,"container",!0),Object(E.a)(e,"direction","row"),Object(E.a)(e,"justify","flex-end"),e),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(At.a,{style:Dn.multiselect},r.a.createElement(we.a,{htmlFor:"display-type",required:!0},"Display Type"),r.a.createElement(Lt.a,{name:"displayType",value:this.state.displayType,onChange:this.onChange},r.a.createElement(_t.a,{value:"details"},"Details"),r.a.createElement(_t.a,{value:"detailsWithImage"},"Details with Image")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},this.state.showFileBrowser?r.a.createElement(At.a,{style:Dn.multiselect},r.a.createElement("input",{style:{marginTop:"31px",marginLeft:"18px"},type:"file",name:"file",onChange:this.onChangeFileUpload})):"")),this.state.showFileBrowser?r.a.createElement(Oe.a,(t={container:!0,spacing:24},Object(E.a)(t,"container",!0),Object(E.a)(t,"direction","row"),Object(E.a)(t,"justify","center"),t),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},"Selected File Size: ",this.state.showFileSize,r.a.createElement("br",null)),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement("img",{title:"Preview Banner",style:{width:"200px",height:"100px"},src:this.state.imageURL}))):"",r.a.createElement(Oe.a,(a={container:!0,spacing:2},Object(E.a)(a,"container",!0),Object(E.a)(a,"direction","row"),Object(E.a)(a,"justify","center"),Object(E.a)(a,"alignItems","center"),a),r.a.createElement("br",null),"  ",r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement(ke.a,{variant:"contained",color:"primary",onClick:this.savePack},"Save"),r.a.createElement(ke.a,{variant:"contained",color:"secondary",style:{marginLeft:"150px"},onClick:this.cancel},"Cancel"))))))}}]),t}(r.a.Component),Dn=(en={formContainer:{display:"flex",flexFlow:"row wrap"},textStyle:{display:"flex",justifyContent:"center"},input:{display:"none"}},Object(E.a)(en,"textStyle",{display:"flex",justifyContent:"center"}),Object(E.a)(en,"multiselect",{minWidth:"100%",marginBottom:"10px"}),Object(E.a)(en,"chips",{display:"flex",flexWrap:"wrap"}),Object(E.a)(en,"chip",{margin:3}),Object(E.a)(en,"selectStyle",{marginBottom:"0px",minWidth:255,maxWidth:255}),en),On=Object(s.b)(function(e){return{pack:e.packs.pack.data}},{editPackInfo:function(e){return function(){var t=Object(da.a)(ua.a.mark(function t(a){var n;return ua.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("ERROR",e),e.activationStatus=String(e.activationStatus),e.displayOrder=String(e.displayOrder),e.productId=String(e.productId),e.validityDays=String(e.validityDays),e.active=String(e.active),e.isFtr=String(e.ftr),t.next=10,un.post("updatePrepaidPack",e,C.getHeader());case 10:n=t.sent,a({type:"EDIT PACK INFO",payload:n}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.log(t.t0);case 17:case"end":return t.stop()}},t,null,[[0,14]])}));return function(e){return t.apply(this,arguments)}}()},getPackById:function(e){return function(){var t=Object(da.a)(ua.a.mark(function t(a){var n;return ua.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,un.get("?productId="+e,C.getHeader());case 3:return n=t.sent,t.abrupt("return",a({type:"GET_PACK_INFO_BY_ID",payload:n}));case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0,"ERRRR");case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()}})(Sn),wn={PaperProps:{style:{maxHeight:224,width:250}}},xn=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).zoneChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value)),e.target.value.includes("Select All")&&(a.setState({selectedZone:a.state.listofzones}),a.setState({selectAllzone:"Remove All"})),e.target.value.includes("Remove All")&&(a.setState({selectedZone:[]}),a.setState({selectAllzone:"Select All"}))},a.addProduct=function(e){console.log(a.props),a.props.history.push("/banner-add")},a.addProduct=a.addProduct.bind(Object(D.a)(a)),a.editProduct=a.editProduct.bind(Object(D.a)(a)),a.convertBool=a.convertBool.bind(Object(D.a)(a)),a.zoneChange=a.zoneChange.bind(Object(D.a)(a)),a.state={products:[],listofzones:[],selectedZone:[],zone:"",selectAllzone:"Select All"},a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.loadBannerList(),localStorage.setItem("lastUrl","banners"),Ze.getStaticData("ADMIN").then(function(t){var a=De(t);e.setState({listofzones:a.result&&a.result.zones})})}},{key:"loadBannerList",value:function(){var e=this,t={zones:this.state.selectedZone.length?this.state.selectedZone:null};Ue.getAllBanner(t).then(function(t){var a=De(t);console.log(a),a.result&&e.setState({products:a.result})})}},{key:"editProduct",value:function(e){window.localStorage.removeItem("selectedBannerId"),window.localStorage.setItem("selectedBannerId",e),this.props.history.push("/banner-edit")}},{key:"convertBool",value:function(e){return e?"Yes":"No"}},{key:"dateFormat",value:function(e){var t=new Date(e);return t.toLocaleDateString()+" "+t.toTimeString().substring(0,t.toTimeString().indexOf("GMT"))}},{key:"render",value:function(){var e=this;return console.log(this.props,"PROPS"),r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement(Mt.a,{style:{padding:"10px",overflow:"auto"}},r.a.createElement(Oe.a,Object(E.a)({syt:!0,container:!0,spacing:1,direction:"row",alignItems:"center"},"container",!0),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},"Banner Details")),r.a.createElement(Oe.a,{item:!0,xs:10,sm:3},r.a.createElement(At.a,{style:Cn.selectStyle},r.a.createElement(we.a,{id:"demo-mutiple-name-label"},"Select Zone"),r.a.createElement(Lt.a,{labelId:"demo-mutiple-name-label",id:"demo-mutiple-name",multiple:!0,name:"selectedZone",value:this.state.selectedZone,onChange:this.zoneChange,input:r.a.createElement(He.a,null),MenuProps:wn},r.a.createElement(_t.a,{key:this.state.selectAllzone,value:this.state.selectAllzone},r.a.createElement("b",null," ",this.state.selectAllzone,"   ")),this.state.listofzones?this.state.listofzones.map(function(e){return r.a.createElement(_t.a,{key:e,value:e},e)}):""))),r.a.createElement(Oe.a,{item:!0,xs:2,sm:1},r.a.createElement(ke.a,{type:"submit",onClick:function(){return e.loadBannerList()},variant:"contained",style:{marginLeft:"20px"}},"Search")),r.a.createElement(Oe.a,{item:!0,xs:2,sm:2,alignItems:"left"},r.a.createElement(ke.a,{variant:"contained",color:"primary",onClick:function(){return e.addProduct()}},"Add Banner"))),r.a.createElement(We.a,{size:"small","aria-label":"sticky table"},r.a.createElement(Ea.a,{style:{width:"",whiteSpace:"nowrap"},variant:"head"},r.a.createElement(fa.a,{variant:"head"},r.a.createElement(ba.a,{align:"center"},"Icon"),r.a.createElement(ba.a,{align:"center"},"Title"),r.a.createElement(ba.a,{align:"center"},"Banner Type"),r.a.createElement(ba.a,{align:"center"},"Active"),r.a.createElement(ba.a,{align:"center"},"Category Type"),r.a.createElement(ba.a,{align:"center"},"Publish Date"),r.a.createElement(ba.a,{align:"center"},"Expire Days"))),r.a.createElement(va.a,{style:{width:"",whiteSpace:"nowrap"}},this.state.products&&this.state.products?this.state.products.map(function(t){return r.a.createElement(fa.a,{key:t.productId,onClick:function(){return e.editProduct(t.id)}},r.a.createElement(ba.a,{align:"center"}," ",r.a.createElement("img",{style:{width:"100px",height:"50px"},src:t.imageURL})," "),r.a.createElement(ba.a,{align:"center"},t.title),r.a.createElement(ba.a,{align:"center"},t.bannerType),r.a.createElement(ba.a,{align:"center"},t.active?"Active":"Inactive"),r.a.createElement(ba.a,{align:"center"},t.categoryType),r.a.createElement(ba.a,{align:"center"},t.publishDate?new Date(t.publishDate).toString().substring(0,25):""),r.a.createElement(ba.a,{align:"center"},t.expireDate?new Date(t.expireDate).toString().substring(0,25):""))}):r.a.createElement(pn.a,null)))))}}]),t}(r.a.Component),Cn={tableStyle:{display:"flex",justifyContent:"center"},selectStyle:{marginBottom:"0px",minWidth:300,maxWidth:300}},kn=xn,jn=a(151),In=a.n(jn),Tn=a(135),Rn=a.n(Tn);function Fn(e){return r.a.createElement(he.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},e.children)}var Pn=a(512),Bn=a(508),Nn=a(509),An=a(279),Ln=a.n(An),Mn=Object(Be.a)(function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular}}});function _n(e){var t=Mn(),a=e.message;return console.log(a),r.a.createElement("div",{className:t.root},r.a.createElement(Pn.a,null,r.a.createElement(Bn.a,{expandIcon:r.a.createElement(Ln.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(he.a,{className:t.heading},"Response")),r.a.createElement(Nn.a,null,r.a.createElement("table",{style:{width:"none"}},r.a.createElement(Ea.a,null,r.a.createElement(fa.a,null,r.a.createElement(ba.a,null,"LaId"),r.a.createElement(ba.a,null,"Reason"))),r.a.createElement(va.a,null,a&&a.map(function(e){return r.a.createElement(fa.a,{key:e.name},r.a.createElement(ba.a,{align:"right"},e.laId),r.a.createElement(ba.a,{align:"right"},e.reason))}))))))}var zn=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).validateUploadFile=function(e){var t=e.name.toString();if(/[^a-zA-Z0-9\.\-\_ ]/.test(t))return Se.showError("File name can contain only alphanumeric characters including space and dots"),!1;var a=t.split(".").pop();if(console.log("File Extension: ",a),"xlsx"==a){var n=e.size/1e3;if(n>=5&&n<=2048)return Object.defineProperty(e,"name",{writable:!0,value:la()(e.name)+"."+a}),e;Se.showError("File size should be grater than 5KB and less than 2MB")}else Se.showError("Only xlsx file allow to upload");return!1},a.onChangeFileUpload=function(e){if(a.validateUploadFile(e.target.files[0]))return console.log(e.target.name),void a.setState(Object(E.a)({},e.target.name,e.target.files[0]));console.log("Not Valid file: ",e.target.name),document.getElementById(e.target.name).value=""},a.onChange=function(e){a.setState({searchby:e.target.value})},a.state={products:[],retailerOnboardExcelTemplatePath:"",retailerDeleteExcelTemplatePath:"",deletefile:"",searchby:"",retailerDetails:"",uploadResponse:"",deleteResponse:""},a.relailerOnboard=a.relailerOnboard.bind(Object(D.a)(a)),a.relailerDelete=a.relailerDelete.bind(Object(D.a)(a)),a.searchRetailer=a.searchRetailer.bind(Object(D.a)(a)),a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;Ze.getStaticData("ADMIN").then(function(t){var a=De(t);e.setState({listofzones:a.result&&a.result.zones})})}},{key:"relailerOnboard",value:function(){var e=this;if(console.log(this.state.uploadfile),this.state.uploadfile&&""!=document.getElementById("uploadfile").value){var t=localStorage.getItem("userDetails");t=t&&JSON.parse(t);var a=new FormData;a.append("file",this.state.uploadfile),Ue.uploadRetailer(a).then(function(t){var a=De(t);200==a.status&&"ok"==a.message&&Se.showSuccess("Agent On-Boarded successfully."),document.getElementById("uploadfile").value="",a.result&&a.result.rejectedAgents&&e.setState({uploadResponse:a.result.rejectedAgents})})}else Se.showError("Missing required file to upload")}},{key:"relailerDelete",value:function(){var e=this;if(this.state.deletefile&&""!=document.getElementById("deletefile").value){var t=localStorage.getItem("userDetails");t=t&&JSON.parse(t);var a=new FormData;a.append("file",this.state.deletefile),Ue.deleteRetailer(a).then(function(t){var a=De(t);200==a.status&&"ok"==a.message&&Se.showSuccess("Agent info deleted successfully."),document.getElementById("deletefile").value="",a.result&&a.result.rejectedAgents&&e.setState({deleteResponse:a.result.rejectedAgents})})}else Se.showError("Missing required file to upload")}},{key:"searchRetailer",value:function(){var e=this;if(this.state.searchby){var t=localStorage.getItem("userDetails");t=t&&JSON.parse(t),Ue.searchRetailer(this.state.searchby).then(function(t){var a=De(t);a.result&&e.setState({retailerDetails:[a.result[0]]}),console.log("retailerDetails",e.state.retailerDetails)})}else Se.showError("Type by lapu number or Retailer AirtelId Id ")}},{key:"render",value:function(){var e,t,a;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement("div",{style:{padding:"40px"}},r.a.createElement(Mt.a,{style:{padding:"10px",overflow:"auto"}},r.a.createElement(Oe.a,(a={syt:!0,container:!0,spacing:24},Object(E.a)(a,"container",!0),Object(E.a)(a,"direction","row"),Object(E.a)(a,"justify","right"),Object(E.a)(a,"alignItems","center"),a),r.a.createElement(Oe.a,{item:!0,xs:12,sm:7},r.a.createElement(he.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},"Back Office User Search")),r.a.createElement(Oe.a,(e={item:!0,xs:12,sm:3},Object(E.a)(e,"item",!0),Object(E.a)(e,"alignItems","flex-end"),e),r.a.createElement(Ie.a,{type:"text",value:this.state.searchby,label:"Search User",style:{width:"100%"},name:"searchby",onChange:this.onChange})),r.a.createElement(Oe.a,(t={item:!0,xs:12,sm:2},Object(E.a)(t,"item",!0),Object(E.a)(t,"alignItems","flex-end"),t),r.a.createElement(ke.a,{startIcon:r.a.createElement(Rn.a,null),variant:"contained",color:"",style:{marginLeft:"20px"},onClick:this.searchRetailer},"Search"))),r.a.createElement("div",{style:{padding:"10px",overflow:"auto",height:"100px"}},r.a.createElement(We.a,{size:"small","aria-label":"sticky table"},r.a.createElement(Ea.a,null,r.a.createElement(fa.a,{style:{width:"170px",whiteSpace:"nowrap"}},r.a.createElement(ba.a,{align:""},"User Id"),r.a.createElement(ba.a,{align:""},"Name "),r.a.createElement(ba.a,{align:""},"Msisdn"),r.a.createElement(ba.a,{align:""},"Email"),r.a.createElement(ba.a,{align:""},"TL ID"),r.a.createElement(ba.a,{align:""},"TL No."),r.a.createElement(ba.a,{align:""},"Manager Id"),r.a.createElement(ba.a,{align:""},"Manager No."),r.a.createElement(ba.a,{align:""},"Role"),r.a.createElement(ba.a,{align:""},"Department"),r.a.createElement(ba.a,{align:""},"Remarks"),r.a.createElement(ba.a,{align:""},"Is Active"))),r.a.createElement(va.a,{style:{width:"",whiteSpace:"nowrap"}},this.state.retailerDetails?this.state.retailerDetails.map(function(e){return r.a.createElement(fa.a,{hover:!0,key:e.txnId},r.a.createElement(ba.a,{align:"center"},e.laid),r.a.createElement(ba.a,{align:"center"},e.name),r.a.createElement(ba.a,{align:"center"},e.msisdn),r.a.createElement(ba.a,{align:"center"},e.emailId),r.a.createElement(ba.a,{align:"center"},e.tlId),r.a.createElement(ba.a,{align:"center"},e.tlNum),r.a.createElement(ba.a,{align:"center"},e.managerId),r.a.createElement(ba.a,{align:"center"},e.managerNum),r.a.createElement(ba.a,{align:"center"},e.role),r.a.createElement(ba.a,{align:"center"},e.department),r.a.createElement(ba.a,{align:"center"},e.remarks),r.a.createElement(ba.a,{align:"center"},e.active?"Yes":"No"))}):"")))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Mt.a,{style:{padding:"15px"}},r.a.createElement(Fn,null,"Back Office On-Boarding "),r.a.createElement(Oe.a,{container:!0,className:"flexGrow",spacing:3,style:{padding:"10px"}},r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(we.a,{htmlFor:"Connection Type"},r.a.createElement(he.a,{variant:"subtitle1"},r.a.createElement(Te.a,{color:"primary",href:"/webdata/AgentOnboardingTemplate.xlsx"},"Download Sample")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(he.a,{variant:"subtitle1"}," Upload or Update User ")),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(he.a,{variant:"subtitle1"},r.a.createElement("input",{type:"file",name:"uploadfile",id:"uploadfile",onChange:this.onChangeFileUpload}))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(ke.a,{startIcon:r.a.createElement(ft.a,null),variant:"contained",color:"primary",style:{marginLeft:"20px"},onClick:this.relailerOnboard},"Upload"))),r.a.createElement(Oe.a,{container:!0,className:"flexGrow",spacing:3,style:{padding:"10px"}},r.a.createElement(Oe.a,{item:!0,xs:12,sm:12},r.a.createElement(he.a,{variant:"subtitle1"}," "),this.state.uploadResponse?r.a.createElement(_n,{message:this.state.uploadResponse}):""))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Mt.a,{style:{padding:"15px"}},r.a.createElement(Fn,null,"Back Office Delete "),r.a.createElement(Oe.a,{container:!0,className:"flexGrow",spacing:3,style:{padding:"10px"}},r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(we.a,{htmlFor:"Connection Type"},r.a.createElement(he.a,{variant:"subtitle1"},r.a.createElement(Te.a,{color:"primary",href:"/webdata/AgentDeleteTemplate.xlsx"},"Download Delete Sample ")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(he.a,{variant:"subtitle1"},"Bulk Delete User")),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(he.a,{variant:"subtitle1"},r.a.createElement("input",{type:"file",name:"deletefile",id:"deletefile",onChange:this.onChangeFileUpload}))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(ke.a,{startIcon:r.a.createElement(In.a,null),variant:"contained",color:"primary",style:{marginLeft:"20px"},onClick:this.relailerDelete},"Delete"))),r.a.createElement(Oe.a,{container:!0,className:"flexGrow",spacing:3,style:{padding:"10px"}},r.a.createElement(Oe.a,{item:!0,xs:12,sm:12},r.a.createElement(he.a,{variant:"subtitle1"}," "),this.state.deleteResponse?r.a.createElement(_n,{message:this.state.deleteResponse}):"")))))}}]),t}(r.a.Component),Un=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).validateUploadFile=function(e){var t=e.name.toString();if(/[^a-zA-Z0-9\.\-\_ ]/.test(t))return Se.showError("File name can contain only alphanumeric characters including space and dots"),!1;var a=t.split(".").pop();if(console.log("File Extension: ",a),"xlsx"==a){var n=e.size/1e3;if(n>=5&&n<=2048)return Object.defineProperty(e,"name",{writable:!0,value:la()(e.name)+"."+a}),e;Se.showError("File size should be grater than 5KB and less than 2MB")}else Se.showError("Only xlsx file allow to upload");return!1},a.onChangeFileUpload=function(e){if(a.validateUploadFile(e.target.files[0]))return console.log(e.target.name),void a.setState(Object(E.a)({},e.target.name,e.target.files[0]));console.log("Not Valid file: ",e.target.name),document.getElementById(e.target.name).value=""},a.onChange=function(e){(""===e.target.value||/^[0-9\b]+$/.test(e.target.value)&&e.target.value.length<=10)&&a.setState({searchby:e.target.value})},a.state={products:[],retailerOnboardExcelTemplatePath:"",retailerDeleteExcelTemplatePath:"",deletefile:"",searchby:"",retailerDetails:"",allOfferData:""},a.getAdmminStaticData=a.getAdmminStaticData.bind(Object(D.a)(a)),a.uploadOffer=a.uploadOffer.bind(Object(D.a)(a)),a.relailerDelete=a.relailerDelete.bind(Object(D.a)(a)),a.searchRetailer=a.searchRetailer.bind(Object(D.a)(a)),a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getAdmminStaticData(),Ue.downlaodAllOfferData().then(function(t){var a=De(t);a.result&&e.setState({allOfferData:a.result})})}},{key:"getAdmminStaticData",value:function(){var e=this;Ue.getStaticData("ADMIN").then(function(t){var a=De(t);a.result&&a.result&&e.setState({retailerOnboardExcelTemplatePath:a.result.retailerOnboardExcelTemplatePath,retailerDeleteExcelTemplatePath:a.result.retailerDeleteExcelTemplatePath})})}},{key:"uploadOffer",value:function(){if(console.log(this.state.uploadfile),this.state.uploadfile&&""!=document.getElementById("uploadfile").value){var e=new FormData;e.append("file",this.state.uploadfile),Ue.uploadOffer(e).then(function(e){console.log("datavijay",e),200==(e=e&&e.data).status?Se.showSuccess("Offer Uploaded Successfully."):Se.showError(e.message),document.getElementById("uploadfile").value=""})}else Se.showError("Missing required file to upload")}},{key:"relailerDelete",value:function(){if(this.state.deletefile&&""!=document.getElementById("deletefile").value){var e=localStorage.getItem("userDetails");e=e&&JSON.parse(e);var t=new FormData;t.append("file",this.state.deletefile),t.append("submittedBy",e&&e.loginId),t.append("email",""),Ue.deleteRetailer(t).then(function(e){De(e),Se.showSuccess("Attached retailer info deleted successfully."),document.getElementById("deletefile").value=""})}else Se.showError("Missing required file to upload")}},{key:"searchRetailer",value:function(){var e=this;if(this.state.searchby){var t=localStorage.getItem("userDetails");t=t&&JSON.parse(t);var a={lapuNumber:this.state.searchby,retailerAirtelId:this.state.searchby};Ue.searchRetailer(a).then(function(t){var a=De(t);a.result&&e.setState({retailerDetails:[a.result]})})}else Se.showError("Type by lapu number or Retailer AirtelId Id ")}},{key:"addProduct",value:function(){this.props.history.push("/add-product")}},{key:"someAction",value:function(){alert("action happed in other commpornt")}},{key:"editProduct",value:function(e){console.log("productid",e),window.localStorage.setItem("selectedProductId",e),this.props.history.push("/edit-doc")}},{key:"convertBool",value:function(e){return e?"Yes":"No"}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement("div",{style:{padding:"40px"}},r.a.createElement(Mt.a,{style:{padding:"15px"}},r.a.createElement(he.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},"Customer Offer Upload"),r.a.createElement(Oe.a,{container:!0,className:"flexGrow",spacing:3,style:{padding:"10px"}},r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(we.a,{htmlFor:"Connection Type"},r.a.createElement(he.a,{variant:"subtitle1"},r.a.createElement(Te.a,{color:"primary",href:"/webdata/Offers.xlsx"},"Download Sample")))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(he.a,{variant:"subtitle1"},"Upload Offer")),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(he.a,{variant:"subtitle1"},r.a.createElement("input",{type:"file",name:"uploadfile",id:"uploadfile",onChange:this.onChangeFileUpload}))),r.a.createElement(Oe.a,{item:!0,xs:12,sm:3},r.a.createElement(ke.a,{startIcon:r.a.createElement(ft.a,null),variant:"contained",color:"primary",style:{marginLeft:"20px"},onClick:this.uploadOffer},"Upload")))),r.a.createElement("br",null),r.a.createElement(Mt.a,{style:{padding:"15px"}},r.a.createElement(he.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},"Download Offers Details"),r.a.createElement(he.a,{variant:"subtitle1",gutterBottom:!0},"Total Offers:",this.state.allOfferData.length),this.state.allOfferData?r.a.createElement(Vt.CSVLink,{data:this.state.allOfferData,filename:"offers-details.csv",className:"btn btn-primary",target:"_blank"},r.a.createElement(he.a,{variant:"subtitle1",gutterBottom:!0},"Download Offers")):"")))}}]),t}(r.a.Component),Wn=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).onChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value.trim()))},a.login=function(e){if(e.preventDefault(),a.state.userName&&a.state.password){a.setState({isDasable:!0});var t={userName:a.state.userName,password:a.state.password};de.login(t).then(function(e){a.setState({isError:e.data.message}),console.log("resolveResponse",t);var t=e.data;a.setState({isDasable:!1}),t.result&&(window.localStorage.setItem("userDetails",JSON.stringify(t.result)),window.localStorage.setItem("token",t.result.token)),t.result&&"BOA"==t.result.roleCode&&a.props.history.push("/verify"),t.result&&"DE"==t.result.roleCode&&a.props.history.push("/dataentry"),t.result&&"ADMIN"==t.result.roleCode&&a.props.history.push("/packs"),(t.result&&"DIST"==t.result.roleCode||t.result&&"FSE"==t.result.roleCode)&&a.props.history.push("/distributor")})}else a.setState({isError:"Olms Id and password is required."})},a.state={userName:"",password:"",isDasable:!1,isError:!1},a.login=a.login.bind(Object(D.a)(a)),a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement("img",{style:Hn.imagestyle,src:"/webdata/adminwelcome.png"}))}},{key:"componentDidMount",value:function(){var e=this;window.localStorage.getItem("token");Ze.getStaticData("ADMIN").then(function(t){var a=De(t);e.setState({listofzones:a.result&&a.result.zones})})}}]),t}(r.a.Component),Hn={formStyle:{display:"flex",flexFlow:"row wrap"},label:{display:"flex",justifyContent:"center"},errorMessage:{color:"red",marginTop:"11px"},waitMessage:{color:"gray",marginTop:"11px"},imagestyle:{width:"100%",height:"100vh"}},Zn=Wn,qn=a(280),Vn=a.n(qn),Yn=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).onChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.zoneChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleChange=function(e){return function(t){console.log("objid1",t.target.checked);for(var n=a.state.roleDetails,r=0;r<n.length;r++)n[r].id==e.id&&(n[r].alreadyAssigned=t.target.checked);a.setState({roleDetails:n}),console.log(a.state.roleDetails)}},a.state={products:[],searchedproducts:"",searchby:"",listofzones:[],selectedReasons:{},selectedZone:[],zone:"",addNewEnable:!1,roleName:"",roleDetails:"",selectedRole:!1},a.loadProductList=a.loadProductList.bind(Object(D.a)(a)),a.editProduct=a.editProduct.bind(Object(D.a)(a)),a.convertBool=a.convertBool.bind(Object(D.a)(a)),a.onChange=a.onChange.bind(Object(D.a)(a)),a.zoneChange=a.zoneChange.bind(Object(D.a)(a)),a.handleChange=a.handleChange.bind(Object(D.a)(a)),a.addRole=a.addRole.bind(Object(D.a)(a)),a.showRoleDetails=a.showRoleDetails.bind(Object(D.a)(a)),a.deleteNewRole=a.deleteNewRole.bind(Object(D.a)(a)),a.deleteRole=a.deleteRole.bind(Object(D.a)(a)),a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.setItem("lastUrl","role"),Ue.getListOfRoles().then(function(t){var a=De(t);e.setState({searchedproducts:a&&a.result})})}},{key:"showRoleDetails",value:function(e){var t=this;Wt()("#tableId .rolesRow").css("background-color",""),document.getElementById("roleId"+e).style.backgroundColor="lightgray",Ue.getRoleDetails(e).then(function(e){var a=De(e);t.setState({roleDetails:a&&a.result&&a.result.authorites})})}},{key:"searchOnDB",value:function(e){}},{key:"loadProductList",value:function(e){var t=this,a=(new Date).getTime(),n={endDate:a,mobileNumber:e||null,noOfRecords:20,role:"BOA",startDate:0,txnId:0,type:"next",zones:this.state.selectedZone.length?this.state.selectedZone:null};document.getElementById("showMessage").innerHTML="Please Wait Loading...",Ue.listDocs(n).then(function(e){var a=De(e),n=a&&a.result&&a.result.activationList;t.setState({products:n});t.setState({searchedproducts:["Data Entry","BO Agent","Distributor","FSE"]});var r=n&&n.map(function(e,t){return e.txnId});document.getElementById("showMessage")&&(document.getElementById("showMessage").innerHTML=null==n?"No new documents for verification":""),localStorage.setItem("verifyListingTxn",r)})}},{key:"addRole",value:function(){this.setState({addNewEnable:!0})}},{key:"deleteNewRole",value:function(){this.setState({addNewEnable:!1}),this.setState({roleName:""})}},{key:"deleteRole",value:function(){window.confirm("Please confirm if you want to delete the role?")}},{key:"someAction",value:function(){alert("action happed in other commpornt")}},{key:"editProduct",value:function(e,t){console.log("productid, row.sim",e,t),window.localStorage.setItem("selectedProductId",e),window.localStorage.setItem("selectedSim",t),this.props.history.push("/verify-edit")}},{key:"convertBool",value:function(e){return e?"Yes":"No"}},{key:"render",value:function(){for(var e=this,t=this.state.roleDetails,a=[],n=0;n<t.length;n++)a.push(r.a.createElement("label",null,r.a.createElement(rt.a,{onChange:this.handleChange(t[n]),button:!0}," ",r.a.createElement("input",{type:"checkbox",checked:t[n].alreadyAssigned})," ",t[n].authority," ")));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement(Mt.a,{style:{padding:"10px",overflow:"auto"}},r.a.createElement(Oe.a,Object(E.a)({container:!0,spacing:3,direction:"row",alignItems:"center"},"container",!0),r.a.createElement(Oe.a,{item:!0,xs:12,sm:9},r.a.createElement(he.a,{variant:"h6",color:"primary",gutterBottom:!0},"Role Management"))),r.a.createElement(Mt.a,{style:{padding:"10px",overflow:"auto"}},r.a.createElement(Oe.a,Object(E.a)({container:!0,spacing:3,direction:"row",alignItems:"center"},"container",!0),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement("div",{style:{padding:"10px",overflow:"auto",height:"400px"}},r.a.createElement(We.a,{id:"tableId",size:"small","aria-label":"sticky table"},r.a.createElement(Ea.a,null,r.a.createElement(fa.a,{style:{width:"170px",whiteSpace:"nowrap"}},r.a.createElement(ba.a,null,r.a.createElement(he.a,{color:"primary",gutterBottom:!0},"Role Name")),r.a.createElement(ba.a,null,r.a.createElement(he.a,{color:"primary",gutterBottom:!0},"Delete")))),r.a.createElement(va.a,{style:{whiteSpace:"nowrap"}},this.state.searchedproducts?this.state.searchedproducts.map(function(t){return r.a.createElement(fa.a,{id:"roleId"+t.id,className:"rolesRow",key:t.txnId},r.a.createElement(ba.a,{onClick:function(){return e.showRoleDetails(t.id)},component:"th",scope:"row",className:"hidden"},r.a.createElement(rt.a,{button:!0},t.role," ")),r.a.createElement(ba.a,{component:"th",scope:"row",className:"hidden"},r.a.createElement(ke.a,{onClick:function(){return e.deleteRole()},variant:"contained",style:{marginTop:"12px",marginLeft:"5px"},size:"small",color:"secondary"}," ",r.a.createElement(Vn.a,null))))}):""))),this.state.addNewEnable?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ie.a,{label:"Add New Role",style:{width:"525px"},name:"roleName",value:this.state.roleName,onChange:this.onChange}),r.a.createElement(ke.a,{onClick:function(){return e.deleteNewRole()},variant:"contained",style:{marginTop:"12px",marginLeft:"5px"},size:"small",color:"secondary"},"Delete")," "):""),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{color:"primary",gutterBottom:!0},"Privileges"),a)),r.a.createElement(Oe.a,Object(E.a)({container:!0,spacing:3,direction:"row",alignItems:"center"},"container",!0),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(ke.a,{onClick:function(){return e.addRole()},variant:"contained",color:"default",style:{marginLeft:"20px"}},"Add New Role")),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(ke.a,{variant:"contained",color:"primary",style:{marginLeft:"20px"}},"Update")))),r.a.createElement("div",{style:{color:"gray",fontSize:"15px",textAlign:"center"}}," ",r.a.createElement("br",null)," ",r.a.createElement("span",{id:"showMessage"}," "))))}}]),t}(r.a.Component),Gn=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(S.a)(t).call(this,e))).onChange=function(e){(""===e.target.value||/^[0-9\b]+$/.test(e.target.value)&&e.target.value.length<=10)&&a.setState({searchby:e.target.value})},a.state={products:[],retailerOnboardExcelTemplatePath:"",retailerDeleteExcelTemplatePath:"",deletefile:"",searchby:"",msisdnDetails:"",uploadResponse:"",deleteResponse:""},a.searchRetailer=a.searchRetailer.bind(Object(D.a)(a)),a}return Object(O.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){}},{key:"searchRetailer",value:function(){var e=this;if(this.state.searchby){var t=localStorage.getItem("userDetails");t=t&&JSON.parse(t),Ue.searchMSISDN(this.state.searchby).then(function(t){var a=De(t);if(401===a.status)return localStorage.clear(),void e.props.history.push("/login");a.result&&a.result.data?e.setState({msisdnDetails:a.result.data}):e.setState({msisdnDetails:[]})})}else Se.showError("Type MSISDN")}},{key:"render",value:function(){var e,t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt,null),r.a.createElement("div",{style:{padding:"20px"}},r.a.createElement(Mt.a,{style:{padding:"15px",position:"fixed",width:"97%"}},r.a.createElement(Oe.a,(t={syt:!0,container:!0,spacing:24},Object(E.a)(t,"container",!0),Object(E.a)(t,"direction","row"),Object(E.a)(t,"justify","right"),Object(E.a)(t,"alignItems","center"),t),r.a.createElement(Oe.a,{item:!0,xs:12,sm:8},r.a.createElement(he.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},"MSISDN Record History  - Search")),r.a.createElement(Oe.a,Object(E.a)({item:!0,xs:12,sm:2},"item",!0),r.a.createElement(Ie.a,{type:"text",value:this.state.searchby,label:" Search MSISDN ",style:{width:"100%"},name:"searchby",onChange:this.onChange})),r.a.createElement(Oe.a,(e={item:!0,xs:12,sm:2},Object(E.a)(e,"item",!0),Object(E.a)(e,"style",{textAlign:"left"}),e),r.a.createElement(ke.a,{startIcon:r.a.createElement(Rn.a,null),variant:"contained",color:"",style:{marginLeft:"20px"},onClick:this.searchRetailer},"Search")))),r.a.createElement(We.a,{style:{marginTop:"100px"},"aria-label":"sticky table"},r.a.createElement(Ea.a,null,r.a.createElement(fa.a,{style:{width:"170px",whiteSpace:"nowrap"}},r.a.createElement(ba.a,{align:""},"Zone "),r.a.createElement(ba.a,{align:""},"MSISDN"),r.a.createElement(ba.a,{align:""},"NIC No."),r.a.createElement(ba.a,{align:""},"Sim No."),r.a.createElement(ba.a,{align:""},"FTA Date"),r.a.createElement(ba.a,{align:""},"Submit Date"),r.a.createElement(ba.a,{align:""},"Resubmit Date"),r.a.createElement(ba.a,{align:""},"Verification Date"),r.a.createElement(ba.a,{align:""},"Data Entered Date"),r.a.createElement(ba.a,{align:""},"Omni Transfer Date"),r.a.createElement(ba.a,{align:""},"Verify By"),r.a.createElement(ba.a,{align:""},"Verifiy Comment"),r.a.createElement(ba.a,{align:""},"Verification Status"),r.a.createElement(ba.a,{align:""},"Data Entered By"),r.a.createElement(ba.a,{align:""},"Distributor Name"),r.a.createElement(ba.a,{align:""},"Distributor Number"),r.a.createElement(ba.a,{align:""},"Retailer Number"),r.a.createElement(ba.a,{align:""},"Omni Status"),r.a.createElement(ba.a,{align:""},"Image Count "),r.a.createElement(ba.a,{align:""},"Ref Number "))),r.a.createElement(va.a,{style:{width:"",whiteSpace:"nowrap"}},this.state.msisdnDetails?this.state.msisdnDetails.map(function(e){return r.a.createElement(fa.a,{hover:!0,key:e.txnId},r.a.createElement(ba.a,{align:"center"},e.zone),r.a.createElement(ba.a,{align:"center"},e.msisdnNumber),r.a.createElement(ba.a,{align:"center"},e.nicNumber),r.a.createElement(ba.a,{align:"center"},e.simNumber),r.a.createElement(ba.a,{align:"center"},e.ftaDate),r.a.createElement(ba.a,{align:"center"},e.submitDate),r.a.createElement(ba.a,{align:"center"},e.resubmitDate),r.a.createElement(ba.a,{align:"center"},e.verificationDate),r.a.createElement(ba.a,{align:"center"},e.dataEnteredDate),r.a.createElement(ba.a,{align:"center"},e.omniTransferDate),r.a.createElement(ba.a,{align:"center"},e.verifyBy),r.a.createElement(ba.a,{align:"center"},e.verifiyComment),r.a.createElement(ba.a,{align:"center"},e.verificationStatus),r.a.createElement(ba.a,{align:"center"},e.dataEnteredBy),r.a.createElement(ba.a,{align:"center"},e.distributorName),r.a.createElement(ba.a,{align:"center"},e.distributorNumber),r.a.createElement(ba.a,{align:"center"},e.retailerNumber),r.a.createElement(ba.a,{align:"center"},e.omniStatus),r.a.createElement(ba.a,{align:"center"},e.imageCount),r.a.createElement(ba.a,{align:"center"},e.refNumber))}):""))))}}]),t}(r.a.Component),Kn=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement(y.c,null,r.a.createElement(y.a,{path:"/",exact:!0,component:ze}),r.a.createElement(y.a,{path:"/login",component:ze}),r.a.createElement(y.a,{path:"/verify",component:Ca}),r.a.createElement(y.a,{path:"/resubmit-verify",component:Ta}),r.a.createElement(y.a,{path:"/verify-edit",component:Ha}),r.a.createElement(y.a,{path:"/dataentry",component:Ya}),r.a.createElement(y.a,{path:"/resubmit-dataentry",component:$a}),r.a.createElement(y.a,{path:"/data-edit",replace:!0,component:nn}),r.a.createElement(y.a,{path:"/distributor",component:sn}),r.a.createElement(y.a,{path:"/dist-resubmit",component:mn}),r.a.createElement(y.a,{path:"/banners",component:kn}),r.a.createElement(y.a,{path:"/banner-add",component:ca}),r.a.createElement(y.a,{path:"/banner-edit",component:ya}),r.a.createElement(y.a,{path:"/packs",component:hn}),r.a.createElement(y.a,{path:"/pack-add",component:bn}),r.a.createElement(y.a,{path:"/pack-edit",component:On}),r.a.createElement(y.a,{path:"/backoffice",component:zn}),r.a.createElement(y.a,{path:"/offerupload",component:Un}),r.a.createElement(y.a,{path:"/report",component:$t}),r.a.createElement(y.a,{path:"/welcome",component:Zn}),r.a.createElement(y.a,{path:"/role",component:Yn}),r.a.createElement(y.a,{path:"/msisdn-status",component:Gn}),r.a.createElement(y.a,{path:"*",component:ze}))))};a(440);var Jn=function(){return window.localStorage.getItem("token"),r.a.createElement(r.a.Fragment,null,r.a.createElement(Kn,null),r.a.createElement(ve.a,null))};i.a.render(r.a.createElement(s.a,{store:g},r.a.createElement(Jn,null)),document.querySelector("#root"))}},[[298,1,2]]]);
//# sourceMappingURL=main.a768548f.chunk.js.map